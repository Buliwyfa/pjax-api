---
layout: bootstrap
title: fix
type: page
nav: nav
class: style-api style-api-detail
---

# fix
pjaxの諸問題の修正を設定します。

## fix.location: boolean
`location`オブジェクトを更新するかを設定します。初期値は`true`です。

AndroidとiOSでは`location`オブジェクトが`pushState`を実行しても更新されず、ブラウザのアドレスバーに表示されるURLと`location.href`により取得するURLが一致しないバグが報告されています。

## fix.history: boolean
履歴を修復するかを設定します。IndexedDBを使用します。初期値は`true`です。

ajax通信が強制終了されたページのタイトルが直近の正常に表示されたページのタイトルで上書きされ、間違った履歴が記録される問題があります。この問題はpjaxにより2回以上ページ移動後、ページをリロードしブラウザの戻るボタンでページを読み込む時間を与えず2回以上ページを戻ることで確認できます。

## fix.scroll: boolean
スクロール位置を復元するかを設定します。IndexedDBを使用します。初期値は`true`です。

ブラウザの戻る/進む機能によりページを移動した場合に移動先ページの直前のスクロール位置が復元されないことがある問題があります。この問題は3000pxスクロールしているページから1000pxの高さのページに移動して前のページに戻ると1000px付近までしかスクロールされないといった形で確認できます。

## fix.noscript: boolean
NOSCRIPT要素の子要素をすべてテキストノードに変換します。また、キャッシュの上書きデータ内のエスケープされたNOSCRIPTタグ内テキストを復元します。初期値は`true`です。

HTMLをDocumentオブジェクトに変換する際にNOSCRIPT要素の子要素が有効なDOM要素として認識され、IMG要素であれば画像のリクエストが発生するなど意図しない動作をする場合があるためこれを防止します。

NOSCRIPTタグ内の文字列はDOM変換時に特殊文字がエスケープされ元の内容を取得できないためデコードにより元の内容を復元します。

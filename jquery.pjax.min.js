/*
 * 
 * pjax
 * 
 * ---
 * @Copyright(c) 2012, falsandtru
 * @license MIT  http://opensource.org/licenses/mit-license.php  http://sourceforge.jp/projects/opensource/wiki/licenses%2FMIT_license
 * @version 1.22.9
 * @updated 2013/11/03
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(e){var E,F,l=window,y=document,v=void 0,B=["settings"],G;e.fn.pjax=e.pjax=function(r){function T(a){U();b.load.script&&e("script").each(function(){var a=this,c,a="function"===typeof b.load.rewrite?m(b.load.rewrite,null,[a.cloneNode()])||a:a;(c=a.src)&&c in b.log.script||!c||b.load.reload&&e(a).is(b.load.reload)||(b.log.script[c]=!0)});e(a).undelegate(b.link,b.nss.click).delegate(b.link,b.nss.click,b.id,E=function(a){a.timeStamp=(new Date).getTime();var c=B[1];if(c.disable)return!1;c.destination.href=
encodeURI(decodeURI(this.href));if(c.location.protocol===c.destination.protocol&&c.location.host===c.destination.host&&!(1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)){if(c.location.href===c.destination.href)return!1;if(!m(c.hashquery,null,[a,this.href])&&c.location.pathname+c.location.search===c.destination.pathname+c.destination.search)return c.hashclick=!0;var b,d;b=c.destination.href;c.area=m(c.options.area,null,[a,b]);c.hashclick=!1;c.timestamp=a.timeStamp;c.landing&&(c.landing=!1);
if(e(c.area).length&&(!c.scope||C(c)))return c.cache[a.type.toLowerCase()]&&(d=z(b)),H(c,a,b,!0,d),!1}});e(a).undelegate(b.form,b.nss.submit).delegate(b.form,b.nss.submit,b.id,F=function(a){a.timeStamp=(new Date).getTime();var c=B[1];if(c.disable)return!1;c.destination.href=encodeURI(decodeURI(this.action));if(!(1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)){var b,d;b=c.destination.href=c.destination.href.replace(/[?#].*/,"")+encodeURI(decodeURI("GET"===a.target.method.toUpperCase()?"?"+
e(a.target).serialize():""));c.area=m(c.options.area,null,[a,b]);c.hashclick=!1;c.timestamp=a.timeStamp;c.landing&&(c.landing=!1);if(e(c.area).length&&(!c.scope||C(c)))return c.cache[a.type.toLowerCase()]&&c.cache[a.target.method.toLowerCase()]&&(d=z(b)),H(c,a,b,!0,d),!1}});e(l).unbind(b.nss.popstate).bind(b.nss.popstate,b.id,function(a){a.timeStamp=(new Date).getTime();var c=B[1];if(c.disable)return!1;c.destination.href=encodeURI(decodeURI(l.location.href));if(c.location.href===c.destination.href)return!1;
var b,d;if(!m(c.hashquery,null,[a,b])&&c.location.pathname+c.location.search===c.destination.pathname+c.destination.search)return c.hashclick=c.hashclick&&O()&&!1;b=c.destination.href;c.area=m(c.options.area,null,[a,b]);c.hashclick=!1;c.timestamp=a.timeStamp;if(c.landing){if(c.landing.href===b){c.landing=!1;return}c.landing=!1}if(e(c.area).length)return c.database&&c.fix.history&&L(b),c.cache[a.type.toLowerCase()]&&(d=z(b)),H(c,a,b,!1,d),!1});b.database&&b.fix.scroll&&e(l).unbind(b.nss.scroll).bind(b.nss.scroll,
b.id,function(a,c){var b=B[1],d,m=arguments.callee;if(b.scroll.delay){for(;d=b.scroll.queue.shift();)clearTimeout(d);d=setTimeout(function(){for(;d=b.scroll.queue.shift();)clearTimeout(d);I(e(l).scrollLeft(),e(l).scrollTop())},b.scroll.delay);b.scroll.queue.push(d)}else I(e(l).scrollLeft(),e(l).scrollTop());b.scroll.suspend&&!c&&(e(this).unbind(b.nss.scroll),setTimeout(function(){b.database&&b.fix.scroll&&e(l).bind(b.nss.scroll,b.id,m).trigger(b.nss.scroll,[!0])},b.scroll.suspend))});e(y).unbind(b.gns+
".execute").bind(b.gns+".execute",b.id,function(a,c){switch(typeof c){case "function":b.speedcheck&&b.log.speed.name.push("executable");b.speedcheck&&b.log.speed.time.push(b.speed.now()-b.log.speed.fire);c();break;case "object":for(var m=0,d;d=c[m++];)d.src?e.ajax(e.extend(!0,{},b.ajax,b.load.ajax,{url:d.src,async:d.async,global:!1})):"object"===typeof d&&(!d.type||-1<d.type.toLowerCase().indexOf("text/javascript"))&&l.eval.call(l,(d.text||d.textContent||d.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,
"/*$0*/"))}})}function H(a,b,c,s,d){function h(a,b,f){var d=a.validate?a.validate.clone({name:"jquery.pjax.js - update()"}):!1;d&&d.start();d&&(d.scope=function(a){return eval(a)});d&&d.test("1",1,0,"update()");d&&d.test("++",1,0,"start");a:{var w=a.speedcheck;w&&a.log.speed.name.push("update");w&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire);var h=a.callbacks.update;if(!1!==m(h.before,null,[b,a.parameter,q,p,n],a.callbacks.async)){var k=window,l=document,t,g,x;try{d&&d.test("++",1,0,"try");
d&&d.test("++",1,f?0:[a.contentType,n.getResponseHeader("Content-Type")],"content-type");if(!f&&-1===(n.getResponseHeader("Content-Type")||"").toLowerCase().search(a.contentType))throw Error("throw: content-type mismatch");d&&d.test("++",f?"'usable'":"'unusable'",0,"cache");f&&!1!==m(h.cache.load.before,null,[b,a.parameter,f],a.callbacks.async)&&(n=f.XMLHttpRequest,q=n.responseText,p=f.textStatus,t=f.title,g=f.css,x=f.script,m(h.cache.load.after,null,[b,a.parameter,f],a.callbacks.async));d&&d.test("++",
1,0,"initialize");var A,v,r,D;A=e(q);v=0<A.filter("title").length;r=a.area.replace(/(\((.*?(\(.*?\).*?)?)*?\)|\S)(,|$)/g,function(a,b,c,d,e){return b+(e?"|":"")}).split(/\s*\|(?!=)\s*/);v||(q=q.replace(/^((?:.|[\n\r])*?<body[^>]*>.*[\n\r]*.*[\n\r]*)/im,"$1").replace(/\x3c!--\[(?:.|[\n\r])*?<!\[endif\]--\x3e/gim,""),q=q.replace(/<noscript(?:.|[\n\r])*?<\/noscript>/gim,""));t=t||v?A.filter("title").text():e("<span/>").html(M(q,/<title>([^<]*?)<\/title>/i).join()).text();if(!e(a.area).length||!A.find(a.area).add(A.filter(a.area)).length)throw Error("throw: area length mismatch");
d&&d.test("++",1,c,"url");!1!==m(h.url.before,null,[b,a.parameter,q,p,n],a.callbacks.async)&&(s&&c!==a.location.href&&k.history.pushState(m(a.state,null,[b,c]),k.opera||-1!==k.navigator.userAgent.toLowerCase().indexOf("opera")?t:l.title,c),a.location.href=c,s&&a.fix.location&&(G.off(),k.history.back(),k.history.forward(),G.on()),m(h.url.after,null,[b,a.parameter,q,p,n],a.callbacks.async));d&&d.test("++",1,t,"title");!1!==m(h.title.before,null,[b,a.parameter,q,p,n],a.callbacks.async)&&(l.title=t,a.database&&
a.fix.history&&L(c,t),m(h.title.after,null,[b,a.parameter,q,p,n],a.callbacks.async));a.database&&P();d&&d.test("++",1,0,"scroll");var y=function(c){var d,f;switch(b.type.toLowerCase()){case "click":case "submit":d=c&&"function"===typeof a.scrollLeft?m(a.scrollLeft,null,[b]):a.scrollLeft;d=0<=d?d:0;d=null===d?e(k).scrollLeft():parseInt(Number(d));f=c&&"function"===typeof a.scrollTop?m(a.scrollTop,null,[b]):a.scrollTop;f=0<=f?f:0;f=null===f?e(k).scrollTop():parseInt(Number(f));e(k).scrollTop()===f&&
e(k).scrollLeft()===d||k.scrollTo(d,f);c&&a.database&&a.fix.scroll&&I(d,f);break;case "popstate":c&&a.database&&a.fix.scroll&&I()}};y(!1);d&&d.test("++",1,r,"content");if(!1!==m(h.content.before,null,[b,a.parameter,q,p,n],a.callbacks.async)){e(a.area).children("."+a.nss.class4html+"-check").remove();D=e("<div/>",{"class":a.nss.class4html+"-check",style:"display: block !important; visibility: hidden !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; position: absolute !important; top: -9999px !important; left: -9999px !important; font-size: 12px !important; text-indent: 0 !important;"}).text("pjax");
for(var B=0,K;K=r[B++];)e(K).html(A.find(K).add(A.filter(K)).contents()).append(D.clone());D=e(a.area).children("."+a.nss.class4html+"-check");e(l).trigger(a.gns+".DOMContentLoaded");m(h.content.after,null,[b,a.parameter,q,p,n],a.callbacks.async)}d&&d.test("++",1,0,"cache");f||!(a.cache.click||a.cache.submit||a.cache.popstate)||"submit"===b.type.toLowerCase()&&!a.cache[b.target.method.toLowerCase()]||!1===m(h.cache.save.before,null,[b,a.parameter,f],a.callbacks.async)||(J(c,t,u,p,n),cahce=z(c),m(h.cache.save.after,
null,[b,a.parameter,f],a.callbacks.async));d&&d.test("++",1,0,"rendering");var E=function(){D.remove();a.load.script&&a.load.sync&&setTimeout(function(){e(l).trigger(a.gns+".execute",[C("[src][defer]")])},0);a.scroll.record=!0;O("popstate"===b.type.toLowerCase())||y(!0);e(window).trigger(a.gns+".load");!1!==m(h.rendering.after,null,[b,a.parameter],a.callbacks.async)&&(w&&a.log.speed.name.push("rendered"),w&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire),w&&console.log(a.log.speed.time),w&&
console.log(a.log.speed.name))};d&&d.test("++",1,0,"css");var F=function(){var d=a.validate?a.validate.clone({name:"jquery.pjax.js - load_css()"}):!1;d&&d.start();d&&(d.scope=function(a){return eval(a)});if(!1!==m(h.css.before,null,[b,a.parameter,q,p,n],a.callbacks.async)){var k;k=(f=z(c))&&!f.css;g=g?g:v?A.find('link[rel~="stylesheet"], style').add(A.filter('link[rel~="stylesheet"], style')).get():M(q,/(<link[^>]*?rel=.[^"\']*?stylesheet[^>]*?>|<style[^>]*?>(?:.|[\n\r])*?<\/style>)/gim);f&&f.css&&
g&&g.length!==f.css.length&&(k=!0);k&&(f.css=g);v="object"===typeof g[0];e('link[rel~="stylesheet"], style').filter(function(){return e.data(this,a.nss.data,!0)});for(var l=0,s,t=e('link[rel~="stylesheet"]'),x=e("style"),r;s=g[l];l++){r=!1;s="object"===typeof s?s:e(s)[0];s="function"===typeof a.load.rewrite?m(a.load.rewrite,null,[s.cloneNode()])||s:s;k&&!v&&(f.css[l]=s);switch(s.tagName.toLowerCase()){case "link":if(t.filter(function(){if(r||this.href!==s.href)return!1;r=!0;e.removeData(this,a.nss.data);
return!0}).length)continue;break;case "style":if(x.filter(function(){if(r||!e.data(this,a.nss.data)||this.innerHTML!==s.innerHTML)return!1;r=!0;e.removeData(this,a.nss.data);return!0}).length)continue}e("head").append(s)}e('link[rel~="stylesheet"], style').filter(function(){return e.data(this,a.nss.data)}).remove();!1!==m(h.css.after,null,[b,a.parameter,q,p,n],a.callbacks.async)&&(w&&a.log.speed.name.push("css"),w&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire))}d&&d.end()};a.load.css&&setTimeout(function(){F();
e(l).trigger(a.gns+".ready")},0);!a.load.css&&e(l).trigger(a.gns+".ready");e(l).trigger(a.gns+".execute",[function(c){!1!==m(h.rendering.before,null,[b,a.parameter],a.callbacks.async)&&setTimeout(function(){D.filter(function(){return this.clientWidth||e(this).is(":hidden")}).length===D.length?E():D.length&&setTimeout(function(){arguments.callee()},a.interval)},0)}]);d&&d.test("++",1,0,"script");var C=function(d){var k=a.validate?a.validate.clone({name:"jquery.pjax.js - load_script()"}):!1;k&&k.start();
k&&(k.scope=function(a){return eval(a)});if(!1!==m(h.script.before,null,[b,a.parameter,q,p,n],a.callbacks.async)){var s,l=[];s=(f=z(c))&&!f.script;x=x||v?A.find("script").add(A.filter("script")).get():M(q,/(?:[^\'\"]|^\s*?)(<script[^>]*?>(?:.|[\n\r])*?<\/script>)(?:[^\'\"]|\s*?$)/gim);f&&f.script&&x&&x.length!==f.script.length&&(s=!0);s&&(f.script=x);v="object"===typeof x[0];for(var t=0,g,r,u;g=x[t];t++)g="object"===typeof g?g:e(g)[0],g="function"===typeof a.load.rewrite?u=m(a.load.rewrite,null,[g.cloneNode()])||
g:g,!s||v&&!u||(f.script[t]=g),!e(g).is(d)||(r=g.src)&&r in a.log.script||(!r||a.load.reload&&e(g).is(a.load.reload)||(a.log.script[r]=!0),l.push(g));!1!==m(h.script.after,null,[b,a.parameter,q,p,n],a.callbacks.async)&&("[src][defer]"===d&&w&&a.log.speed.name.push("script"),"[src][defer]"===d&&w&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire))}k&&k.end();return l};a.load.script&&setTimeout(function(){e(l).trigger(a.gns+".execute",[C(":not([defer]),:not([src])")])},0);a.load.script&&!a.load.sync&&
setTimeout(function(){e(l).trigger(a.gns+".execute",[C("[src][defer]")])},0);d&&d.test("++",1,0,"verify");if(!1!==m(h.verify.before,null,[b,a.parameter],a.callbacks.async)){if(c===encodeURI(decodeURI(k.location.href)))a.retry=!0;else if(a.retry)a.retry=!1,H(a,b,k.location.href,!1,a.cache[b.type.toLowerCase()]&&z(encodeURI(decodeURI(k.location.href))));else throw Error("throw: location mismatch");m(h.verify.after,null,[b,a.parameter],a.callbacks.async)}if(!1===m(h.success,null,[b,a.parameter,q,p,n],
a.callbacks.async))break a;if(!1===m(h.complete,null,[b,a.parameter,q,p,n],a.callbacks.async))break a;if(!1===m(a.callback,null,[b,a.parameter,q,p,n],a.callbacks.async))break a;d&&d.test("++",1,0,"success")}catch(N){d&&d.test("++",!String(N.message).indexOf("throw:"),N,"catch");d&&d.test("++",!("throw: location mismatch"===N.message&&c!==k.location.href),[c,k.location.href],"!( err.message === 'throw: location mismatch' && url !== win.location.href )");f&&J(c);if(!1===m(h.error,null,[b,a.parameter,
q,p,n],a.callbacks.async))break a;if(!1===m(h.complete,null,[b,a.parameter,q,p,n],a.callbacks.async))break a;d&&d.test("++",1,[c,k.location.href],"error");if(a.fallback)return"function"===typeof a.fallback?m(a.fallback,null,[b,c]):Q(b,d)}!1!==m(h.after,null,[b,a.parameter,q,p,n],a.callbacks.async)&&(w&&a.log.speed.name.push("ready"),w&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire),d&&d.test("++",1,0,"end"),d&&d.end())}}}var f=a.validate?a.validate.clone({name:"jquery.pjax.js - drive()"}):
!1;f&&f.start();f&&(f.scope=function(a){return eval(a)});f&&f.test("++",1,[c,b.type],"drive()");var t=a.speedcheck;t&&(a.log.speed.fire=a.timestamp);t&&(a.log.speed.time=[]);t&&(a.log.speed.name=[]);t&&a.log.speed.name.push("fire");t&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire);f&&f.test("++",1,0,"start");a.scroll.record=!1;a.fix.reset&&/click|submit/.test(b.type.toLowerCase())&&l.scrollTo(e(l).scrollLeft(),0);if(!1!==m(a.callbacks.before,null,[b,a.parameter],a.callbacks.async))if(d)f&&
f.test("++",1,0,"update"),e.when?e.when(R(a.wait)).done(function(){h(a,b,d)}):h(a,b,d),f&&f.test("++",1,0,"end"),f&&f.end();else{f&&f.test("++",1,0,"initialize");var k,g,q,n,p,x,u;k={};switch(b.type.toLowerCase()){case "click":f&&f.test("++",1,0,"event click");k.type="GET";break;case "submit":f&&f.test("++",1,b.target.method,"event submit");k.type=b.target.method.toUpperCase();"POST"===k.type&&(k.data=e(b.target).serializeArray());break;case "popstate":f&&f.test("++",1,0,"event popstate"),k.type=
"GET"}g=e.when?e.Deferred():null;f&&f.test("++",1,0,"setting");e.extend(!0,k,a.ajax,{xhr:a.callbacks.ajax.xhr?function(){n=m(a.callbacks.ajax.xhr,null,[b,a.parameter],a.callbacks.async);return n="object"===typeof n&&n||e.ajaxSettings.xhr()}:v,beforeSend:function(c,d){n=c;a.xhr&&4>a.xhr.readyState&&a.xhr.abort();a.xhr=n;n.setRequestHeader(a.nss.requestHeader,"true");n.setRequestHeader(a.nss.requestHeader+"-Area",a.area);n.setRequestHeader(a.nss.requestHeader+"-CSS",a.load.css);n.setRequestHeader(a.nss.requestHeader+
"-Script",a.load.script);m(a.callbacks.ajax.beforeSend,null,[b,a.parameter,n,d],a.callbacks.async)},dataFilter:a.callbacks.ajax.dataFilter?function(c,d){q=c;return m(a.callbacks.ajax.dataFilter,null,[b,a.parameter,q,d],a.callbacks.async)||q}:v,success:function(d,e,h){q=d;p=e;n=h;(f=a.validate?a.validate.clone({name:"jquery.pjax.js - $.ajax()"}):!1)&&f.start();f&&f.test("++","success"===p,[c,a.location.href,n,p],"ajax success");m(a.callbacks.ajax.success,null,[b,a.parameter,q,p,n],a.callbacks.async)},
error:function(d,e,h){n=d;p=e;x=h;(f=a.validate?a.validate.clone({name:"jquery.pjax.js - $.ajax()"}):!1)&&f.start();f&&f.test("++","abort"===p,[c,a.location.href,n,p,x],"ajax error");m(a.callbacks.ajax.error,null,[b,a.parameter,n,p,x],a.callbacks.async)},complete:function(d,e){n=d;p=e;f&&f.test("++",1,0,"ajax complete");m(a.callbacks.ajax.complete,null,[b,a.parameter,n,p],a.callbacks.async);if(x){if(g&&g.reject(),a.fallback&&"abort"!==p)return"function"===typeof a.fallback?m(a.fallback,null,[b,c]):
Q(b,f)}else g&&g.resolve()||h(a,b);f&&f.end()}});k.url=c.replace(/([^#]+)(#[^\s]*)?$/,"$1"+(a.server.query?(c.match(/\?/)?"&":"?")+encodeURIComponent(a.server.query)+"=1":"")+"$2");f&&f.test("++",1,0,"ajax");t&&a.log.speed.name.push("request");t&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire);e.when&&e.when(g.promise(),R(a.wait)).done(function(){h(a,b)});e.ajax(k);!1!==m(a.callbacks.after,null,[b,a.parameter],a.callbacks.async)&&(f&&f.test("++",1,0,"end"),f&&f.end())}}function m(a,b,c,e){return"function"===
typeof a?e?setTimeout(function(){a.apply(b,c)},0):a.apply(b,c):a}function O(a){var w=b.destination.hash.slice(1);return!(a||!w)&&e("#"+(w?w:", [name~="+w+"]")).first().each(function(){isFinite(e(this).offset().top)&&l.scrollTo(e(l).scrollLeft(),parseInt(Number(e(this).offset().top)))}).length}function R(a){var b=e.Deferred();if(!a)return b.resolve();setTimeout(function(){b.resolve()},a);return b.promise()}function Q(a,b){b&&b.test("++",1,0,"fallback()");b&&b.end();"click"===a.type.toLowerCase()?l.location.href=
a.currentTarget.href:"submit"===a.type.toLowerCase()?a.target.submit():"popstate"===a.type.toLowerCase()&&l.location.reload()}function M(a,b){var c=[];a.replace(b,function(a,b){c.push(b)});return c}function C(a,b){var c,e,d,h,f,l,k,g,q,n,p,r;c=a.scope;d=a.location.pathname+a.location.search+a.location.hash;h=a.destination.pathname+a.destination.search+a.destination.hash;"/"!==a.location.pathname.charAt(0)&&(d="/"+d,h="/"+h);if(d===h)return!0;e=d.replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");
l=(b||d).replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");if(b){if(-1===b.indexOf("*"))return v;f=[];for(var u=l.length;u--;)"*"===l[u]&&f.unshift(e[u])}for(u=l.length+1;u--;)if(n=p=r=!1,e=l.slice(0,u).join("/").replace(/\/([?#])/g,"$1"),(e="/"+e+("/"===(b||d).charAt(e.length+1)?"/":""))&&e in c){if(!c[e]||!c[e].length)return!1;for(var y=0;k=c[e][y];y++)if(b||"rewrite"!==k||"function"!==typeof c.rewrite)if("inherit"===k)n=!0;else{k=(g="^"===k.charAt(0))?k.slice(1):k;k=(q="*"===k.charAt(0))?k.slice(1):
k;if(b&&-1!==k.indexOf("/*/"))for(var z=0,B=f.length;z<B;z++)k=k.replace("/*/","/"+f[z]+"/");if(!(!g&&p||(q?d.search(k):d.indexOf(k)))){if(g)return!1;p=!0}if(!(!g&&r||(q?h.search(k):h.indexOf(k)))){if(g)return!1;r=!0}}else if(k=C(a,m(c.rewrite,null,[a.destination.href])))p=r=!0;else if(!1===k)return!1;if(p&&r)return!0;if(!n)return v}}function J(a,e,c,l,d){var h=b.history;b.hashquery||(a=a.replace(/#.*/,""));switch(!0){case 1===arguments.length:for(var f=0,g;g=h.order[f];f++)a===g&&(h.order.splice(f,
1),h.size-=h.data[g].size,h.data[g]=null,delete h.data[g]);break;case "object"===typeof d:h.order.unshift(a);for(f=1;g=h.order[f];f++)a===g&&h.order.splice(f,1);if(h.data[a])break;if(h.size>h.config.size){f=b.history;g=f.order.length;for(var k;k=f.order[--g];)if(g>=f.config.length||b.timestamp>f.data[k].timestamp+f.config.expire)f.order.splice(g,1),f.size-=f.data[k].size,delete f.data[k]}c=parseInt(c||1.8*d.responseText.length);h.size=h.size||0;h.size+=c;h.data[a]={XMLHttpRequest:d,textStatus:l,title:e,
size:c,timestamp:(new Date).getTime()};break;default:return!1}return!0}function z(a){var e=b.history;b.hashquery||(a=a.replace(/#.*/,""));e.data[a]&&b.timestamp>e.data[a].timestamp+e.config.expire&&J(a);return e.data[a]}function U(){var a=b.database,e=b.gns,c,g=Math.floor(b.timestamp/864E5);if(!a||!e)return!1;a=a.open(e,g-g%7+3);a.onupgradeneeded=function(){for(var a=this.result,b=0,f=a.objectStoreNames.length;b<f;b++)a.deleteObjectStore(a.objectStoreNames[b]);c=a.createObjectStore(e,{keyPath:"id",
autoIncrement:!1});c.createIndex("date","date",{unique:!1})};a.onsuccess=function(){b.database=this.result;P();L(b.location.href,y.title)};a.onerror=function(){b.database=!1}}function P(){var a="object"===typeof b.database&&b.database.transaction(b.gns,"readwrite").objectStore(b.gns);a&&a.put({id:"current",title:b.hashquery?l.location.href:l.location.href.replace(/#.*/,"")})}function L(a,g){var c="object"===typeof b.database&&b.database.transaction(b.gns,"readwrite").objectStore(b.gns);c&&(b.hashquery||
(a=a.replace(/#.*/,"")),g?c.get(a).onsuccess=function(){c.put(e.extend(!0,{},this.result||{},{id:a,title:g,date:b.timestamp}));V(c)}:c.get(a).onsuccess=function(){this.result&&this.result.title&&(y.title=this.result.title)})}function I(a,g){var c="object"===typeof b.database&&b.database.transaction(b.gns,"readwrite").objectStore(b.gns),m=b.location.href,d=y.title,h=arguments.length;b.scroll.record&&c&&(b.hashquery||(m=m.replace(/#.*/,"")),c.get("current").onsuccess=function(){this.result&&this.result.title&&
m===this.result.title&&(h?c.get(m).onsuccess=function(){c.put(e.extend(!0,{},this.result||{},{title:d,scrollX:parseInt(Number(a)),scrollY:parseInt(Number(g))}))}:c.get(m).onsuccess=function(){this.result&&isFinite(this.result.scrollX)&&isFinite(this.result.scrollY)&&l.scrollTo(parseInt(Number(this.result.scrollX)),parseInt(Number(this.result.scrollY)))})})}function V(a){var e=l.IDBKeyRange||l.webkitIDBKeyRange||l.mozIDBKeyRange||l.msIDBKeyRange;a.count().onsuccess=function(){1E3<this.result&&(a.index("date").openCursor(e.upperBound(b.timestamp-
2592E5)).onsuccess=function(){var b=this.result;b?(b["delete"](b.value.id),b["continue"]()):a.count().onsuccess=function(){1E3<this.result&&a.clear()}})}}function S(a,b,c){var g;switch(!0){case b===v:g=e.falsandtru[a];break;case c===v:g=a in e.falsandtru?e.falsandtru[a][b]:v;break;case c!==v:e.falsandtru[a]instanceof Object||(e.falsandtru[a]={}),e.falsandtru[a][b]instanceof Object&&c instanceof Object?e.extend(!0,e.falsandtru[a][b],c):e.falsandtru[a][b]=c,g=e.falsandtru[a][b]}return g}if("function"===
typeof this)return arguments.callee.apply(e(y),arguments);var g=window.validator instanceof Object?window.validator:!1;(g=g?validator.clone({name:"jquery.pjax.js",base:!0,timeout:{limit:r&&r.ajax&&r.ajax.timeout?r.ajax.timeout+g.timeout.limit:g.timeout.limit}}):!1)&&g.start();g&&g.test("++",1,r,"pjax()");g&&g.test("++",1,0,"initialize");var b=e.extend(!0,{},{id:0,gns:"pjax",ns:null,area:null,link:'a:not([target])[href^="/"]',form:null,scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{},contentType:"text/html",
cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,length:9,size:1048576,expire:18E5},callback:function(){},callbacks:{ajax:{},update:{url:{},title:{},content:{},css:{},script:{},cache:{load:{},save:{}},rendering:{},verify:{}},async:!1},parameter:null,load:{css:!1,script:!1,execute:!0,reload:"",sync:!0,ajax:{dataType:"script"},rewrite:null},interval:300,wait:0,scroll:{delay:500,suspend:-100},fix:{location:!0,history:!0,scroll:!0,reset:!1},hashquery:!1,fallback:!0,database:!0,server:{},speedcheck:!1},
r),u=[b.gns];g&&g.test("++",1,b,"overwrite");e.extend(!0,b,{nss:{pjax:u.join("."),click:["click"].concat(u.join(":")).join("."),submit:["submit"].concat(u.join(":")).join("."),popstate:["popstate"].concat(u.join(":")).join("."),scroll:["scroll"].concat(u.join(":")).join("."),data:u.join(":"),class4html:u.join("-"),requestHeader:["X",u[0].replace(/^\w/,function(a){return a.toUpperCase()})].join("-"),array:u},location:e("<a/>",{href:encodeURI(decodeURI(l.location.href))})[0],destination:e("<a/>",{href:encodeURI(decodeURI(l.location.href))})[0],
hashclick:!1,fix:/Mobile(\/\w+)? Safari/i.test(l.navigator.userAgent)?{}:{location:!1,reset:!1},contentType:b.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),scroll:{record:!0,queue:[]},database:b.database?l.indexedDB||l.webkitIndexedDB||l.mozIndexedDB||l.msIndexedDB||null:!1,server:{query:b.server.query?b.server.query:b.gns},log:{script:{},speed:{}},history:{config:b.cache,order:[],data:{},size:0},timestamp:(new Date).getTime(),disable:!1,landing:encodeURI(decodeURI(l.location.href)),retry:!0,
xhr:null,speed:{now:function(){return(new Date).getTime()}},options:r,validate:g});b.id=1;B[b.id]=b;F=E=void 0;G={on:function(){b.disable=!1},off:function(){b.disable=!0},click:function(a,b){b=b||{};return(b.href=a)?e("<a/>",b).one("click",1,E).click():!1},submit:function(a,b,c){var g=y.createDocumentFragment(),d;switch(!0){case "object"===typeof a:b=e(a);break;case !!c:b=b||{};b.action=a;a=c instanceof Array&&Array||c instanceof Object&&Object||v;for(var h in c){d=c[h];switch(a){case Object:d=e("<textarea/>",
{name:h}).val(d);break;case Array:d.attr=d.attr||{};d.attr.name=d.name;d=e(d.tag.indexOf("<")?"<"+d.tag+"/>":d.tag,d.attr||{}).val(d.value);break;default:continue}g.appendChild(d[0])}b=e("<form/>",b).append(g);break;default:return!1}b.one("submit",1,F).submit();return!0},setCache:J,getCache:z,clearCache:function(){for(var a=b.history,e=a.order.length,c;c=a.order[--e];)a.order.splice(e,1),a.size-=a.data[c].size,delete a.data[c];return!0}};e.extend(!0,e.pjax,G);g&&g.test("++",1,0,"register");"pushState"in
l.history&&l.history.pushState&&b.area&&(b.link||b.form)&&(e.falsandtru||(e.fn.falsandtru=S,e.falsandtru=S),e.falsandtru("share","history",b.history),b.history=e.falsandtru("share","history"),T(this));g&&g.end();return G}})(jQuery);

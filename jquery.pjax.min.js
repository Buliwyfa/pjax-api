/*
 * 
 * pjax
 * 
 * ---
 * @Copyright(c) 2012, falsandtru
 * @license MIT  http://opensource.org/licenses/mit-license.php  http://sourceforge.jp/projects/opensource/wiki/licenses%2FMIT_license
 * @version 1.21.4
 * @updated 2013/10/26
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(e){var A,y,f=window,E=document,z=void 0,w=["settings"],F;e.fn.pjax=e.pjax=function(v){function S(a){T();b.load.script&&e("script").each(function(){var a=this,a="function"===typeof b.load.rewrite?h(b.load.rewrite,null,[a.cloneNode()])||a:a,a=a.src;!a||a in b.log.script||(b.log.script[a]=!0)});b.link&&e(a).undelegate(b.link,b.nss.click).delegate(b.link,b.nss.click,b.id,A=function(a){a.timeStamp=(new Date).getTime();var c=w[1];if(c.disable)return!1;c.destination.href=this.href;if(!(c.disable||
f.location.protocol!==this.protocol||f.location.host!==this.host||1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)){if(c.location.href===c.destination.href)return!1;if(!h(c.hashquery,null,[a,this.href])&&c.location.pathname+c.location.search===c.destination.pathname+c.destination.search)return c.hashclick=!0;var b,g;b=this.href;c.area=h(c.options.area,null,[a,b]);c.hashclick=!1;c.timestamp=a.timeStamp;c.landing&&(c.landing=!1);if(e(c.area).length&&(!c.scope||J(c)))return c.cache[a.type.toLowerCase()]&&
(g=B(b)),G(c,a,b,!0,g),!1}});b.form&&e(a).undelegate(b.form,b.nss.submit).delegate(b.form,b.nss.submit,b.id,y=function(a){a.timeStamp=(new Date).getTime();var c=w[1];if(c.disable)return!1;c.destination.href=this.action;if(!(1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)){var b,g;b=this.action+("GET"===a.target.method.toUpperCase()?"?"+e(a.target).serialize():"");c.area=h(c.options.area,null,[a,b]);c.hashclick=!1;c.timestamp=a.timeStamp;c.landing&&(c.landing=!1);if(e(c.area).length&&(!c.scope||
J(c)))return c.cache[a.type.toLowerCase()]&&c.cache[a.target.method.toLowerCase()]&&(g=B(b)),G(c,a,b,!0,g),!1}});e(f).unbind(b.nss.popstate).bind(b.nss.popstate,b.id,function(a){a.timeStamp=(new Date).getTime();var c=w[1];if(c.disable)return!1;c.destination.href=f.location.href;if(c.location.href===c.destination.href)return!1;var b,g;if(!h(c.hashquery,null,[a,b])&&c.location.pathname+c.location.search===f.location.pathname+f.location.search)return c.hashclick=c.hashclick&&!!N()&&!1;b=f.location.href;
c.area=h(c.options.area,null,[a,b]);c.hashclick=!1;c.timestamp=a.timeStamp;if(c.landing){if(c.landing===f.location.href){c.landing=!1;return}c.landing=!1}if(e(c.area).length)return c.database&&c.fix.history&&K(b),c.cache[a.type.toLowerCase()]&&(g=B(b)),G(c,a,b,!1,g),!1});b.database&&b.fix.scroll&&e(f).unbind(b.nss.scroll).bind(b.nss.scroll,b.id,function(a,c){var b=w[1],g,h=arguments.callee;if(b.scroll.delay){for(;g=b.scroll.queue.shift();)clearTimeout(g);g=setTimeout(function(){for(;g=b.scroll.queue.shift();)clearTimeout(g);
L(e(f).scrollLeft(),e(f).scrollTop())},b.scroll.delay);b.scroll.queue.push(g)}else L(e(f).scrollLeft(),e(f).scrollTop());b.scroll.suspend&&!c&&(e(this).unbind(b.nss.scroll),setTimeout(function(){b.database&&b.fix.scroll&&e(f).bind(b.nss.scroll,b.id,h).trigger(b.nss.scroll,[!0])},b.scroll.suspend))})}function G(a,b,c,u,g){function m(a,b,q){var d=a.validate?a.validate.clone({name:"jquery.pjax.js - update()"}):!1;d&&d.start();d&&(d.scope=function(a){return eval(a)});d&&d.test("1",1,0,"update()");d&&
d.test("++",1,0,"start");a:if(a.speedcheck&&a.log.speed.name.push("update"),a.speedcheck&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire),!1!==h(a.callbacks.update.before,null,[b,a.parameter,p,r,k],a.callbacks.async)){var g=window,f=document,m,l,s;try{d&&d.test("++",1,0,"try");d&&d.test("++",1,q?0:[a.contentType,k.getResponseHeader("Content-Type")],"content-type");if(!q&&-1===k.getResponseHeader("Content-Type").toLowerCase().search(a.contentType))throw Error("throw: content-type mismatch");
d&&d.test("++",q?"'usable'":"'unusable'",0,"cache");q&&!1!==h(a.callbacks.update.cache.load.before,null,[b,a.parameter,q],a.callbacks.async)&&(k=q.XMLHttpRequest,p=k.responseText,r=q.textStatus,m=q.title,l=q.css,s=q.script,h(a.callbacks.update.cache.load.after,null,[b,a.parameter,q],a.callbacks.async));d&&d.test("++",1,0,"initialize");var n=e(p),C=!!m||0<n.filter("title").length,v=a.area.replace(/(\((.*?(\(.*?\).*?)?)*?\)|\S)(,|$)/g,function(a,b,c,d,e){return b+(e?"|":"")}).split(/\s*\|(?!=)\s*/),
D;m=m||C?n.filter("title").text():e("<span/>").html(M(p,/<title>([^<]*?)<\/title>/i).join()).text();if(!e(a.area).length||!n.find(a.area).add(n.filter(a.area)).length)throw Error("throw: area length mismatch");d&&d.test("++",1,c,"url");!1!==h(a.callbacks.update.url.before,null,[b,a.parameter,p,r,k],a.callbacks.async)&&(u&&c!==g.location.href&&g.history.pushState(h(a.state,null,[b,c]),g.opera||-1!==g.navigator.userAgent.toLowerCase().indexOf("opera")?m:f.title,c),a.location.href=c,u&&a.fix.location&&
/Mobile(\/\w+)? Safari/i.test(g.navigator.userAgent)&&(F.off(),g.history.back(),g.history.forward(),F.on()),h(a.callbacks.update.url.after,null,[b,a.parameter,p,r,k],a.callbacks.async));d&&d.test("++",1,m,"title");!1!==h(a.callbacks.update.title.before,null,[b,a.parameter,p,r,k],a.callbacks.async)&&(f.title=m,a.database&&a.fix.history&&K(c,m),h(a.callbacks.update.title.after,null,[b,a.parameter,p,r,k],a.callbacks.async));a.database&&O();d&&d.test("++",1,0,"scroll");var w=function(c){var d;switch(b.type.toLowerCase()){case "click":case "submit":d=
c&&"function"===typeof a.scrollLeft?h(a.scrollLeft,null,[b]):a.scrollLeft;d=0<=d?d:0;d=null===d?e(g).scrollLeft():parseInt(Number(d));c=c&&"function"===typeof a.scrollTop?h(a.scrollTop,null,[b]):a.scrollTop;c=0<=c?c:0;c=null===c?e(g).scrollTop():parseInt(Number(c));e(g).scrollTop()===c&&e(g).scrollLeft()===d||g.scrollTo(d,c);break;case "popstate":a.database&&a.fix.scroll&&L()}};w(!1);d&&d.test("++",1,v,"content");if(!1!==h(a.callbacks.update.content.before,null,[b,a.parameter,p,r,k],a.callbacks.async)){e(a.area).children("."+
a.nss.class4html+"-check").remove();D=e("<div/>",{"class":a.nss.class4html+"-check",style:"display: block !important; visibility: hidden !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; position: absolute !important; top: -9999px !important; left: -9999px !important; font-size: 12px !important; text-indent: 0 !important;"}).text("pjax");for(var f=0,I;I=v[f++];)e(I).html(n.find(I).add(n.filter(I)).contents()).append(D.clone());
e(document).trigger(a.gns+".DOMContentLoaded");h(a.callbacks.update.content.after,null,[b,a.parameter,p,r,k],a.callbacks.async)}d&&d.test("++",1,0,"css");var E=function(){var d=a.validate?a.validate.clone({name:"jquery.pjax.js - load_css()"}):!1;d&&d.start();d&&(d.scope=function(a){return eval(a)});if(!1!==h(a.callbacks.update.css.before,null,[b,a.parameter,p,r,k],a.callbacks.async)){var g;g=(q=q||B(c))&&!q.css;l=l?l:C?n.find('link[rel~="stylesheet"], style').add(n.filter('link[rel~="stylesheet"], style')).get():
e(M(p,/(<link[^>]*?rel=.[^"\']*?stylesheet[^>]*?>|<style[^>]*?>(?:.|[\n\r])*?<\/style>)/gim));q&&q.css&&l&&l.length!==q.css.length&&(g=!0);g&&(q.css=C?l:[]);e('link[rel~="stylesheet"], style').filter(function(){return e.data(this,a.nss.data,!0)});for(var m=0,f,s=e('link[rel~="stylesheet"]'),u=e("style"),x;f=l[m];m++){x=!1;f=C?f:e(f)[0];f="function"===typeof a.load.rewrite?h(a.load.rewrite,null,[f.cloneNode()])||f:f;g&&!C&&(q.css[m]=f);switch(f.tagName.toLowerCase()){case "link":if(s.filter(function(){if(x||
this.href!==f.href)return!1;x=!0;e.removeData(this,a.nss.data);return!0}).length)continue;break;case "style":if(u.filter(function(){if(x||!e.data(this,a.nss.data)||this.innerHTML!==f.innerHTML)return!1;x=!0;e.removeData(this,a.nss.data);return!0}).length)continue}e("head").append(f);f=null}e('link[rel~="stylesheet"], style').filter(function(){return e.data(this,a.nss.data)}).remove();e(document).trigger(a.gns+".ready");!1!==h(a.callbacks.update.css.after,null,[b,a.parameter,p,r,k],a.callbacks.async)&&
(a.speedcheck&&a.log.speed.name.push("css"),a.speedcheck&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire))}d&&d.end()};a.load.css&&setTimeout(function(){E()},a.load.async||0);!a.load.css&&e(document).trigger(a.gns+".ready");d&&d.test("++",1,0,"script");var A=function(d){var g=a.validate?a.validate.clone({name:"jquery.pjax.js - load_script()"}):!1;g&&g.start();g&&(g.scope=function(a){return eval(a)});if(!1!==h(a.callbacks.update.script.before,null,[b,a.parameter,p,r,k],a.callbacks.async)){var f,
m=[];f=(q=q||B(c))&&!q.script;s=s?s:C?n.find("script").add(n.filter("script")).get():M(p,/(?:[^\'\"]|^\s*?)(<script[^>]*?>(?:.|[\n\r])*?<\/script>)(?:[^\'\"]|\s*?$)/gim);q&&q.script&&s&&s.length!==q.script.length&&(f=!0);f&&(q.script=C?s:[]);for(var l=0,u,x,t;u=s[l];l++)u=C?u:e(u)[0],u="function"===typeof a.load.rewrite?h(a.load.rewrite,null,[u.cloneNode()])||u:u,f&&!C&&(q.script[l]=u),x=u.src,t=u.defer,"sync"===d&&!t||"async"===d&&t||x&&x in a.log.script||(x&&(a.log.script[x]=!0),e.when?(t=e.Deferred(),
x?e.ajax(e.extend(!0,{},a.ajax,{url:x,textStatus:"script",async:!1,global:!1,complete:t.resolve})):t.resolve(a.load.execute?u:z),m.push(t)):e("head").append(u),u=null);e.when&&m.length&&e.when.apply(null,m).always(function(){for(var a=0,b;b=arguments[a];a++)"object"===typeof b&&!b.src&&(!b.type||-1<b.type.toLowerCase().indexOf("text/javascript"))&&eval((b.text||b.textContent||b.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/"))});!1!==h(a.callbacks.update.script.after,null,[b,a.parameter,
p,r,k],a.callbacks.async)&&(a.speedcheck&&"async"===d&&a.log.speed.name.push("script"),a.speedcheck&&"async"===d&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire))}g&&g.end()};a.load.script&&setTimeout(function(){A("async")},a.load.async||0);a.load.script&&!a.load.sync&&setTimeout(function(){A("sync")},a.load.async||0);d&&d.test("++",1,0,"rendering");D=e(a.area).children("."+a.nss.class4html+"-check");setTimeout(function(){D.filter(function(){return this.clientWidth||e(this).is(":hidden")}).length===
D.length?!1!==h(a.callbacks.update.rendering.before,null,[b,a.parameter],a.callbacks.async)&&(D.remove(),a.load.script&&a.load.sync&&setTimeout(function(){A("sync")},a.load.async||0),N("popstate"===b.type.toLowerCase())||w(!0),e(window).trigger(a.gns+".load"),!1!==h(a.callbacks.update.rendering.after,null,[b,a.parameter],a.callbacks.async)&&(a.speedcheck&&a.log.speed.name.push("rendering"),a.speedcheck&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire),a.speedcheck&&console.log(a.log.speed.time),
a.speedcheck&&console.log(a.log.speed.name))):D.length&&setTimeout(function(){arguments.callee()},a.interval)},0);d&&d.test("++",1,0,"cache");q||!(a.cache.click||a.cache.submit||a.cache.popstate)||"submit"===b.type.toLowerCase()&&!a.cache[b.target.method.toLowerCase()]||!1===h(a.callbacks.update.cache.save.before,null,[b,a.parameter,q],a.callbacks.async)||(H(c,m,t,r,k),h(a.callbacks.update.cache.save.after,null,[b,a.parameter,q],a.callbacks.async));d&&d.test("++",1,0,"verify");if(!1!==h(a.callbacks.update.verify.before,
null,[b,a.parameter],a.callbacks.async)){if(c===g.location.href)a.retry=!0;else if(a.retry)a.retry=!1,G(a,b,g.location.href,!1,a.cache[b.type.toLowerCase()]&&B(g.location.href));else throw Error("throw: location mismatch");h(a.callbacks.update.verify.after,null,[b,a.parameter],a.callbacks.async)}if(!1===h(a.callbacks.update.success,null,[b,a.parameter,p,r,k],a.callbacks.async))break a;if(!1===h(a.callbacks.update.complete,null,[b,a.parameter,p,r,k],a.callbacks.async))break a;if(!1===h(a.callback,
null,[b,a.parameter,p,r,k],a.callbacks.async))break a;d&&d.test("++",1,0,"success")}catch(y){d&&d.test("++",!String(y.message).indexOf("throw:"),y,"catch");d&&d.test("++",!("throw: location mismatch"===y.message&&c!==g.location.href),[c,g.location.href],"!( err.message === 'throw: location mismatch' && url !== win.location.href )");q&&H(c);if(!1===h(a.callbacks.update.error,null,[b,a.parameter,p,r,k],a.callbacks.async))break a;if(!1===h(a.callbacks.update.complete,null,[b,a.parameter,p,r,k],a.callbacks.async))break a;
d&&d.test("++",1,[c,g.location.href],"error");if(a.fallback)return"function"===typeof a.fallback?h(a.fallback,null,[b,c]):P(b,d)}!1!==h(a.callbacks.update.after,null,[b,a.parameter,p,r,k],a.callbacks.async)&&(a.speedcheck&&a.log.speed.name.push("ready"),a.speedcheck&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire),d&&d.test("++",1,0,"end"),d&&d.end())}}var d=a.validate?a.validate.clone({name:"jquery.pjax.js - drive()"}):!1;d&&d.start();d&&(d.scope=function(a){return eval(a)});d&&d.test("++",
1,[c,b.type],"drive()");a.speedcheck&&(a.log.speed.fire=a.timestamp);a.speedcheck&&(a.log.speed.time=[]);a.speedcheck&&(a.log.speed.name=[]);a.speedcheck&&a.log.speed.name.push("fire");a.speedcheck&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire);d&&d.test("++",1,0,"start");if(!1!==h(a.callbacks.before,null,[b,a.parameter],a.callbacks.async))if(g)d&&d.test("++",1,0,"update"),e.when?e.when(Q(a.wait)).done(function(){m(a,b,g)}):m(a,b,g),d&&d.test("++",1,0,"end"),d&&d.end();else{d&&d.test("++",
1,0,"initialize");var s,l,p,k,r,n,t;s={};switch(b.type.toLowerCase()){case "click":d&&d.test("++",1,0,"event click");s.type="GET";break;case "submit":d&&d.test("++",1,b.target.method,"event submit");s.type=b.target.method.toUpperCase();"POST"===s.type&&(s.data=e(b.target).serializeArray());break;case "popstate":d&&d.test("++",1,0,"event popstate"),s.type="GET"}l=e.when?e.Deferred():null;d&&d.test("++",1,0,"setting");e.extend(!0,s,a.ajax,{xhr:a.callbacks.ajax.xhr?function(){k=h(a.callbacks.ajax.xhr,
null,[b,a.parameter],a.callbacks.async);return k=k instanceof Object&&k instanceof f.XMLHttpRequest?k:k||e.ajaxSettings.xhr()}:z,beforeSend:function(c,d){k=c;a.xhr&&4>a.xhr.readyState&&a.xhr.abort();a.xhr=k;k.setRequestHeader(a.nss.requestHeader,"true");k.setRequestHeader(a.nss.requestHeader+"-Area",a.area);k.setRequestHeader(a.nss.requestHeader+"-CSS",a.load.css);k.setRequestHeader(a.nss.requestHeader+"-Script",a.load.script);h(a.callbacks.ajax.beforeSend,null,[b,a.parameter,k,d],a.callbacks.async)},
dataFilter:a.callbacks.ajax.dataFilter?function(c,d){p=c;return h(a.callbacks.ajax.dataFilter,null,[b,a.parameter,p,d],a.callbacks.async)||p}:z,success:function(c,d,e){p=c;r=d;k=e;h(a.callbacks.ajax.success,null,[b,a.parameter,p,r,k],a.callbacks.async);l&&l.resolve()||m(a,b)},error:function(d,e,g){k=d;r=e;n=g;(d=a.validate?a.validate.clone({name:"jquery.pjax.js - drive()"}):!1)&&d.start();d&&d.test("++",1,[c,f.location.href,k,r,n],"ajax error");h(a.callbacks.ajax.error,null,[b,a.parameter,k,r,n],
a.callbacks.async);l&&l.resolve();if(a.fallback&&"abort"!==r)return"function"===typeof a.fallback?h(a.fallback,null,[b,c]):P(b,d);d&&d.end()},complete:a.callbacks.ajax.complete?function(c,d){k=c;r=d;h(a.callbacks.ajax.complete,null,[b,a.parameter,k,r],a.callbacks.async)}:z});s.url=c.replace(/([^#]+)(#[^\s]*)?$/,"$1"+(a.server.query?(c.match(/\?/)?"&":"?")+encodeURIComponent(a.server.query)+"=1":"")+"$2");d&&d.test("++",1,0,"ajax");a.speedcheck&&a.log.speed.name.push("request");a.speedcheck&&a.log.speed.time.push(a.speed.now()-
a.log.speed.fire);e.ajax(s);e.when?e.when(l,Q(a.wait)).done(function(){m(a,b)}):e.ajax(s);!1!==h(a.callbacks.after,null,[b,a.parameter],a.callbacks.async)&&(d&&d.test("++",1,0,"end"),d&&d.end())}}function h(a,b,c,e){return"function"===typeof a?e?setTimeout(function(){a.apply(b,c)},0):a.apply(b,c):a}function N(a){return!a&&e(f.location.hash+", [name="+f.location.hash+"]").first().each(function(){isFinite(e(this).offset().top)&&f.scrollTo(e(f).scrollLeft(),parseInt(Number(e(this).offset().top)))}).length}
function Q(a){var b=e.Deferred();if(!a)return b.resolve();setTimeout(function(){b.resolve()},a);return b.promise()}function P(a,b){b&&b.test("++",1,0,"fallback()");b&&b.end();"click"===a.type.toLowerCase()?f.location.href=a.currentTarget.href:"submit"===a.type.toLowerCase()?a.target.submit():"popstate"===a.type.toLowerCase()&&f.location.reload()}function M(a,b){var c=[];a.replace(b,function(a,b){c.push(b)});return c}function J(a,b){var c,e,g,f,d,s,l,p,k,n,t,v;c=a.scope;g=a.location.pathname+a.location.search+
a.location.hash;f=a.destination.pathname+a.destination.search+a.destination.hash;if(g===f)return!0;e=g.replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");s=(b||g).replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");if(b){if(-1===b.indexOf("*"))return z;d=[];for(var w=s.length;w--;)"*"===s[w]&&d.unshift(e[w])}for(w=s.length+1;w--;)if(n=t=v=!1,e=s.slice(0,w).join("/").replace(/\/([?#])/g,"$1"),(e="/"+e+("/"===(b||g).charAt(e.length+1)?"/":""))&&e in c){if(!c[e]||!c[e].length)return!1;for(var A=
0;l=c[e][A];A++)if(b||"rewrite"!==l||"function"!==typeof c.rewrite)if("inherit"===l)n=!0;else{l=(p="^"===l.charAt(0))?l.slice(1):l;l=(k="*"===l.charAt(0))?l.slice(1):l;if(b&&-1!==l.indexOf("/*/"))for(var y=0,B=d.length;y<B;y++)l=l.replace("/*/","/"+d[y]+"/");if(!(!p&&t||(k?g.search(l):g.indexOf(l)))){if(p)return!1;t=!0}if(!(!p&&v||(k?f.search(l):f.indexOf(l)))){if(p)return!1;v=!0}}else if(l=J(a,h(c.rewrite,null,[a.destination.href])))t=v=!0;else if(!1===l)return!1;if(t&&v)return!0;if(!n)return z}}
function H(a,e,c,f,g){var m=b.history;a=b.hashquery?a:a.replace(/#.*/,"");switch(!0){case 1===arguments.length:for(var d=0,h;h=m.order[d];d++)a===h&&(m.order.splice(d,1),m.size-=m.data[h].size,m.data[h]=null,delete m.data[h]);break;case g instanceof Object:m.order.unshift(a);for(d=1;h=m.order[d];d++)a===h&&m.order.splice(d,1);if(m.data[a])break;if(m.size>m.config.size){d=b.history;h=d.order.length;for(var l;l=d.order[--h];)if(h>=d.config.length||b.timestamp>d.data[l].timestamp+d.config.expire)d.order.splice(h,
1),d.size-=d.data[l].size,delete d.data[l]}c=parseInt(c||1.8*g.responseText.length);m.size=m.size||0;m.size+=c;m.data[a]={XMLHttpRequest:g,textStatus:f,title:e,size:c,timestamp:(new Date).getTime()};break;default:return!1}return!0}function B(a){var e=b.history;a=b.hashquery?a:a.replace(/#.*/,"");e.data[a]&&b.timestamp>e.data[a].timestamp+e.config.expire&&H(a);return e.data[a]}function T(){var a=b.database,e=b.gns,c,h=Math.floor(b.timestamp/864E5);if(!a||!e)return!1;a=a.open(e,h-h%7+2);a.onupgradeneeded=
function(){for(var a=this.result,b=0,d=a.objectStoreNames.length;b<d;b++)a.deleteObjectStore(a.objectStoreNames[b]);c=a.createObjectStore(e,{keyPath:"id",autoIncrement:!1});c.createIndex("date","date",{unique:!1})};a.onsuccess=function(){b.database=this.result;O();K(f.location.href,E.title)};a.onerror=function(){b.database=!1}}function O(){var a="object"===typeof b.database&&b.database.transaction(b.gns,"readwrite").objectStore(b.gns);a&&a.put({id:"current",title:f.location.href})}function K(a,f){var c=
"object"===typeof b.database&&b.database.transaction(b.gns,"readwrite").objectStore(b.gns);c&&(f?c.get(a).onsuccess=function(){c.put(e.extend(!0,{},this.result||{},{id:a,title:f,date:b.timestamp}));U(c)}:c.get(a).onsuccess=function(){this.result&&this.result.title&&(E.title=this.result.title)})}function L(a,h){var c="object"===typeof b.database&&b.database.transaction(b.gns,"readwrite").objectStore(b.gns),n=f.location.href,g=E.title,m=arguments.length;c&&(c.get("current").onsuccess=function(){this.result&&
this.result.title&&n===this.result.title&&(m?c.get(n).onsuccess=function(){c.put(e.extend(!0,{},this.result||{},{title:g,scrollX:parseInt(Number(a)),scrollY:parseInt(Number(h))}))}:c.get(n).onsuccess=function(){this.result&&isFinite(this.result.scrollX)&&isFinite(this.result.scrollY)&&f.scrollTo(parseInt(Number(this.result.scrollX)),parseInt(Number(this.result.scrollY)))})})}function U(a){var e=f.IDBKeyRange||f.webkitIDBKeyRange||f.mozIDBKeyRange||f.msIDBKeyRange;a.count().onsuccess=function(){1E3<
this.result&&(a.index("date").openCursor(e.upperBound(b.timestamp-2592E5)).onsuccess=function(){var b=this.result;b?(b["delete"](b.value.id),b["continue"]()):a.count().onsuccess=function(){1E3<this.result&&a.clear()}})}}function R(a,b,c){var f;switch(!0){case b===z:f=e.falsandtru[a];break;case c===z:f=a in e.falsandtru?e.falsandtru[a][b]:z;break;case c!==z:e.falsandtru[a]instanceof Object||(e.falsandtru[a]={}),e.falsandtru[a][b]instanceof Object&&c instanceof Object?e.extend(!0,e.falsandtru[a][b],
c):e.falsandtru[a][b]=c,f=e.falsandtru[a][b]}return f}if("function"===typeof this)return arguments.callee.apply(e(E),arguments);var n=window.validator instanceof Object?window.validator:!1;(n=n?validator.clone({name:"jquery.pjax.js",base:!0,timeout:{limit:v&&v.ajax&&v.ajax.timeout?v.ajax.timeout+n.timeout.limit:n.timeout.limit}}):!1)&&n.start();n&&n.test("++",1,v,"pjax()");n&&n.test("++",1,0,"initialize");var b=e.extend(!0,{},{id:0,gns:"pjax",ns:null,area:null,link:'a:not([target])[href^="/"]',form:null,
scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{},contentType:"text/html",cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,length:9,size:1048576,expire:18E5},callback:function(){},callbacks:{ajax:{},update:{url:{},title:{},content:{},css:{},script:{},cache:{load:{},save:{}},rendering:{},verify:{}},async:!1},parameter:null,load:{css:!1,script:!1,execute:!0,sync:!0,async:0,rewrite:null},interval:300,wait:0,scroll:{delay:500,suspend:-100},fix:{location:!0,history:!0,scroll:!0},hashquery:!1,
fallback:!0,database:!0,server:{},speedcheck:!1},v),t=[b.gns];n&&n.test("++",1,b,"overwrite");e.extend(!0,b,{nss:{pjax:t.join("."),click:["click"].concat(t.join(":")).join("."),submit:["submit"].concat(t.join(":")).join("."),popstate:["popstate"].concat(t.join(":")).join("."),scroll:["scroll"].concat(t.join(":")).join("."),data:t.join(":"),class4html:t.join("-"),requestHeader:["X",t[0].replace(/^\w/,function(a){return a.toUpperCase()})].join("-"),array:t},location:e("<a/>",{href:f.location.href})[0],
destination:e("<a/>",{href:f.location.href})[0],hashclick:!1,contentType:b.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),scroll:{queue:[]},database:b.database?f.indexedDB||f.webkitIndexedDB||f.mozIndexedDB||f.msIndexedDB||null:!1,server:{query:b.server.query?b.server.query:b.gns},log:{script:{},speed:{}},history:{config:b.cache,order:[],data:{},size:0},timestamp:(new Date).getTime(),disable:!1,landing:f.location.href,retry:!0,xhr:null,speed:{now:function(){return(new Date).getTime()}},options:v,
validate:n});b.id=1;w[b.id]=b;y=A=void 0;F={on:function(){b.disable=!1},off:function(){b.disable=!0},click:function(a,b){b=b||{};b.href=a;e("<a/>",b).one("click",1,A).click();return!0},submit:function(a,b,c){var f=document.createDocumentFragment(),g;if(a instanceof Object)b=e(a);else{b=b||{};b.action=a;a=c instanceof Array&&Array||c instanceof Object&&Object||z;for(var h in c){g=c[h];switch(a){case Object:g=e("<textarea/>",{name:h}).val(g);break;case Array:g.attr=g.attr||{};g.attr.name=g.name;g=e(g.tag.indexOf("<")?
"<"+g.tag+"/>":g.tag,g.attr||{}).val(g.value);break;default:continue}f.appendChild(g[0])}b=e("<form/>",b).append(f)}b.one("submit",1,y).submit();return!0},setCache:H,getCache:B,clearCache:function(){for(var a=b.history,e=a.order.length,c;c=a.order[--e];)a.order.splice(e,1),a.size-=a.data[c].size,delete a.data[c];return!0}};e.extend(!0,e.pjax,F);n&&n.test("++",1,0,"register");"pushState"in f.history&&f.history.pushState&&b.area&&(b.link||b.form)&&(e.falsandtru||(e.fn.falsandtru=R,e.falsandtru=R),e.falsandtru("share",
"history",b.history),b.history=e.falsandtru("share","history"),S(this));n&&n.end();return F}})(jQuery);

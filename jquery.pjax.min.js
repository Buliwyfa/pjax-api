/*
 * 
 * pjax
 * 
 * ---
 * @Copyright(c) 2012, falsandtru
 * @license MIT http://opensource.org/licenses/mit-license.php
 * @version 1.31.0
 * @updated 2014/02/10
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(l,n,z,v){function C(a,h,g,m,c,b){var k=this;switch(!0){case "object"===typeof b:k=k instanceof a?k:a(g);k=c.setProperties.call(k,b.ns||"",null);if(!b.area&&!b.scope)return k;break;default:return k=k instanceof a?k:a[c.name],c.setProperties.call(k,null,null)}var e;e=a.extend(!0,{id:0,gns:c.name,ns:null,area:null,link:"a:not([target])",form:null,scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{},contentType:"text/html",cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,length:9,size:1048576,
expire:18E5},callback:function(){},callbacks:{ajax:{},update:{url:{},title:{},content:{},scroll:{},css:{},script:{},cache:{load:{},save:{}},rendering:{},verify:{}},async:!1},parameter:null,load:{css:!1,script:!1,execute:!0,reload:null,reject:null,sync:!0,ajax:{dataType:"script"},rewrite:null},interval:300,wait:0,scroll:{delay:500},fix:{location:!0,history:!0,scroll:!0,reset:!1},hashquery:!1,fallback:!0,database:!0,server:{},location:a("<a/>",{href:c.canonicalizeURL(h.location.href)})[0],destination:a("<a/>",
{href:c.canonicalizeURL(h.location.href)})[0]},b);e.nss={array:[c.name].concat(e.ns&&String(e.ns).split(".")||[])};a.extend(!0,e=e.scope&&c.scope(e)||e,{nss:{name:e.ns||"",event:e.nss.array.join("."),alias:c.alias?[c.alias].concat(e.nss.array.slice(1)).join("."):!1,click:["click"].concat(e.nss.array.join(":")).join("."),submit:["submit"].concat(e.nss.array.join(":")).join("."),popstate:["popstate"].concat(e.nss.array.join(":")).join("."),scroll:["scroll"].concat(e.nss.array.join(":")).join("."),data:e.nss.array.join("-"),
class4html:e.nss.array.join("-"),requestHeader:["X",e.nss.array[0].replace(/^\w/,function(e){return e.toUpperCase()})].join("-")},areaback:e.area,fix:/Mobile(\/\w+)? Safari/i.test(h.navigator.userAgent)?{}:{location:!1,reset:!1},contentType:e.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),scroll:{record:!0,queue:[]},database:e.database?h.indexedDB||h.webkitIndexedDB||h.mozIndexedDB||h.msIndexedDB||null:!1,server:{query:e.server.query?e.server.query:e.gns},log:{script:{},speed:{}},history:{config:e.cache,
order:[],data:{},size:0},timestamp:(new Date).getTime(),disable:!1,landing:c.canonicalizeURL(h.location.href),retry:!0,xhr:null,speed:{now:function(){return(new Date).getTime()}},option:b});c.check()&&c.registrate.call(k,a,h,g,m,c,e);return k}var d;d={name:"pjax",alias:"",ids:[],settings:[0],count:0,parseHTML:null,setAlias:function(a){d.alias="string"===typeof a?a:d.alias;d.name===d.alias||l[d.alias]||(l[d.name][d.alias]=l.fn[d.name],l.fn[d.alias]=l[d.alias]=l.fn[d.name])},setProperties:function(a,
h){var g=this;if(g instanceof l||g===l[d.name])g=g instanceof l&&h!==v?g.add(h):g,g[d.name]=l[d.name],g.on=function(){d.settings[1].disable=!1},g.off=function(){d.settings[1].disable=!0},g.click=function(a,c){var b;switch(!0){case "object"===typeof a:b=l(a);break;case !!a:c=c||{};c.href=a;b=l("<a/>",c);break;default:return this}return b.first().one("click",1,d.click).click()},g.submit=function(a,c,b){var k=z.createDocumentFragment(),e;switch(!0){case "object"===typeof a:c=l(a);break;case !!b:c=c||
{};c.action=a;a=b instanceof Array&&Array||b instanceof Object&&Object||v;for(var h in b){e=b[h];switch(a){case Object:e=l("<textarea/>",{name:h}).val(e);break;case Array:e.attr=e.attr||{};e.attr.name=e.name;e=l(e.tag.indexOf("<")?"<"+e.tag+"/>":e.tag,e.attr||{}).val(e.value);break;default:continue}k.appendChild(e[0])}c=l("<form/>",c).append(k);break;default:return this}return c.first().one("submit",1,d.submit).submit()},g.setCache=function(a,c,b,k){var e=d.settings[1];if(!e||!e.history)return!1;
var h,g,u;h=e.history;a=a||d.canonicalizeURL(n.location.href);e.hashquery||(a=a.replace(/#.*/,""));switch(arguments.length){case 0:case 1:return arguments.callee.call(this,a,d.trim(z.documentElement.outerHTML));default:h.order.unshift(a);for(g=1;u=h.order[g];g++)a===u&&h.order.splice(g,1);h.size>h.config.size&&l[d.name].cleanCache();l[d.name].getCache(a);g=l("<span/>").html(d.find((c||"")+((k||{}).responseText||"")+"<title></title>",/<title[^>]*?>([^<]*?)<\/title>/i).shift()).text();u=parseInt(1.8*
((c||"").length+((k||{}).responseText||"").length)||1048576,10);h.size=h.size||0;h.size+=u;h.data[a]=l.extend(!0,h.data[a]||{},{XMLHttpRequest:k,textStatus:b,data:c,size:u,timestamp:(new Date).getTime()});e.database&&e.fix.history&&d.dbTitle(a,g)}return h.data[a]},g.getCache=function(a){var c=d.settings[1];if(!c||!c.history)return!1;var b;b=c.history;a=a||d.canonicalizeURL(n.location.href);c.hashquery||(a=a.replace(/#.*/,""));b.data[a]&&c.timestamp>b.data[a].timestamp+b.config.expire&&l[d.name].removeCache(a);
return b.data[a]},g.removeCache=function(a){var c=d.settings[1];if(!c||!c.history)return!1;var b;b=c.history;a=a||d.canonicalizeURL(n.location.href);c.hashquery||(a=a.replace(/#.*/,""));for(var c=0,k;k=b.order[c];c++)a===k&&(b.order.splice(c,1),b.size-=b.data[k].size,b.data[k]=null,delete b.data[k]);return!0},g.clearCache=function(){var a=d.settings[1];if(!a||!a.history)return!1;for(var a=a.history,c=a.order.length,b;b=a.order[--c];)a.order.splice(c,1),a.size-=a.data[b].size,delete a.data[b];return!0},
g.cleanCache=function(){var a=d.settings[1];if(!a||!a.history)return!1;for(var c=a.history,b=c.order.length,k;k=c.order[--b];)if(b>=c.config.length||k in c.data&&a.timestamp>c.data[k].timestamp+c.config.expire)c.order.splice(b,1),c.size-=c.data[k].size,delete c.data[k];return!0};return g},check:function(){return d.supportPushState()},supportPushState:function(){return"pushState"in n.history&&n.history.pushState},registrate:function(a,h,g,m,c,b){b.id=1;c.ids.push(b.id);c.settings[b.id]=b;c.share();
c.database();b.load.script&&a("script").each(function(){var k=this,e,k="function"===typeof b.load.rewrite?c.fire(b.load.rewrite,null,[k.cloneNode()])||k:k;(e=k.src)&&e in b.log.script||!e||b.load.reload&&a(k).is(b.load.reload)||(b.log.script[e]=!0)});a(this).undelegate(b.link,b.nss.click).delegate(b.link,b.nss.click,b.id,c.click=function(b){b.timeStamp=(new Date).getTime();var e=c.settings[1];if(e.disable||b.isDefaultPrevented())return b.preventDefault();e.location.href=c.canonicalizeURL(h.location.href);
e.destination.href=c.canonicalizeURL(this.href);if(e.location.protocol===e.destination.protocol&&e.location.host===e.destination.host&&!(1<b.which||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey)){if(!c.fire(e.hashquery,null,[b,e.parameter,e.destination.href,e.location.href])&&e.location.pathname+e.location.search===e.destination.pathname+e.destination.search)return e.destination.hash&&c.hashscroll(),b.preventDefault();var d,p;d=e.destination.href;e.area=c.fire(e.areaback,null,[b,e.parameter,e.destination.href,
e.location.href]);e.timestamp=b.timeStamp;e.landing&&(e.landing=!1);if(a(e.area).length&&(!e.scope||c.scope(e)))return e.cache[b.type.toLowerCase()]&&(p=a[c.name].getCache(d)),c.drive(a,h,g,m,c,e,b,d,!0,p),b.preventDefault()}});a(this).undelegate(b.form,b.nss.submit).delegate(b.form,b.nss.submit,b.id,c.submit=function(b){b.timeStamp=(new Date).getTime();var e=c.settings[1];if(e.disable||b.isDefaultPrevented())return b.preventDefault();e.location.href=c.canonicalizeURL(h.location.href);e.destination.href=
c.canonicalizeURL(this.action);if(!(1<b.which||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey)){var d,p;d=e.destination.href=c.canonicalizeURL(e.destination.href.replace(/[?#].*/,"")+("GET"===b.target.method.toUpperCase()?"?"+a(b.target).serialize():""));e.area=c.fire(e.areaback,null,[b,e.parameter,e.destination.href,e.location.href]);e.timestamp=b.timeStamp;e.landing&&(e.landing=!1);if(a(e.area).length&&(!e.scope||c.scope(e)))return e.cache[b.type.toLowerCase()]&&e.cache[b.target.method.toLowerCase()]&&
(p=a[c.name].getCache(d)),c.drive(a,h,g,m,c,e,b,d,!0,p),b.preventDefault()}});a(h).unbind(b.nss.popstate).bind(b.nss.popstate,b.id,c.popstate=function(b){b.timeStamp=(new Date).getTime();var e=c.settings[1];if(e.disable||b.isDefaultPrevented())return b.preventDefault();e.destination.href=c.canonicalizeURL(h.location.href);if(e.location.href===e.destination.href)return b.preventDefault();var d,p;if(!c.fire(e.hashquery,null,[b,e.parameter,e.destination.href,e.location.href])&&e.location.pathname+e.location.search===
e.destination.pathname+e.destination.search)return b.preventDefault();d=e.destination.href;e.area=c.fire(e.areaback,null,[b,e.parameter,e.destination.href,e.location.href]);e.timestamp=b.timeStamp;if(e.landing){if(e.landing.href===d){e.landing=!1;return}e.landing=!1}if(a(e.area).length)return e.database&&e.fix.history&&c.dbTitle(d),e.cache[b.type.toLowerCase()]&&(p=a[c.name].getCache(d)),c.drive(a,h,g,m,c,e,b,d,!1,p),b.preventDefault()});b.database&&b.fix.scroll&&a(h).unbind(b.nss.scroll).bind(b.nss.scroll,
b.id,function(b,e){var g=c.settings[1],d;if(g.scroll.delay){for(;d=g.scroll.queue.shift();)clearTimeout(d);d=setTimeout(function(){for(;d=g.scroll.queue.shift();)clearTimeout(d);c.dbScroll(a(h).scrollLeft(),a(h).scrollTop())},g.scroll.delay);g.scroll.queue.push(d)}else c.dbScroll(a(h).scrollLeft(),a(h).scrollTop())});(function(){function b(e){try{var c=e&&e("<body><noscript>DOMParser</noscript></body>");return"DOMParser"===a(c).find("noscript").text()}catch(h){}}var e=h.DOMParser;c.parseHTML=function(a){return e&&
e.prototype&&(new e).parseFromString(a,"text/html")};b(c.parseHTML)||(c.parseHTML=function(a){var b;g.implementation&&g.implementation.createHTMLDocument&&(b=g.implementation.createHTMLDocument(""),"object"===typeof b.activeElement&&(b.open(),b.write(a),b.close()));return b},b(c.parseHTML)||(c.parseHTML=!1))})()},drive:function(a,h,g,d,c,b,k,e,l,p){function u(a,b,c,h,d,f,g,k){a:{var m=f.callbacks.update;if(!1!==d.fire(m.before,null,[g,f.parameter,s,t,q,k],f.callbacks.async)){var p,n,u;try{if(!k&&
-1===(q.getResponseHeader("Content-Type")||"").toLowerCase().search(f.contentType))throw Error("throw: content-type mismatch");k&&!1!==d.fire(m.cache.load.before,null,[g,f.parameter,k],f.callbacks.async)&&(q=k.XMLHttpRequest||q,s=q.responseText,t=k.textStatus||t,n=k.css,u=k.script,d.fire(m.cache.load.after,null,[g,f.parameter,k],f.callbacks.async));var w,r,x,v,y,z,B;z=f.area.split(/\s*,\s*/);r=(q.responseText||"").replace(/<noscript[^>]*>(?:.|[\n\r])*?<\/noscript>/gim,function(a){return a.replace(/<script(?:.|[\n\r])*?<\/script>/gim,
"")});if(k&&k.data){v=k.data;x=a(d.parseHTML&&v&&d.parseHTML(v)||v);r=r.replace(/<title[^>]*?>([^<]*?)<\/title>/i,function(a){return d.find(v,/(<title[^>]*?>[^<]*?<\/title>)/i).shift()||a});w=a(d.parseHTML&&r&&d.parseHTML(r)||r);for(var G=0,A,H;A=z[G++];)w.find(A).add(y?"":w.filter(A)).html(x.find(A).add(y?"":x.filter(A)).contents())}else w=a(d.parseHTML&&r&&d.parseHTML(r)||r);switch(!0){case !!w.find("html")[0]:y=1;w.find("noscript").each(function(){this.children.length&&a(this).text(this.innerHTML)});
break;case !!w.filter("title")[0]:y=0;break;default:y=!1}switch(y){case 1:p=w.find("title").text();break;case 0:p=w.filter("title").text();break;case !1:p=a("<span/>").html(d.find(r,/<title[^>]*?>([^<]*?)<\/title>/i).shift()).text()}if(!a(f.area).length||!w.find(f.area).add(y?"":w.filter(f.area)).length)throw Error("throw: area length mismatch");a(b).trigger(f.gns+".unload");!1!==d.fire(m.url.before,null,[g,f.parameter,s,t,q],f.callbacks.async)&&(l&&e!==f.location.href&&b.history.pushState(d.fire(f.state,
null,[g,f.parameter,f.destination.href,f.location.href]),b.opera||-1!==b.navigator.userAgent.toLowerCase().indexOf("opera")?p:c.title,e),f.location.href=e,l&&f.fix.location&&(a[d.name].off(),b.history.back(),b.history.forward(),a[d.name].on()),d.fire(m.url.after,null,[g,f.parameter,s,t,q],f.callbacks.async));!1!==d.fire(m.title.before,null,[g,f.parameter,s,t,q],f.callbacks.async)&&(c.title=p,f.database&&f.fix.history&&d.dbTitle(e,p),d.fire(m.title.after,null,[g,f.parameter,s,t,q],f.callbacks.async));
f.database&&d.dbCurrent();if(!1!==d.fire(m.content.before,null,[g,f.parameter,s,t,q],f.callbacks.async)){a(f.area).children("."+f.nss.class4html+"-check").remove();B=a("<div/>",{"class":f.nss.class4html+"-check",style:"background: none !important; display: block !important; visibility: hidden !important; position: absolute !important; top: 0 !important; left: 0 !important; z-index: -9999 !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; font-size: 12px !important; text-indent: 0 !important;"}).text(f.gns);
for(G=0;A=z[G++];)H=w.find(A).add(y?"":w.filter(A)).clone().find("script").remove().end().contents(),a(A).html(H).append(B.clone());B=a(f.area).children("."+f.nss.class4html+"-check");a(c).trigger(f.gns+".DOMContentLoaded");d.fire(m.content.after,null,[g,f.parameter,s,t,q],f.callbacks.async)}var I=function(e){if(!1!==d.fire(m.scroll.before,null,[g,f.parameter],f.callbacks.async)){var c,h;switch(g.type.toLowerCase()){case "click":case "submit":c=e&&"function"===typeof f.scrollLeft?d.fire(f.scrollLeft,
null,[g,f.parameter,f.destination.href,f.location.href]):f.scrollLeft;c=0<=c?c:0;c=!1===c||null===c?a(b).scrollLeft():parseInt(Number(c),10);h=e&&"function"===typeof f.scrollTop?d.fire(f.scrollTop,null,[g,f.parameter,f.destination.href,f.location.href]):f.scrollTop;h=0<=h?h:0;h=!1===h||null===h?a(b).scrollTop():parseInt(Number(h),10);a(b).scrollTop()===h&&a(b).scrollLeft()===c||b.scrollTo(c,h);e&&f.database&&f.fix.scroll&&d.dbScroll(c,h);break;case "popstate":e&&f.database&&f.fix.scroll&&d.dbScroll()}d.fire(m.scroll.after,
null,[g,f.parameter],f.callbacks.async)}};I(!1);k&&k.XMLHttpRequest||!f.cache.click&&!f.cache.submit&&!f.cache.popstate||"submit"===g.type.toLowerCase()&&!f.cache[g.target.method.toLowerCase()]||!1===d.fire(m.cache.save.before,null,[g,f.parameter,k],f.callbacks.async)||(a[d.name].setCache(e,v||null,t,q),k=a[d.name].getCache(e),d.fire(m.cache.save.after,null,[g,f.parameter,k],f.callbacks.async));var J=function(b){if(!1!==d.fire(m.rendering.before,null,[g,f.parameter],f.callbacks.async)){var c=0;(function(){B.filter(function(){return this.clientWidth||
this.clientHeight||a(this).is(":hidden")}).length===B.length||100<=c?C(b):B.length&&(c++,setTimeout(arguments.callee,f.interval))})()}},C=function(c){B.remove();f.scroll.record=!0;d.hashscroll("popstate"===g.type.toLowerCase())||I(!0);a(b).trigger(f.gns+".load");d.fire(c);d.fire(m.rendering.after,null,[g,f.parameter],f.callbacks.async)};switch(y){case 1:case 0:w.find("noscript").remove();break;case !1:r=r.replace(/^(?:.|[\n\r])*<body[^>]*>.*[\n\r]*.*[\n\r]*/im,function(a){return a.replace(/\x3c!--\[(?:.|[\n\r])*?<!\[endif\]--\x3e/gim,
"")}),r=r.replace(/<noscript(?:.|[\n\r])*?<\/noscript>/gim,"")}var F=function(c){if(f.load.script&&!1!==d.fire(m.script.before,null,[g,f.parameter,s,t,q],f.callbacks.async)){var h;h=(k=a[d.name].getCache(e))&&!k.script;switch(u||y){case 1:case 0:u=w.find("script").add(y?"":w.filter("script")).clone().get();break;case !1:u=d.find(r,/(?:[^\'\"]|^\s*?)(<script[^>]*?>(?:.|[\n\r])*?<\/script>)(?:[^\'\"]|\s*?$)/gim)}k&&k.script&&u&&u.length!==k.script.length&&(h=!0);h&&(k.script=[]);for(var l=0,p,n;p=u[l];l++)if(p=
"object"===typeof p?h?a(p.outerHTML)[0]:p:a(p)[0],p="function"===typeof f.load.rewrite?d.fire(f.load.rewrite,null,[p.cloneNode()])||p:p,h&&(k.script[l]=p),a(p).is(c)&&(n=d.trim(p.src||""),!(n&&n in f.log.script||f.load.reject&&a(p).is(f.load.reject)))){!n||f.load.reload&&a(p).is(f.load.reload)||(f.log.script[n]=!0);try{n?a.ajax(a.extend(!0,{},f.ajax,f.load.ajax,{url:p.src,async:!!p.async,global:!1})):"object"!==typeof p||p.type&&-1===p.type.toLowerCase().indexOf("text/javascript")||b.eval.call(b,
(p.text||p.textContent||p.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/"))}catch(D){break}}d.fire(m.script.after,null,[g,f.parameter,s,t,q],f.callbacks.async)}};if(!1!==d.fire(m.verify.before,null,[g,f.parameter],f.callbacks.async)){if(e===d.canonicalizeURL(b.location.href))f.retry=!0;else if(f.retry)f.retry=!1,d.drive(a,b,c,h,d,f,g,b.location.href,!1,f.cache[g.type.toLowerCase()]&&a[d.name].getCache(d.canonicalizeURL(b.location.href)));else throw Error("throw: location mismatch");d.fire(m.verify.after,
null,[g,f.parameter],f.callbacks.async)}(function(){if(f.load.css&&!1!==d.fire(m.css.before,null,[g,f.parameter,s,t,q],f.callbacks.async)){var b,c=[],h=a('link[rel~="stylesheet"], style');b=(k=a[d.name].getCache(e))&&!k.css;switch(n||y){case 1:case 0:n=w.find('link[rel~="stylesheet"], style').add(y?"":w.filter('link[rel~="stylesheet"], style')).clone().get();break;case !1:n=d.find(r,/(<link[^>]*?rel=.[^"\']*?stylesheet[^>]*?>|<style[^>]*?>(?:.|[\n\r])*?<\/style>)/gim)}k&&k.css&&n&&n.length!==k.css.length&&
(b=!0);b&&(k.css=[]);for(var p=0,l,u;l=n[p];p++){l="object"===typeof l?b?a(l.outerHTML)[0]:l:a(l)[0];l="function"===typeof f.load.rewrite?d.fire(f.load.rewrite,null,[l.cloneNode()])||l:l;b&&(k.css[p]=l);u=d.trim(l.href||l.innerHTML||"");for(var D=0,v;v=h[D];D++)if(!c.length&&d.trim(v.href||v.innerHTML||"")===u){h=h.not(v);l=null;break}else if(!D&&c.length)break;l&&c.push(l)}h.remove();a("head").append(c);d.fire(m.css.after,null,[g,f.parameter,s,t,q],f.callbacks.async)}})();a(c).trigger(f.gns+".ready");
a(b).bind(f.gns+".rendering",function(b){a(b.target).unbind(b.type+".rendering",arguments.callee);F(":not([defer]), :not([src])");f.load.sync?J(function(){F("[src][defer]")}):(J(),F("[src][defer]"))}).trigger(f.gns+".rendering");if(!1===d.fire(m.success,null,[g,f.parameter,s,t,q],f.callbacks.async))break a;if(!1===d.fire(m.complete,null,[g,f.parameter,s,t,q],f.callbacks.async))break a;if(!1===d.fire(f.callback,null,[g,f.parameter,s,t,q],f.callbacks.async))break a}catch(L){k&&a[d.name].removeCache(e);
if(!1===d.fire(m.error,null,[g,f.parameter,s,t,q],f.callbacks.async))break a;if(!1===d.fire(m.complete,null,[g,f.parameter,s,t,q],f.callbacks.async))break a;if(f.fallback)return"function"===typeof f.fallback?d.fire(f.fallback,null,[g,f.parameter,f.destination.href,f.location.href]):d.fallback(g)}d.fire(m.after,null,[g,f.parameter,s,t,q],f.callbacks.async)}}}b.scroll.record=!1;b.fix.reset&&/click|submit/.test(k.type.toLowerCase())&&h.scrollTo(a(h).scrollLeft(),0);if(!1!==c.fire(b.callbacks.before,
null,[k,b.parameter],b.callbacks.async))if(p&&p.XMLHttpRequest)a.when?a.when(c.wait(c.fire(b.wait,null,[k,b.parameter,b.destination.href,b.location.href]))).done(function(){u(a,h,g,d,c,b,k,p)}):u(a,h,g,d,c,b,k,p);else{var r,n,s,q,t,x;r={};switch(k.type.toLowerCase()){case "click":r.type="GET";break;case "submit":r.type=k.target.method.toUpperCase();"POST"===r.type&&(r.data=a(k.target).serializeArray());break;case "popstate":r.type="GET"}n=a.when?a.Deferred():null;a.extend(!0,r,b.ajax,{xhr:b.callbacks.ajax.xhr?
function(){q=c.fire(b.callbacks.ajax.xhr,null,[k,b.parameter],b.callbacks.async);return q="object"===typeof q&&q||a.ajaxSettings.xhr()}:d,beforeSend:function(a,e){q=a;b.xhr&&4>b.xhr.readyState&&b.xhr.abort();b.xhr=q;q.setRequestHeader(b.nss.requestHeader,"true");q.setRequestHeader(b.nss.requestHeader+"-Area",b.area);q.setRequestHeader(b.nss.requestHeader+"-CSS",b.load.css);q.setRequestHeader(b.nss.requestHeader+"-Script",b.load.script);c.fire(b.callbacks.ajax.beforeSend,null,[k,b.parameter,q,e],b.callbacks.async)},
dataFilter:b.callbacks.ajax.dataFilter?function(a,e){s=a;return c.fire(b.callbacks.ajax.dataFilter,null,[k,b.parameter,s,e],b.callbacks.async)||s}:d,success:function(a,e,d){s=a;t=e;q=d;c.fire(b.callbacks.ajax.success,null,[k,b.parameter,s,t,q],b.callbacks.async)},error:function(a,e,d){q=a;t=e;x=d;c.fire(b.callbacks.ajax.error,null,[k,b.parameter,q,t,x],b.callbacks.async)},complete:function(e,l){q=e;t=l;c.fire(b.callbacks.ajax.complete,null,[k,b.parameter,q,t],b.callbacks.async);if(x){if(n&&n.reject(),
b.fallback&&"abort"!==t)return"function"===typeof b.fallback?c.fire(b.fallback,null,[k,b.parameter,b.destination.href,b.location.href]):c.fallback(k)}else n&&n.resolve()||u(a,h,g,d,c,b,k,p)}});r.url=e.replace(/([^#]+)(#[^\s]*)?$/,"$1"+(b.server.query?(e.match(/\?/)?"&":"?")+encodeURIComponent(b.server.query)+"=1":"")+"$2");a.when&&a.when(n.promise(),c.wait(c.fire(b.wait,null,[k,b.parameter,b.destination.href,b.location.href]))).done(function(){u(a,h,g,d,c,b,k,p)});a.ajax(r);c.fire(b.callbacks.after,
null,[k,b.parameter],b.callbacks.async)}},canonicalizeURL:function(a){a=d.trim(a);a=/^https?:/i.test(a)?a:"";a=a.replace(/[<>"{}|\\^\[\]`\s].*/,"");return encodeURI(decodeURI(a))},trim:function(a){if(String.prototype.trim)a=String(a).trim();else if(a=String(a).replace(/^\s+/,""))for(var d=a.length;--d;)if(/\S/.test(a.charAt(d))){a=a.substring(0,d+1);break}return a},fire:function(a,d,g,m){return"function"===typeof a?m?setTimeout(function(){a.apply(d,g)},0):a.apply(d,g):a},hashscroll:function(a){var h=
d.settings[1].destination.hash.slice(1);return!(a||!h)&&l("#"+(h?h:", [name~="+h+"]")).first().each(function(){isFinite(l(this).offset().top)&&n.scrollTo(l(n).scrollLeft(),parseInt(Number(l(this).offset().top),10))}).length},wait:function(a){var d=l.Deferred();if(!a)return d.resolve();setTimeout(function(){d.resolve()},a);return d.promise()},fallback:function(a){switch(a.type.toLowerCase()){case "click":n.location.href=a.currentTarget.href;break;case "submit":a.target.submit();break;case "popstate":n.location.reload()}},
find:function(a,d){var g=[];a.replace(d,function(a,c){g.push(c)});return g},scope:function(a,h){var g,m,c,b,k,e,n,p,u,r,z,s,q,t;g=a.scope;c=a.location.href.replace(/.+?\w(\/[^#?]*).*/,"$1");b=a.destination.href.replace(/.+?\w(\/[^#?]*).*/,"$1");m=c.replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");e=(h||c).replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");if(h){if(-1===h.indexOf("*"))return v;k=[];for(var x=e.length;x--;)"*"===e[x]&&k.unshift(m[x])}for(x=e.length+1;x--;)if(r=z=s=q=v,m=e.slice(0,
x).join("/").replace(/\/([?#])/g,"$1"),(m="/"+m+("/"===(h||c).charAt(m.length+1)?"/":""))&&m in g){if(!g[m]||!g[m].length)return!1;for(var C=0;n=g[m][C];C++)if(!1!==s&&!1!==q)if("rewrite"!==n||"function"!==typeof g.rewrite||h)if("inherit"===n)z=!0;else if("string"===typeof n){n=(p="^"===n.charAt(0))?n.slice(1):n;n=(u="*"===n.charAt(0))?n.slice(1):n;if(h&&-1!==n.indexOf("/*/"))for(var E=0,K=k.length;E<K;E++)n=n.replace("/*/","/"+k[E]+"/");if(!(!p&&s||(u?c.search(n):c.indexOf(n)))){if(p)return!1;s=
!0}if(!(!p&&q||(u?b.search(n):b.indexOf(n)))){if(p)return!1;q=!0}}else"object"===typeof n&&(t=n);else if(r=arguments.callee(a,d.fire(g.rewrite,null,[a.destination.href])))s=q=!0;else if(!1===r)return!1;if(s&&q)return a.option||r?l.extend(!0,{},r||{}):l.extend(!0,{},a,t||{},r||{});if(!z)break}},database:function(a){var h=d.settings[1],g=1,m=h.database,c=h.gns,b,k,e=Math.floor(h.timestamp/864E5);a=a||0;if(!m||!c||!m.open||3<a)return h.database=!1;try{g=parseInt(e-e%7+g,10),b=m.open(c),b.onblocked=function(){},
b.onupgradeneeded=function(){var a=h.database=this.result;try{for(var b=a.objectStoreNames?a.objectStoreNames.length:0;b--;)a.deleteObjectStore(a.objectStoreNames[b]);h.database.createObjectStore(h.gns,{keyPath:"id",autoIncrement:!1}).createIndex("date","date",{unique:!1})}catch(c){}},b.onsuccess=function(){try{var a=this.result;h.database=this.result;k=d.dbStore();k.get("_version").onsuccess=function(){this.result&&g!==this.result.title?(a.close(),m.deleteDatabase(c),h.database=m,d.database()):(d.dbVersion(g),
d.dbCurrent(),d.dbTitle(h.location.href,z.title))}}catch(b){h.database=!1,a.close(),m.deleteDatabase(c)}},b.onerror=function(b){m.deleteDatabase(c);setTimeout(function(){d.database(++a)},1E3)}}catch(l){h.database=!1}},dbStore:function(){var a=d.settings[1];return"object"===typeof a.database&&"function"===typeof a.database.transaction&&a.database.transaction(a.gns,"readwrite").objectStore(a.gns)},dbCurrent:function(){var a=d.settings[1],h=d.dbStore();h&&h.put({id:"_current",title:a.hashquery?n.location.href:
n.location.href.replace(/#.*/,"")})},dbVersion:function(a){var h=d.dbStore();h&&h.put({id:"_version",title:a})},dbTitle:function(a,h){var g=d.settings[1],m=d.dbStore();m&&(g.hashquery||(a=a.replace(/#.*/,"")),h?m.get(a).onsuccess=function(){m.put(l.extend(!0,{},this.result||{},{id:a,title:h,date:g.timestamp}));d.dbClean(m)}:m.get(a).onsuccess=function(){this.result&&this.result.title&&(z.title=this.result.title)})},dbScroll:function(a,h){var g=d.settings[1],m=d.dbStore(),c=g.location.href,b=arguments.length;
g.scroll.record&&m&&(g.hashquery||(c=c.replace(/#.*/,"")),m.get("_current").onsuccess=function(){this.result&&this.result.title&&c===this.result.title&&(b?m.get(c).onsuccess=function(){m.put(l.extend(!0,{},this.result||{},{scrollX:parseInt(Number(a),10),scrollY:parseInt(Number(h),10)}))}:m.get(c).onsuccess=function(){this.result&&isFinite(this.result.scrollX)&&isFinite(this.result.scrollY)&&n.scrollTo(parseInt(Number(this.result.scrollX),10),parseInt(Number(this.result.scrollY),10))})})},dbClean:function(a){var h=
d.settings[1],g=n.IDBKeyRange||n.webkitIDBKeyRange||n.mozIDBKeyRange||n.msIDBKeyRange;a.count().onsuccess=function(){1E3<this.result&&(a.index("date").openCursor(g.upperBound(h.timestamp-2592E5)).onsuccess=function(){var d=this.result;d?(d["delete"](d.value.id),d["continue"]()):a.count().onsuccess=function(){1E3<this.result&&a.clear()}})}},share:function(){var a=d.settings[1];l.falsandtru||(l.fn.falsandtru=l.falsandtru=d.falsandtru);l.falsandtru("share","history",a.history);a.history=l.falsandtru("share",
"history")},falsandtru:function(a,d,g){var m;switch(!0){case d===v:m=l.falsandtru[a];break;case g===v:m=a in l.falsandtru?l.falsandtru[a][d]:v;break;case g!==v:l.falsandtru[a]instanceof Object||(l.falsandtru[a]={}),l.falsandtru[a][d]instanceof Object&&g instanceof Object?l.extend(!0,l.falsandtru[a][d],g):l.falsandtru[a][d]=g,m=l.falsandtru[a][d]}return m}};(function(a,d,g,l,c){a.fn[c.name]=a[c.name]=function(){return C.apply(this,[a,d,g,l,c].concat([].slice.call(arguments)))};c.setProperties.call(a[c.name])}).apply(this,
[].slice.call(arguments).concat([d]))})(jQuery,window,document,void 0);

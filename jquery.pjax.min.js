/*
 * 
 * pjax
 * 
 * ---
 * @Copyright(c) 2012, falsandtru
 * @license MIT http://opensource.org/licenses/mit-license.php
 * @version 1.26.3
 * @updated 2013/12/28
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(e){var H,J,h=window,E=document,w=void 0,z=["settings"],K;e.fn.pjax=e.pjax=function(u){function Y(a){S();b.load.script&&e("script").each(function(){var a=this,c,a="function"===typeof b.load.rewrite?n(b.load.rewrite,null,[a.cloneNode()])||a:a;(c=a.src)&&c in b.log.script||!c||b.load.reload&&e(a).is(b.load.reload)||(b.log.script[c]=!0)});e(a).undelegate(b.link,b.nss.click).delegate(b.link,b.nss.click,b.id,H=function(a){a.timeStamp=(new Date).getTime();var c=z[1];if(c.disable||a.isDefaultPrevented())return a.preventDefault();
c.destination.href=B(this.href);if(c.location.protocol===c.destination.protocol&&c.location.host===c.destination.host&&!(1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)){if(!n(c.hashquery,null,[a,this.href])&&c.location.pathname+c.location.search===c.destination.pathname+c.destination.search)return c.destination.hash&&T(),a.preventDefault();var b,f;b=c.destination.href;c.area=n(c.options.area,null,[a,b]);c.timestamp=a.timeStamp;c.landing&&(c.landing=!1);if(e(c.area).length&&(!c.scope||F(c)))return c.cache[a.type.toLowerCase()]&&
(f=D(b)),L(c,a,b,!0,f),a.preventDefault()}});e(a).undelegate(b.form,b.nss.submit).delegate(b.form,b.nss.submit,b.id,J=function(a){a.timeStamp=(new Date).getTime();var c=z[1];if(c.disable||a.isDefaultPrevented())return a.preventDefault();c.destination.href=B(this.action);if(!(1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)){var b,f;b=c.destination.href=B(c.destination.href.replace(/[?#].*/,"")+("GET"===a.target.method.toUpperCase()?"?"+e(a.target).serialize():""));c.area=n(c.options.area,null,
[a,b]);c.timestamp=a.timeStamp;c.landing&&(c.landing=!1);if(e(c.area).length&&(!c.scope||F(c)))return c.cache[a.type.toLowerCase()]&&c.cache[a.target.method.toLowerCase()]&&(f=D(b)),L(c,a,b,!0,f),a.preventDefault()}});e(h).unbind(b.nss.popstate).bind(b.nss.popstate,b.id,function(a){a.timeStamp=(new Date).getTime();var c=z[1];if(c.disable||a.isDefaultPrevented())return a.preventDefault();c.destination.href=B(h.location.href);if(c.location.href===c.destination.href)return a.preventDefault();var b,f;
if(!n(c.hashquery,null,[a,b])&&c.location.pathname+c.location.search===c.destination.pathname+c.destination.search)return a.preventDefault();b=c.destination.href;c.area=n(c.options.area,null,[a,b]);c.timestamp=a.timeStamp;if(c.landing){if(c.landing.href===b){c.landing=!1;return}c.landing=!1}if(e(c.area).length)return c.database&&c.fix.history&&P(b),c.cache[a.type.toLowerCase()]&&(f=D(b)),L(c,a,b,!1,f),a.preventDefault()});b.database&&b.fix.scroll&&e(h).unbind(b.nss.scroll).bind(b.nss.scroll,b.id,
function(a,c){var b=z[1],f,n=arguments.callee;if(b.scroll.delay){for(;f=b.scroll.queue.shift();)clearTimeout(f);f=setTimeout(function(){for(;f=b.scroll.queue.shift();)clearTimeout(f);M(e(h).scrollLeft(),e(h).scrollTop())},b.scroll.delay);b.scroll.queue.push(f)}else M(e(h).scrollLeft(),e(h).scrollTop());b.scroll.suspend&&!c&&(e(this).unbind(b.nss.scroll),setTimeout(function(){b.database&&b.fix.scroll&&e(h).bind(b.nss.scroll,b.id,n).trigger(b.nss.scroll,[!0])},b.scroll.suspend))})}function L(a,b,c,
A,f){function l(a,b,m){var d=a.validate?a.validate.clone({name:"jquery.pjax.js - update()"}):!1;d&&d.start();d&&(d.scope=function(a){return eval(a)});d&&d.test("1",1,0,"update()");d&&d.test("++",1,0,"start");a:{var f=a.speedcheck;f&&a.log.speed.name.push("update");f&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire);var k=a.callbacks.update;if(!1!==n(k.before,null,[b,a.parameter,s,q,p],a.callbacks.async)){var l=window,h=document,t,g,r;try{d&&d.test("++",1,0,"try");d&&d.test("++",1,m?0:[a.contentType,
p.getResponseHeader("Content-Type")],"content-type");if(!m&&-1===(p.getResponseHeader("Content-Type")||"").toLowerCase().search(a.contentType))throw Error("throw: content-type mismatch");d&&d.test("++",m?"'usable'":"'unusable'",0,"cache");m&&!1!==n(k.cache.load.before,null,[b,a.parameter,m],a.callbacks.async)&&(p=m.XMLHttpRequest,s=p.responseText,q=m.textStatus,t=m.title,g=m.css,r=m.script,n(k.cache.load.after,null,[b,a.parameter,m],a.callbacks.async));d&&d.test("++",1,0,"initialize");var y,w,C,u,
G;w=(p.responseText||"").replace(/<noscript[^>]*>(?:.|[\n\r])*?<\/noscript>/gim,function(a){return a.replace(/<script(?:.|[\n\r])*?<\/script>/gim,"")});y=e(w);u=a.area.split(/\s*,\s*/);switch(!0){case !!y.filter("title")[0]:C=0;break;default:C=!1}switch(C){case 0:t=y.filter("title").text();break;case !1:t=e("<span/>").html(Q(w,/<title>([^<]*?)<\/title>/i).join()).text()}if(!e(a.area).length||!y.find(a.area).add(C?"":y.filter(a.area)).length)throw Error("throw: area length mismatch");d&&d.test("++",
1,c,"url");!1!==n(k.url.before,null,[b,a.parameter,s,q,p],a.callbacks.async)&&(A&&c!==a.location.href&&l.history.pushState(n(a.state,null,[b,c]),l.opera||-1!==l.navigator.userAgent.toLowerCase().indexOf("opera")?t:h.title,c),a.location.href=c,A&&a.fix.location&&(K.off(),l.history.back(),l.history.forward(),K.on()),n(k.url.after,null,[b,a.parameter,s,q,p],a.callbacks.async));d&&d.test("++",1,t,"title");!1!==n(k.title.before,null,[b,a.parameter,s,q,p],a.callbacks.async)&&(h.title=t,a.database&&a.fix.history&&
P(c,t),n(k.title.after,null,[b,a.parameter,s,q,p],a.callbacks.async));a.database&&U();d&&d.test("++",1,0,"scroll");var z=function(c){var d,m;switch(b.type.toLowerCase()){case "click":case "submit":d=c&&"function"===typeof a.scrollLeft?n(a.scrollLeft,null,[b]):a.scrollLeft;d=0<=d?d:0;d=null===d?e(l).scrollLeft():parseInt(Number(d),10);m=c&&"function"===typeof a.scrollTop?n(a.scrollTop,null,[b]):a.scrollTop;m=0<=m?m:0;m=null===m?e(l).scrollTop():parseInt(Number(m),10);e(l).scrollTop()===m&&e(l).scrollLeft()===
d||l.scrollTo(d,m);c&&a.database&&a.fix.scroll&&M(d,m);break;case "popstate":c&&a.database&&a.fix.scroll&&M()}};z(!1);d&&d.test("++",1,u,"content");if(!1!==n(k.content.before,null,[b,a.parameter,s,q,p],a.callbacks.async)){e(a.area).children("."+a.nss.class4html+"-check").remove();G=e("<div/>",{"class":a.nss.class4html+"-check",style:"background: none !important; display: block !important; visibility: hidden !important; position: absolute !important; top: 0 !important; left: 0 !important; z-index: -9999 !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; font-size: 12px !important; text-indent: 0 !important;"}).text(a.gns);
for(var Z=0,v,E;v=u[Z++];)E=y.find(v).add(C?"":y.filter(v)).clone().find("script").remove().end().contents(),e(v).html(E).append(G.clone());G=e(a.area).children("."+a.nss.class4html+"-check");e(h).trigger(a.gns+".DOMContentLoaded");n(k.content.after,null,[b,a.parameter,s,q,p],a.callbacks.async)}f&&a.log.speed.name.push("content");f&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire);d&&d.test("++",1,0,"cache");m||!(a.cache.click||a.cache.submit||a.cache.popstate)||"submit"===b.type.toLowerCase()&&
!a.cache[b.target.method.toLowerCase()]||!1===n(k.cache.save.before,null,[b,a.parameter,m],a.callbacks.async)||(N(c,t,x,q,p),cahce=D(c),n(k.cache.save.after,null,[b,a.parameter,m],a.callbacks.async));d&&d.test("++",1,0,"rendering");var H=function(c){if(!1!==n(k.rendering.before,null,[b,a.parameter],a.callbacks.async)){var d=0;(function(){G.filter(function(){return this.clientWidth||this.clientHeight||e(this).is(":hidden")}).length===G.length||100<=d?J(c):G.length&&(d++,setTimeout(function(){arguments.callee()},
a.interval))})()}},J=function(c){G.remove();c?a.load.sync&&F("[src][defer]"):(a.scroll.record=!0,T("popstate"===b.type.toLowerCase())||z(!0),e(l).trigger(a.gns+".load"),f&&a.log.speed.name.push("rendered"),f&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire));n(k.rendering.after,null,[b,a.parameter],a.callbacks.async)};d&&d.test("++",1,0,"escape");switch(C){case 0:y.find(a.area).remove();y.find("noscript").find('link[rel~="stylesheet"], style').remove();break;case !1:w=w.replace(/^(?:.|[\n\r])*<body[^>]*>.*[\n\r]*.*[\n\r]*/im,
function(a){return a.replace(/\x3c!--\[(?:.|[\n\r])*?<!\[endif\]--\x3e/gim,"")}),w=w.replace(/<noscript(?:.|[\n\r])*?<\/noscript>/gim,"")}d&&d.test("++",1,0,"css");d&&d.test("++",1,0,"script");var F=function(d){var A=a.validate?a.validate.clone({name:"jquery.pjax.js - load_script()"}):!1;A&&A.start();A&&(A.scope=function(a){return eval(a)});if(a.load.script&&!1!==n(k.script.before,null,[b,a.parameter,s,q,p],a.callbacks.async)){var t;t=(m=D(c))&&!m.script;switch(r||C){case 1:case 0:r=y.find("script").add(C?
"":y.filter("script")).clone().get();break;case !1:r=Q(w,/(?:[^\'\"]|^\s*?)(<script[^>]*?>(?:.|[\n\r])*?<\/script>)(?:[^\'\"]|\s*?$)/gim)}m&&m.script&&r&&r.length!==m.script.length&&(t=!0);t&&(m.script=[]);for(var h=0,g,I;g=r[h];h++)g="object"===typeof g?g:e(g)[0],g="function"===typeof a.load.rewrite?n(a.load.rewrite,null,[g.cloneNode()])||g:g,t&&(m.script[h]=g),e(g).is(d)&&(I=O(g.src||""),I&&I in a.log.script||a.load.reject&&e(g).is(a.load.reject)||(!I||a.load.reload&&e(g).is(a.load.reload)||(a.log.script[I]=
!0),I?e.ajax(e.extend(!0,{},a.ajax,a.load.ajax,{url:g.src,async:!!g.async,global:!1})):"object"!==typeof g||g.type&&-1===g.type.toLowerCase().indexOf("text/javascript")||l.eval.call(l,(g.text||g.textContent||g.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/"))));!1!==n(k.script.after,null,[b,a.parameter,s,q,p],a.callbacks.async)&&("[src][defer]"===d&&f&&a.log.speed.name.push("script"),"[src][defer]"===d&&f&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire),"[src][defer]"===d&&f&&console.log(a.log.speed.time),
"[src][defer]"===d&&f&&console.log(a.log.speed.name))}A&&A.end()};d&&d.test("++",1,0,"verify");if(!1!==n(k.verify.before,null,[b,a.parameter],a.callbacks.async)){if(c===B(l.location.href))a.retry=!0;else if(a.retry)a.retry=!1,L(a,b,l.location.href,!1,a.cache[b.type.toLowerCase()]&&D(B(l.location.href)));else throw Error("throw: location mismatch");n(k.verify.after,null,[b,a.parameter],a.callbacks.async)}d&&d.test("++",1,0,"load");(function(){var d=a.validate?a.validate.clone({name:"jquery.pjax.js - load_css()"}):
!1;d&&d.start();d&&(d.scope=function(a){return eval(a)});if(a.load.css&&!1!==n(k.css.before,null,[b,a.parameter,s,q,p],a.callbacks.async)){var l,A=[],t=e('link[rel~="stylesheet"], style').not(e(a.area).find('link[rel~="stylesheet"], style'));l=(m=D(c))&&!m.css;switch(g||C){case 0:g=y.find('link[rel~="stylesheet"], style').add(C?"":y.filter('link[rel~="stylesheet"], style')).clone().get();break;case !1:g=Q(w,/(<link[^>]*?rel=.[^"\']*?stylesheet[^>]*?>|<style[^>]*?>(?:.|[\n\r])*?<\/style>)/gim)}m&&
m.css&&g&&g.length!==m.css.length&&(l=!0);l&&(m.css=[]);for(var h=0,r,u;r=g[h];h++){r="object"===typeof r?r:e(r)[0];r="function"===typeof a.load.rewrite?n(a.load.rewrite,null,[r.cloneNode()])||r:r;l&&(m.css[h]=r);u=O(r.href||r.innerHTML||"");for(var x=0,v;v=t[x];x++)if(O(v.href||v.innerHTML||"")===u){t=t.not(v);r=null;break}r&&A.push(r)}t.remove();e("head").append(A);!1!==n(k.css.after,null,[b,a.parameter,s,q,p],a.callbacks.async)&&(f&&a.log.speed.name.push("css"),f&&a.log.speed.time.push(a.speed.now()-
a.log.speed.fire))}d&&d.end()})();e(h).trigger(a.gns+".ready");e(l).bind(a.gns+".rendering",function(b){e(b.target).unbind(b.type+".rendering",arguments.callee);H();F(":not([defer]), :not([src])");!a.load.sync&&F("[src][defer]");H(!0)}).trigger(a.gns+".rendering");if(!1===n(k.success,null,[b,a.parameter,s,q,p],a.callbacks.async))break a;if(!1===n(k.complete,null,[b,a.parameter,s,q,p],a.callbacks.async))break a;if(!1===n(a.callback,null,[b,a.parameter,s,q,p],a.callbacks.async))break a;d&&d.test("++",
1,0,"success")}catch(R){d&&d.test("++",!String(R.message).indexOf("throw:"),R,"catch");d&&d.test("++",!("throw: location mismatch"===R.message&&c!==l.location.href),[c,l.location.href],"!( err.message === 'throw: location mismatch' && url !== win.location.href )");m&&N(c);if(!1===n(k.error,null,[b,a.parameter,s,q,p],a.callbacks.async))break a;if(!1===n(k.complete,null,[b,a.parameter,s,q,p],a.callbacks.async))break a;d&&d.test("++",1,[c,l.location.href],"error");if(a.fallback)return"function"===typeof a.fallback?
n(a.fallback,null,[b,c]):V(b,d)}!1!==n(k.after,null,[b,a.parameter,s,q,p],a.callbacks.async)&&(f&&a.log.speed.name.push("complete"),f&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire),d&&d.test("++",1,0,"end"),d&&d.end())}}}var d=a.validate?a.validate.clone({name:"jquery.pjax.js - drive()"}):!1;d&&d.start();d&&(d.scope=function(a){return eval(a)});d&&d.test("++",1,[c,b.type],"drive()");var t=a.speedcheck;t&&(a.log.speed.fire=a.timestamp);t&&(a.log.speed.time=[]);t&&(a.log.speed.name=[]);t&&a.log.speed.name.push("fire");
t&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire);d&&d.test("++",1,0,"start");a.scroll.record=!1;a.fix.reset&&/click|submit/.test(b.type.toLowerCase())&&h.scrollTo(e(h).scrollLeft(),0);if(!1!==n(a.callbacks.before,null,[b,a.parameter],a.callbacks.async))if(f)d&&d.test("++",1,0,"update"),e.when?e.when(W(a.wait)).done(function(){l(a,b,f)}):l(a,b,f),d&&d.test("++",1,0,"end"),d&&d.end();else{d&&d.test("++",1,0,"initialize");var k,r,s,p,q,g,x;k={};switch(b.type.toLowerCase()){case "click":d&&d.test("++",
1,0,"event click");k.type="GET";break;case "submit":d&&d.test("++",1,b.target.method,"event submit");k.type=b.target.method.toUpperCase();"POST"===k.type&&(k.data=e(b.target).serializeArray());break;case "popstate":d&&d.test("++",1,0,"event popstate"),k.type="GET"}r=e.when?e.Deferred():null;d&&d.test("++",1,0,"setting");e.extend(!0,k,a.ajax,{xhr:a.callbacks.ajax.xhr?function(){p=n(a.callbacks.ajax.xhr,null,[b,a.parameter],a.callbacks.async);return p="object"===typeof p&&p||e.ajaxSettings.xhr()}:w,
beforeSend:function(c,d){p=c;a.xhr&&4>a.xhr.readyState&&a.xhr.abort();a.xhr=p;p.setRequestHeader(a.nss.requestHeader,"true");p.setRequestHeader(a.nss.requestHeader+"-Area",a.area);p.setRequestHeader(a.nss.requestHeader+"-CSS",a.load.css);p.setRequestHeader(a.nss.requestHeader+"-Script",a.load.script);n(a.callbacks.ajax.beforeSend,null,[b,a.parameter,p,d],a.callbacks.async)},dataFilter:a.callbacks.ajax.dataFilter?function(c,d){s=c;return n(a.callbacks.ajax.dataFilter,null,[b,a.parameter,s,d],a.callbacks.async)||
s}:w,success:function(e,f,k){s=e;q=f;p=k;(d=a.validate?a.validate.clone({name:"jquery.pjax.js - $.ajax()"}):!1)&&d.start();d&&d.test("++","success"===q,[c,a.location.href,p,q],"ajax success");n(a.callbacks.ajax.success,null,[b,a.parameter,s,q,p],a.callbacks.async)},error:function(e,f,k){p=e;q=f;g=k;(d=a.validate?a.validate.clone({name:"jquery.pjax.js - $.ajax()"}):!1)&&d.start();d&&d.test("++","abort"===q,[c,a.location.href,p,q,g],"ajax error");n(a.callbacks.ajax.error,null,[b,a.parameter,p,q,g],
a.callbacks.async)},complete:function(e,f){p=e;q=f;d&&d.test("++",1,0,"ajax complete");n(a.callbacks.ajax.complete,null,[b,a.parameter,p,q],a.callbacks.async);if(g){if(r&&r.reject(),a.fallback&&"abort"!==q)return"function"===typeof a.fallback?n(a.fallback,null,[b,c]):V(b,d)}else r&&r.resolve()||l(a,b);d&&d.end()}});k.url=c.replace(/([^#]+)(#[^\s]*)?$/,"$1"+(a.server.query?(c.match(/\?/)?"&":"?")+encodeURIComponent(a.server.query)+"=1":"")+"$2");d&&d.test("++",1,0,"ajax");t&&a.log.speed.name.push("request");
t&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire);e.when&&e.when(r.promise(),W(a.wait)).done(function(){l(a,b)});e.ajax(k);!1!==n(a.callbacks.after,null,[b,a.parameter],a.callbacks.async)&&(d&&d.test("++",1,0,"end"),d&&d.end())}}function B(a){a=O(a);a=/^https?:/i.test(a)?a:"";a=a.replace(/[<>"{}|\\^\[\]`\s].*/,"");return encodeURI(decodeURI(a))}function O(a){if(String.prototype.trim)a=String(a).trim();else if(a=String(a).replace(/^\s+/,""))for(var b=a.length;--b;)if(/\S/.test(a.charAt(b))){a=
a.substring(0,b+1);break}return a}function n(a,b,c,e){return"function"===typeof a?e?setTimeout(function(){a.apply(b,c)},0):a.apply(b,c):a}function T(a){var m=b.destination.hash.slice(1);return!(a||!m)&&e("#"+(m?m:", [name~="+m+"]")).first().each(function(){isFinite(e(this).offset().top)&&h.scrollTo(e(h).scrollLeft(),parseInt(Number(e(this).offset().top),10))}).length}function W(a){var b=e.Deferred();if(!a)return b.resolve();setTimeout(function(){b.resolve()},a);return b.promise()}function V(a,b){b&&
b.test("++",1,0,"fallback()");b&&b.end();"click"===a.type.toLowerCase()?h.location.href=a.currentTarget.href:"submit"===a.type.toLowerCase()?a.target.submit():"popstate"===a.type.toLowerCase()&&h.location.reload()}function Q(a,b){var c=[];a.replace(b,function(a,b){c.push(b)});return c}function F(a,b){var c,e,f,l,d,g,k,h,s,p,q,v;c=a.scope;f=a.location.pathname+a.location.search+a.location.hash;l=a.destination.pathname+a.destination.search+a.destination.hash;"/"!==a.location.pathname.charAt(0)&&(f=
"/"+f,l="/"+l);e=f.replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");g=(b||f).replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");if(b){if(-1===b.indexOf("*"))return w;d=[];for(var u=g.length;u--;)"*"===g[u]&&d.unshift(e[u])}for(u=g.length+1;u--;)if(p=q=v=!1,e=g.slice(0,u).join("/").replace(/\/([?#])/g,"$1"),(e="/"+e+("/"===(b||f).charAt(e.length+1)?"/":""))&&e in c){if(!c[e]||!c[e].length)return!1;for(var x=0;k=c[e][x];x++)if(b||"rewrite"!==k||"function"!==typeof c.rewrite)if("inherit"===k)p=
!0;else{k=(h="^"===k.charAt(0))?k.slice(1):k;k=(s="*"===k.charAt(0))?k.slice(1):k;if(b&&-1!==k.indexOf("/*/"))for(var z=0,B=d.length;z<B;z++)k=k.replace("/*/","/"+d[z]+"/");if(!(!h&&q||(s?f.search(k):f.indexOf(k)))){if(h)return!1;q=!0}if(!(!h&&v||(s?l.search(k):l.indexOf(k)))){if(h)return!1;v=!0}}else if(k=F(a,n(c.rewrite,null,[a.destination.href])))q=v=!0;else if(!1===k)return!1;if(q&&v)return!0;if(!p)return w}}function N(a,e,c,g,f){var l=b.history;b.hashquery||(a=a.replace(/#.*/,""));switch(!0){case 1===
arguments.length:for(var d=0,h;h=l.order[d];d++)a===h&&(l.order.splice(d,1),l.size-=l.data[h].size,l.data[h]=null,delete l.data[h]);break;case "object"===typeof f:l.order.unshift(a);for(d=1;h=l.order[d];d++)a===h&&l.order.splice(d,1);if(l.data[a])break;if(l.size>l.config.size){d=b.history;h=d.order.length;for(var k;k=d.order[--h];)if(h>=d.config.length||b.timestamp>d.data[k].timestamp+d.config.expire)d.order.splice(h,1),d.size-=d.data[k].size,delete d.data[k]}c=parseInt(c||1.8*(f.responseText||"").length||
1048576,10);l.size=l.size||0;l.size+=c;l.data[a]={XMLHttpRequest:f,textStatus:g,title:e,size:c,timestamp:(new Date).getTime()};break;default:return!1}return!0}function D(a){var e=b.history;b.hashquery||(a=a.replace(/#.*/,""));e.data[a]&&b.timestamp>e.data[a].timestamp+e.config.expire&&N(a);return e.data[a]}function S(){var a=b.validate?b.validate.clone({name:"jquery.pjax.js - database()"}):!1;a&&a.start();a&&(a.scope=function(a){return eval(a)});var e=1,c=b.database,h=b.gns,f,l,d=Math.floor(b.timestamp/
864E5);if(!c||!h)return a&&a.end(),!1;try{e=parseInt(d-d%7+e,10),a&&a.test("++",1,e,"open"),f=c.open(h),a&&a.test("++",1,0,"call"),f.onblocked=function(){a&&a.test("++",0,0,"onblocked()");b.database=!1},f.onupgradeneeded=function(){a&&a.test("++",1,0,"onupgradeneeded()");var c=b.database=this.result;a&&a.test("++",1,0,"deleteObjectStore");for(var d=c.objectStoreNames?c.objectStoreNames.length:0;d--;)c.deleteObjectStore(c.objectStoreNames[d]);a&&a.test("++",1,0,"createObjectStore");b.database.createObjectStore(b.gns,
{keyPath:"id",autoIncrement:!1}).createIndex("date","date",{unique:!1})},f.onsuccess=function(){a&&a.test("++",1,0,"onsuccess()");b.database=this.result;a&&a.test("++",1,0,"store");l=v();a&&a.test("++",1,0,"update");l.get("_version").onsuccess=function(){if(this.result&&e!==this.result.title)b.database.close(),c.deleteDatabase(h),b.database=c,S();else{var a=e,d=v();d&&d.put({id:"_version",title:a});U();P(b.location.href,E.title)}};a&&a.end()},f.onerror=function(d){a&&a.test("++",0,d,"onerror()");
b.database=!1;c.deleteDatabase(h);a&&a.end()}}catch(g){a&&a.test("++",0,g,"error"),b.database=!1,a&&a.end()}}function v(){return"object"===typeof b.database&&"function"===typeof b.database.transaction&&b.database.transaction(b.gns,"readwrite").objectStore(b.gns)}function U(){var a=v();a&&a.put({id:"_current",title:b.hashquery?h.location.href:h.location.href.replace(/#.*/,"")})}function P(a,m){var c=v();c&&(b.hashquery||(a=a.replace(/#.*/,"")),m?c.get(a).onsuccess=function(){c.put(e.extend(!0,{},this.result||
{},{id:a,title:m,date:b.timestamp}));$(c)}:c.get(a).onsuccess=function(){this.result&&this.result.title&&(E.title=this.result.title)})}function M(a,m){var c=v(),g=b.location.href,f=arguments.length;b.scroll.record&&c&&(b.hashquery||(g=g.replace(/#.*/,"")),c.get("_current").onsuccess=function(){this.result&&this.result.title&&g===this.result.title&&(f?c.get(g).onsuccess=function(){c.put(e.extend(!0,{},this.result||{},{scrollX:parseInt(Number(a),10),scrollY:parseInt(Number(m),10)}))}:c.get(g).onsuccess=
function(){this.result&&isFinite(this.result.scrollX)&&isFinite(this.result.scrollY)&&h.scrollTo(parseInt(Number(this.result.scrollX),10),parseInt(Number(this.result.scrollY),10))})})}function $(a){var e=h.IDBKeyRange||h.webkitIDBKeyRange||h.mozIDBKeyRange||h.msIDBKeyRange;a.count().onsuccess=function(){1E3<this.result&&(a.index("date").openCursor(e.upperBound(b.timestamp-2592E5)).onsuccess=function(){var b=this.result;b?(b["delete"](b.value.id),b["continue"]()):a.count().onsuccess=function(){1E3<
this.result&&a.clear()}})}}function X(a,b,c){var g;switch(!0){case b===w:g=e.falsandtru[a];break;case c===w:g=a in e.falsandtru?e.falsandtru[a][b]:w;break;case c!==w:e.falsandtru[a]instanceof Object||(e.falsandtru[a]={}),e.falsandtru[a][b]instanceof Object&&c instanceof Object?e.extend(!0,e.falsandtru[a][b],c):e.falsandtru[a][b]=c,g=e.falsandtru[a][b]}return g}if(!(this instanceof e))return arguments.callee.apply(e(E),arguments);var g=window.validator instanceof Object?window.validator:!1;(g=g?validator.clone({name:"jquery.pjax.js",
base:!0,timeout:{limit:u&&u.ajax&&u.ajax.timeout?u.ajax.timeout+g.timeout.limit:g.timeout.limit}}):!1)&&g.start();g&&g.test("++",1,u,"pjax()");g&&g.test("++",1,0,"initialize");var b=e.extend(!0,{},{id:0,gns:"pjax",ns:null,area:null,link:"a:not([target])",form:null,scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{},contentType:"text/html",cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,length:9,size:1048576,expire:18E5},callback:function(){},callbacks:{ajax:{},update:{url:{},title:{},content:{},
css:{},script:{},cache:{load:{},save:{}},rendering:{},verify:{}},async:!1},parameter:null,load:{css:!1,script:!1,execute:!0,reload:null,reject:null,sync:!0,ajax:{dataType:"script"},rewrite:null},interval:300,wait:0,scroll:{delay:500,suspend:-100},fix:{location:!0,history:!0,scroll:!0,reset:!1},hashquery:!1,fallback:!0,database:!0,server:{},speedcheck:!1},u),x=[b.gns];g&&g.test("++",1,b,"overwrite");e.extend(!0,b,{nss:{pjax:x.join("."),click:["click"].concat(x.join(":")).join("."),submit:["submit"].concat(x.join(":")).join("."),
popstate:["popstate"].concat(x.join(":")).join("."),scroll:["scroll"].concat(x.join(":")).join("."),data:x.join(":"),class4html:x.join("-"),requestHeader:["X",x[0].replace(/^\w/,function(a){return a.toUpperCase()})].join("-"),array:x},location:e("<a/>",{href:B(h.location.href)})[0],destination:e("<a/>")[0],fix:/Mobile(\/\w+)? Safari/i.test(h.navigator.userAgent)?{}:{location:!1,reset:!1},contentType:b.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),scroll:{record:!0,queue:[]},database:b.database?
h.indexedDB||h.webkitIndexedDB||h.mozIndexedDB||h.msIndexedDB||null:!1,server:{query:b.server.query?b.server.query:b.gns},log:{script:{},speed:{}},history:{config:b.cache,order:[],data:{},size:0},timestamp:(new Date).getTime(),disable:!1,landing:B(h.location.href),retry:!0,xhr:null,speed:{now:function(){return(new Date).getTime()}},options:u,validate:g});b.id=1;z[b.id]=b;J=H=void 0;K={on:function(){b.disable=!1},off:function(){b.disable=!0},click:function(a,b){b=b||{};return(b.href=a)?e("<a/>",b).one("click",
1,H).click():!1},submit:function(a,b,c){var g=E.createDocumentFragment(),f;switch(!0){case "object"===typeof a:b=e(a);break;case !!c:b=b||{};b.action=a;a=c instanceof Array&&Array||c instanceof Object&&Object||w;for(var h in c){f=c[h];switch(a){case Object:f=e("<textarea/>",{name:h}).val(f);break;case Array:f.attr=f.attr||{};f.attr.name=f.name;f=e(f.tag.indexOf("<")?"<"+f.tag+"/>":f.tag,f.attr||{}).val(f.value);break;default:continue}g.appendChild(f[0])}b=e("<form/>",b).append(g);break;default:return!1}b.one("submit",
1,J).submit();return!0},setCache:N,getCache:D,clearCache:function(){for(var a=b.history,e=a.order.length,c;c=a.order[--e];)a.order.splice(e,1),a.size-=a.data[c].size,delete a.data[c];return!0}};e.extend(!0,e.pjax,K);g&&g.test("++",1,0,"register");"pushState"in h.history&&h.history.pushState&&b.area&&(b.link||b.form)&&(e.falsandtru||(e.fn.falsandtru=X,e.falsandtru=X),e.falsandtru("share","history",b.history),b.history=e.falsandtru("share","history"),Y(this));g&&g.end();return this}})(jQuery);

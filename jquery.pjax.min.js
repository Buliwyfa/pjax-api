/*
 * 
 * pjax
 * 
 * ---
 * @Copyright(c) 2012, falsandtru
 * @license MIT http://opensource.org/licenses/mit-license.php
 * @version 1.32.1
 * @updated 2014/02/23
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(k,r,z,t){function C(a,c,f,p,d,b){var m=this;switch(!0){case "object"===typeof b:m=m instanceof a?m:a(f);m=d.setProperties.call(m,b.ns||"",null);if(!b.area&&!b.scope)return m;break;default:return m=m instanceof a?m:a[d.name],d.setProperties.call(m,null,null)}var e;e=a.extend(!0,{id:0,gns:d.name,ns:null,area:null,link:"a:not([target])",filter:function(){return/(\/|\.html?|\.php)([#?].*)?$/.test(this.href)},form:null,scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{dataType:"text"},contentType:"text/html",
cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,length:9,size:1048576,expire:18E5},callback:function(){},callbacks:{ajax:{},update:{url:{},title:{},content:{},scroll:{},css:{},script:{},cache:{load:{},save:{}},rendering:{},verify:{}},async:!1},parameter:null,load:{css:!1,script:!1,execute:!0,reload:"",reject:"",sync:!0,ajax:{dataType:"script"},rewrite:null},interval:300,wait:0,scroll:{delay:300},fix:{location:!0,history:!0,scroll:!0,reset:!1},hashquery:!1,fallback:!0,database:!0,server:{query:"pjax=1"}},
b);e.location=a("<a/>",{href:d.canonicalizeURL(c.location.href)})[0];e.destination=a("<a/>",{href:d.canonicalizeURL(c.location.href)})[0];e.nss={array:[d.name].concat(e.ns&&String(e.ns).split(".")||[])};a.extend(!0,e=e.scope&&d.scope(e)||e,{nss:{name:e.ns||"",event:e.nss.array.join("."),alias:d.alias?[d.alias].concat(e.nss.array.slice(1)).join("."):!1,click:["click"].concat(e.nss.array.join(":")).join("."),submit:["submit"].concat(e.nss.array.join(":")).join("."),popstate:["popstate"].concat(e.nss.array.join(":")).join("."),
scroll:["scroll"].concat(e.nss.array.join(":")).join("."),data:e.nss.array.join("-"),class4html:e.nss.array.join("-"),requestHeader:["X",e.nss.array[0].replace(/^\w/,function(b){return b.toUpperCase()})].join("-")},areaback:e.area,fix:/Mobile(\/\w+)? Safari/i.test(c.navigator.userAgent)?{}:{location:!1,reset:!1},contentType:e.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),scroll:{record:!0,queue:[]},log:{script:{},speed:{}},history:{config:e.cache,order:[],data:{},size:0},timestamp:(new Date).getTime(),
disable:!1,landing:d.canonicalizeURL(c.location.href),retry:!0,xhr:null,speed:{now:function(){return(new Date).getTime()}},option:b});d.supportPushState()&&d.registrate.call(m,a,c,f,p,d,e);return m}var g;g={name:"pjax",alias:"",ids:[],settings:[0],count:0,setAlias:function(a){g.alias="string"===typeof a?a:g.alias;g.name===g.alias||k[g.alias]||(k[g.name][g.alias]=k.fn[g.name],k.fn[g.alias]=k[g.alias]=k.fn[g.name])},IDBFactory:r.indexedDB||r.webkitIndexedDB||r.mozIndexedDB||r.msIndexedDB,IDBDatabase:null,
IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange||r.mozIDBKeyRange||r.msIDBKeyRange,parseHTML:null,setProperties:function(a,c){var f=this;if(f instanceof k||f===k[g.name])f=f instanceof k&&c!==t?f.add(c):f,f[g.name]=k[g.name],f.on=function(){g.settings[1].disable=!1},f.off=function(){g.settings[1].disable=!0},f.click=function(a,d){var b;switch(!0){case "object"===typeof a:b=k(a);break;case !!a:d=d||{};d.href=a;b=k("<a/>",d);break;default:return this}return b.first().one("click",1,g.click).click()},
f.submit=function(a,d,b){var m=z.createDocumentFragment(),e;switch(!0){case "object"===typeof a:d=k(a);break;case !!b:d=d||{};d.action=a;a=b instanceof Array&&Array||b instanceof Object&&Object||t;for(var c in b){e=b[c];switch(a){case Object:e=k("<textarea/>",{name:c}).val(e);break;case Array:e.attr=e.attr||{};e.attr.name=e.name;e=k(e.tag.indexOf("<")?"<"+e.tag+"/>":e.tag,e.attr||{}).val(e.value);break;default:continue}m.appendChild(e[0])}d=k("<form/>",d).append(m);break;default:return this}return d.first().one("submit",
1,g.submit).submit()},f.setCache=function(a,d,b,m){var e=g.settings[1];if(!e||!e.history)return!1;var c,f,q;c=e.history;a=g.canonicalizeURL(a||r.location.href);a=e.hashquery?a:a.replace(/#.*/,"");switch(arguments.length){case 0:case 1:return arguments.callee.call(this,a,g.trim(z.documentElement.outerHTML));default:c.order.unshift(a);for(f=1;q=c.order[f];f++)a===q&&c.order.splice(f,1);c.size>c.config.size&&k[g.name].cleanCache();k[g.name].getCache(a);f=k("<span/>").html(g.find((d||"")+((m||{}).responseText||
"")+"<title></title>",/<title[^>]*?>([^<]*?)<\/title>/i).shift()).text();q=parseInt(1.8*((d||"").length+((m||{}).responseText||"").length)||1048576,10);c.size=c.size||0;c.size+=q;c.data[a]=k.extend(!0,c.data[a]||{},{XMLHttpRequest:m,textStatus:b,data:d,size:q,timestamp:(new Date).getTime()});e.database&&e.fix.history&&g.dbTitle(a,f)}return c.data[a]},f.getCache=function(a){var d=g.settings[1];if(!d||!d.history)return!1;var b;b=d.history;a=g.canonicalizeURL(a||r.location.href);a=d.hashquery?a:a.replace(/#.*/,
"");b.data[a]&&d.timestamp>b.data[a].timestamp+b.config.expire&&k[g.name].removeCache(a);return b.data[a]},f.removeCache=function(a){var d=g.settings[1];if(!d||!d.history)return!1;var b;b=d.history;a=g.canonicalizeURL(a||r.location.href);a=d.hashquery?a:a.replace(/#.*/,"");for(var d=0,c;c=b.order[d];d++)a===c&&(b.order.splice(d,1),b.size-=b.data[c].size,b.data[c]=null,delete b.data[c]);return!0},f.clearCache=function(){var a=g.settings[1];if(!a||!a.history)return!1;for(var a=a.history,d=a.order.length,
b;b=a.order[--d];)a.order.splice(d,1),a.size-=a.data[b].size,delete a.data[b];return!0},f.cleanCache=function(){var a=g.settings[1];if(!a||!a.history)return!1;for(var d=a.history,b=d.order.length,c;c=d.order[--b];)if(b>=d.config.length||c in d.data&&a.timestamp>d.data[c].timestamp+d.config.expire)d.order.splice(b,1),d.size-=d.data[c].size,delete d.data[c];return!0},f.follow=function(a,d,b){var c=g.settings[1];if(!c||!k.when||!g.check(a,c))return!1;isFinite(a.timeStamp)&&(d.timeStamp=b||a.timeStamp);
c.xhr=d;k.when(d).done(function(){c.xhr&&4>c.xhr.readyState&&c.xhr.abort();k[g.name].setCache(a.currentTarget.href,t,t,d)}).fail(function(){g.fallback(a)});k[g.name].click(a.currentTarget.href);return!0};return f},check:function(a,c){var f,p;f=k("<a/>",{href:g.canonicalizeURL(r.location.href)})[0];p=k("<a/>",{href:g.canonicalizeURL(a.currentTarget.href)})[0];if(k(a.currentTarget).filter(c.filter).length&&!(c.disable||f.protocol!==p.protocol||f.host!==p.host||1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||
a.altKey)&&(c.area=g.fire(c.areaback,null,[a,c.parameter,p.href,f.href]),k(c.area).length&&(!c.scope||g.scope(c,f.href,p.href))))return!0},supportPushState:function(){return"pushState"in r.history&&r.history.pushState},registrate:function(a,c,f,g,d,b){b.id=1;d.ids.push(b.id);d.settings[b.id]=b;d.share();b.load.script&&a("script").each(function(){var c=this,e,c="function"===typeof b.load.rewrite?d.fire(b.load.rewrite,null,[c.cloneNode()])||c:c;(e=c.src)&&e in b.log.script||!e||b.load.reload&&a(c).is(b.load.reload)||
(b.log.script[e]=!0)});b.database&&(d.database(),b.fix.scroll&&a(c).unbind(b.nss.scroll).bind(b.nss.scroll,b.id,function(b,e){var f=d.settings[1],g;if(f.scroll.delay){for(;g=f.scroll.queue.shift();)clearTimeout(g);g=setTimeout(function(){for(;g=f.scroll.queue.shift();)clearTimeout(g);d.dbScroll(a(c).scrollLeft(),a(c).scrollTop())},f.scroll.delay);f.scroll.queue.push(g)}else d.dbScroll(a(c).scrollLeft(),a(c).scrollTop())}));b.link&&a(this).undelegate(b.link,b.nss.click).delegate(b.link,b.nss.click,
b.id,d.click=function(b){b.timeStamp=(new Date).getTime();var e=d.settings[1];if(!(!a(this).filter(e.filter).length||e.disable||b.isDefaultPrevented()||(e.location.href=d.canonicalizeURL(c.location.href),e.destination.href=d.canonicalizeURL(this.href),e.location.protocol!==e.destination.protocol||e.location.host!==e.destination.host||1<b.which||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey))){var k,l;k=e.destination.href;e.area=d.fire(e.areaback,null,[b,e.parameter,e.destination.href,e.location.href]);
e.timestamp=b.timeStamp;e.landing&&(e.landing=!1);if(a(e.area).length&&(!e.scope||d.scope(e)))return e.database&&d.dbScroll(a(c).scrollLeft(),a(c).scrollTop()),e.cache[b.type.toLowerCase()]&&(l=a[d.name].getCache(k)),d.drive(a,c,f,g,d,e,b,k,!0,l),b.preventDefault()}});b.form&&a(this).undelegate(b.form,b.nss.submit).delegate(b.form,b.nss.submit,b.id,d.submit=function(b){b.timeStamp=(new Date).getTime();var e=d.settings[1];if(!(e.disable||b.isDefaultPrevented()||(e.location.href=d.canonicalizeURL(c.location.href),
e.destination.href=d.canonicalizeURL(this.action),e.location.protocol!==e.destination.protocol||e.location.host!==e.destination.host||1<b.which||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey))){var k,l;k=e.destination.href=d.canonicalizeURL(e.destination.href.replace(/[?#].*/,"")+("GET"===b.target.method.toUpperCase()?"?"+a(b.target).serialize():""));e.area=d.fire(e.areaback,null,[b,e.parameter,e.destination.href,e.location.href]);e.timestamp=b.timeStamp;e.landing&&(e.landing=!1);if(a(e.area).length&&
(!e.scope||d.scope(e)))return e.database&&d.dbScroll(a(c).scrollLeft(),a(c).scrollTop()),e.cache[b.type.toLowerCase()]&&e.cache[b.target.method.toLowerCase()]&&(l=a[d.name].getCache(k)),d.drive(a,c,f,g,d,e,b,k,!0,l),b.preventDefault()}});a(c).unbind(b.nss.popstate).bind(b.nss.popstate,b.id,d.popstate=function(b){b.timeStamp=(new Date).getTime();var e=d.settings[1];if(!e.disable&&!b.isDefaultPrevented()){e.destination.href=d.canonicalizeURL(c.location.href);if(e.location.href===e.destination.href)return b.preventDefault();
var k,l;if(e.location.hash!==e.destination.hash&&e.location.pathname+e.location.search===e.destination.pathname+e.destination.search&&!e.hashquery)return b.preventDefault();k=e.destination.href;e.area=d.fire(e.areaback,null,[b,e.parameter,e.destination.href,e.location.href]);e.timestamp=b.timeStamp;if(e.landing){if(e.landing.href===k){e.landing=!1;return}e.landing=!1}if(a(e.area).length)return e.database&&e.fix.history&&d.dbTitle(k),e.cache[b.type.toLowerCase()]&&(l=a[d.name].getCache(k)),d.drive(a,
c,f,g,d,e,b,k,!1,l),b.preventDefault()}});(function(){function b(c){try{var d=c&&c("<body><noscript>DOMParser</noscript></body>");return"DOMParser"===a(d).find("noscript").text()}catch(e){}}var e=c.DOMParser;d.parseHTML=function(a){return e&&e.prototype&&(new e).parseFromString(a,"text/html")};b(d.parseHTML)||(d.parseHTML=function(a){var b;f.implementation&&f.implementation.createHTMLDocument&&(b=f.implementation.createHTMLDocument(""),"object"===typeof b.activeElement&&(b.open(),b.write(a),b.close()));
return b},b(d.parseHTML)||(d.parseHTML=!1))})()},drive:function(a,c,f,g,d,b,k,e,r,l){function q(a,b,c,d,f,h,g,k){a:{var m=h.callbacks.update;if(!1!==f.fire(m.before,null,[g,h.parameter,v,s,n,k],h.callbacks.async)){var p,l,q;try{h.xhr&&4>h.xhr.readyState&&h.xhr.abort();h.xhr=null;if(!k&&-1===(n.getResponseHeader("Content-Type")||"").toLowerCase().search(h.contentType))throw Error("throw: content-type mismatch");k&&!1!==f.fire(m.cache.load.before,null,[g,h.parameter,k],h.callbacks.async)&&(n=k.XMLHttpRequest||
n,v=n.responseText,s=k.textStatus||s,l=k.css,q=k.script,f.fire(m.cache.load.after,null,[g,h.parameter,k],h.callbacks.async));var y,u,x,t,w,z,B;z=h.area.split(/\s*,\s*/);u=(n.responseText||"").replace(/<noscript[^>]*>(?:.|[\n\r])*?<\/noscript>/gim,function(a){return a.replace(/<script(?:.|[\n\r])*?<\/script>/gim,"")});if(k&&k.data){t=k.data;x=a(f.parseHTML&&t&&f.parseHTML(t)||t);u=u.replace(/<title[^>]*?>([^<]*?)<\/title>/i,function(a){return f.find(t,/(<title[^>]*?>[^<]*?<\/title>)/i).shift()||a});
y=a(f.parseHTML&&u&&f.parseHTML(u)||u);for(var E=0,A,I;A=z[E++];)y.find(A).add(w?"":y.filter(A)).html(x.find(A).add(w?"":x.filter(A)).contents())}else y=a(f.parseHTML&&u&&f.parseHTML(u)||u);switch(!0){case !!y.find("html")[0]:w=1;y.find("noscript").each(function(){this.children.length&&a(this).text(this.innerHTML)});break;case !!y.filter("title")[0]:w=0;break;default:w=!1}switch(w){case 1:p=y.find("title").text();break;case 0:p=y.filter("title").text();break;case !1:p=a("<span/>").html(f.find(u,/<title[^>]*?>([^<]*?)<\/title>/i).shift()).text()}if(!a(h.area).length||
!y.find(h.area).add(w?"":y.filter(h.area)).length)throw Error("throw: area length mismatch");a(b).trigger(h.gns+".unload");!1!==f.fire(m.url.before,null,[g,h.parameter,v,s,n],h.callbacks.async)&&(r&&e!==h.location.href&&b.history.pushState(f.fire(h.state,null,[g,h.parameter,h.destination.href,h.location.href]),b.opera||-1!==b.navigator.userAgent.toLowerCase().indexOf("opera")?p:c.title,e),h.location.href=e,r&&h.fix.location&&(a[f.name].off(),b.history.back(),b.history.forward(),a[f.name].on()),f.fire(m.url.after,
null,[g,h.parameter,v,s,n],h.callbacks.async));!1!==f.fire(m.title.before,null,[g,h.parameter,v,s,n],h.callbacks.async)&&(c.title=p,h.database&&h.fix.history&&f.dbTitle(e,p),f.fire(m.title.after,null,[g,h.parameter,v,s,n],h.callbacks.async));h.database&&f.dbCurrent();if(!1!==f.fire(m.content.before,null,[g,h.parameter,v,s,n],h.callbacks.async)){a(h.area).children("."+h.nss.class4html+"-check").remove();B=a("<div/>",{"class":h.nss.class4html+"-check",style:"background: none !important; display: block !important; visibility: hidden !important; position: absolute !important; top: 0 !important; left: 0 !important; z-index: -9999 !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; font-size: 12px !important; text-indent: 0 !important;"}).text(h.gns);
for(E=0;A=z[E++];)I=y.find(A).add(w?"":y.filter(A)).clone().find("script").remove().end().contents(),a(A).html(I).append(B.clone());B=a(h.area).children("."+h.nss.class4html+"-check");a(c).trigger(h.gns+".DOMContentLoaded");f.fire(m.content.after,null,[g,h.parameter,v,s,n],h.callbacks.async)}var G=function(c){if(!1!==f.fire(m.scroll.before,null,[g,h.parameter],h.callbacks.async)){var d,e;switch(g.type.toLowerCase()){case "click":case "submit":d=c&&"function"===typeof h.scrollLeft?f.fire(h.scrollLeft,
null,[g,h.parameter,h.destination.href,h.location.href]):h.scrollLeft;d=0<=d?d:0;d=!1===d||null===d?a(b).scrollLeft():parseInt(Number(d),10);e=c&&"function"===typeof h.scrollTop?f.fire(h.scrollTop,null,[g,h.parameter,h.destination.href,h.location.href]):h.scrollTop;e=0<=e?e:0;e=!1===e||null===e?a(b).scrollTop():parseInt(Number(e),10);a(b).scrollTop()===e&&a(b).scrollLeft()===d||b.scrollTo(d,e);c&&h.database&&h.fix.scroll&&f.dbScroll(d,e);break;case "popstate":c&&h.database&&h.fix.scroll&&f.dbScroll()}f.fire(m.scroll.after,
null,[g,h.parameter],h.callbacks.async)}};k&&k.XMLHttpRequest||!h.cache.click&&!h.cache.submit&&!h.cache.popstate||"submit"===g.type.toLowerCase()&&!h.cache[g.target.method.toLowerCase()]||!1===f.fire(m.cache.save.before,null,[g,h.parameter,k],h.callbacks.async)||(a[f.name].setCache(e,t||null,s,n),k=a[f.name].getCache(e),f.fire(m.cache.save.after,null,[g,h.parameter,k],h.callbacks.async));var H=function(b){if(!1!==f.fire(m.rendering.before,null,[g,h.parameter],h.callbacks.async)){var c=0;(function(){B.filter(function(){return this.clientWidth||
this.clientHeight||a(this).is(":hidden")}).length===B.length||100<=c?C(b):B.length&&(c++,setTimeout(arguments.callee,h.interval))})()}},C=function(c){B.remove();h.scroll.record=!0;f.hashscroll("popstate"===g.type.toLowerCase())||G(!0);a(b).trigger(h.gns+".load");f.fire(c);f.fire(m.rendering.after,null,[g,h.parameter],h.callbacks.async)};switch(w){case 1:case 0:y.find("noscript").remove();break;case !1:u=u.replace(/^(?:.|[\n\r])*<body[^>]*>.*[\n\r]*.*[\n\r]*/im,function(a){return a.replace(/\x3c!--\[(?:.|[\n\r])*?<!\[endif\]--\x3e/gim,
"")}),u=u.replace(/<noscript(?:.|[\n\r])*?<\/noscript>/gim,"")}var F=function(c){if(h.load.script&&!1!==f.fire(m.script.before,null,[g,h.parameter,v,s,n],h.callbacks.async)){var d;d=(k=a[f.name].getCache(e))&&!k.script;switch(q||w){case 1:case 0:q=y.find("script").add(w?"":y.filter("script")).clone().get();break;case !1:q=f.find(u,/(?:[^\'\"]|^\s*?)(<script[^>]*?>(?:.|[\n\r])*?<\/script>)(?:[^\'\"]|\s*?$)/gim)}q=a(q).not(h.load.reject);k&&k.script&&q&&q.length!==k.script.length&&(d=!0);d&&(k.script=
[]);for(var p=0,l,r;l=q[p];p++)if(l="object"===typeof l?d?a(l.outerHTML)[0]:l:a(l)[0],l="function"===typeof h.load.rewrite?f.fire(h.load.rewrite,null,[l.cloneNode()])||l:l,d&&(k.script[p]=l),a(l).is(c)&&(r=f.trim(l.src||""),!(r&&r in h.log.script||h.load.reject&&a(l).is(h.load.reject)))){!r||h.load.reload&&a(l).is(h.load.reload)||(h.log.script[r]=!0);try{r?a.ajax(a.extend(!0,{},h.ajax,h.load.ajax,{url:l.src,async:!!l.async,global:!1})):"object"!==typeof l||l.type&&-1===l.type.toLowerCase().indexOf("text/javascript")||
b.eval.call(b,(l.text||l.textContent||l.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/"))}catch(t){break}}f.fire(m.script.after,null,[g,h.parameter,v,s,n],h.callbacks.async)}};if(!1!==f.fire(m.verify.before,null,[g,h.parameter],h.callbacks.async)){if(e===f.canonicalizeURL(b.location.href))h.retry=!0;else if(h.retry)h.retry=!1,f.drive(a,b,c,d,f,h,g,b.location.href,!1,h.cache[g.type.toLowerCase()]&&a[f.name].getCache(f.canonicalizeURL(b.location.href)));else throw Error("throw: location mismatch");
f.fire(m.verify.after,null,[g,h.parameter],h.callbacks.async)}(function(){if(h.load.css&&!1!==f.fire(m.css.before,null,[g,h.parameter,v,s,n],h.callbacks.async)){var b,c=[],d=a('link[rel~="stylesheet"], style');b=(k=a[f.name].getCache(e))&&!k.css;switch(l||w){case 1:case 0:l=y.find('link[rel~="stylesheet"], style').add(w?"":y.filter('link[rel~="stylesheet"], style')).clone().get();break;case !1:l=f.find(u,/(<link[^>]*?rel=.[^"\']*?stylesheet[^>]*?>|<style[^>]*?>(?:.|[\n\r])*?<\/style>)/gim)}l=a(l).not(h.load.reject);
d=d.not(h.load.reload);k&&k.css&&l&&l.length!==k.css.length&&(b=!0);b&&(k.css=[]);for(var p=0,q,r;q=l[p];p++){q="object"===typeof q?b?a(q.outerHTML)[0]:q:a(q)[0];q="function"===typeof h.load.rewrite?f.fire(h.load.rewrite,null,[q.cloneNode()])||q:q;b&&(k.css[p]=q);r=f.trim(q.href||q.innerHTML||"");for(var t=0,x;x=d[t];t++)if(!c.length&&f.trim(x.href||x.innerHTML||"")===r){d=d.not(x);q=null;break}else if(!t&&c.length)break;q&&c.push(q)}d.remove();a("head").append(c);f.fire(m.css.after,null,[g,h.parameter,
v,s,n],h.callbacks.async)}})();a(b).one(h.gns+".rendering",function(b){b.preventDefault();b.stopImmediatePropagation();G(!1);a(c).trigger(h.gns+".ready");F(":not([defer]), :not([src])");h.load.sync?H(function(){F("[src][defer]")}):(H(),F("[src][defer]"))}).trigger(h.gns+".rendering");if(!1===f.fire(m.success,null,[g,h.parameter,v,s,n],h.callbacks.async))break a;if(!1===f.fire(m.complete,null,[g,h.parameter,v,s,n],h.callbacks.async))break a;if(!1===f.fire(h.callback,null,[g,h.parameter,v,s,n],h.callbacks.async))break a}catch(K){k&&
a[f.name].removeCache(e);if(!1===f.fire(m.error,null,[g,h.parameter,v,s,n],h.callbacks.async))break a;if(!1===f.fire(m.complete,null,[g,h.parameter,v,s,n],h.callbacks.async))break a;if(h.fallback)return"function"===typeof h.fallback?f.fire(h.fallback,null,[g,h.parameter,h.destination.href,h.location.href]):f.fallback(g)}f.fire(m.after,null,[g,h.parameter,v,s,n],h.callbacks.async)}}}b.scroll.record=!1;b.fix.reset&&/click|submit/.test(k.type.toLowerCase())&&c.scrollTo(a(c).scrollLeft(),0);if(!1!==d.fire(b.callbacks.before,
null,[k,b.parameter],b.callbacks.async))if(l&&l.XMLHttpRequest)a.when?a.when(d.wait(d.fire(b.wait,null,[k,b.parameter,b.destination.href,b.location.href]))).done(function(){q(a,c,f,g,d,b,k,l)}):q(a,c,f,g,d,b,k,l);else if(b.xhr&&b.xhr.promise){var u=b.wait&&isFinite(b.xhr.timeStamp)?Math.max(b.wait-(new Date).getTime()+b.xhr.timeStamp,0):0;a.when(b.xhr,d.wait(u)).done(function(){q(a,c,f,g,d,b,k,a[d.name].getCache(e))})}else{var w,v,n,s,t,u={};switch(k.type.toLowerCase()){case "click":u.type="GET";
break;case "submit":u.type=k.target.method.toUpperCase();"POST"===u.type&&(u.data=a(k.target).serializeArray());break;case "popstate":u.type="GET"}w=a.when?a.Deferred():null;a.extend(!0,u,b.ajax,{xhr:b.callbacks.ajax.xhr?function(){n=d.fire(b.callbacks.ajax.xhr,this,[k,b.parameter],b.callbacks.async);return n="object"===typeof n&&n||a.ajaxSettings.xhr()}:g,beforeSend:function(a,c){n=a;b.xhr&&4>b.xhr.readyState&&b.xhr.abort();b.xhr=n;n.setRequestHeader(b.nss.requestHeader,"true");n.setRequestHeader(b.nss.requestHeader+
"-Area",b.area);n.setRequestHeader(b.nss.requestHeader+"-CSS",b.load.css);n.setRequestHeader(b.nss.requestHeader+"-Script",b.load.script);d.fire(b.callbacks.ajax.beforeSend,this,[k,b.parameter,n,c],b.callbacks.async)},dataFilter:b.callbacks.ajax.dataFilter?function(a,c){v=a;return d.fire(b.callbacks.ajax.dataFilter,this,[k,b.parameter,v,c],b.callbacks.async)||v}:g,success:function(a,c,f){v=a;s=c;n=f;d.fire(b.callbacks.ajax.success,this,[k,b.parameter,v,s,n],b.callbacks.async)},error:function(a,c,
f){n=a;s=c;t=f;d.fire(b.callbacks.ajax.error,this,[k,b.parameter,n,s,t],b.callbacks.async)},complete:function(e,r){n=e;s=r;d.fire(b.callbacks.ajax.complete,this,[k,b.parameter,n,s],b.callbacks.async);if(t){if(w&&w.reject(),b.fallback&&"abort"!==s)return"function"===typeof b.fallback?d.fire(b.fallback,null,[k,b.parameter,b.destination.href,b.location.href]):d.fallback(k)}else w&&w.resolve()||q(a,c,f,g,d,b,k,l)}});var x=b.server.query;x&&(x=x.split("="),x=encodeURIComponent(x[0])+(0<x.length?"="+encodeURIComponent(x[1]):
""));u.url=e.replace(/([^#]+)(#[^\s]*)?$/,"$1"+(x?(e.match(/\?/)?"&":"?")+x:"")+"$2");a.when&&a.when(w.promise(),d.wait(d.fire(b.wait,null,[k,b.parameter,b.destination.href,b.location.href]))).done(function(){q(a,c,f,g,d,b,k,l)});a.ajax(u);d.fire(b.callbacks.after,null,[k,b.parameter],b.callbacks.async)}},canonicalizeURL:function(a){var c;c=g.trim(a);c=c.replace(/[<>"{}|\\^\[\]`\s].*/,"");c=/^https?:/i.test(c)?c:k("<a/>",{href:c})[0].href;c=encodeURI(decodeURI(c));return c=c.replace(/(?:%\w{2})+/g,
function(c){return a.match(c.toLowerCase())||c})},trim:function(a){if(String.prototype.trim)a=String(a).trim();else if(a=String(a).replace(/^\s+/,""))for(var c=a.length;--c;)if(/\S/.test(a.charAt(c))){a=a.substring(0,c+1);break}return a},fire:function(a,c,f,g){return"function"===typeof a?g?setTimeout(function(){a.apply(c,f)},0):a.apply(c,f):a},hashscroll:function(a){var c=g.settings[1].destination.hash.slice(1);return!(a||!c)&&k("#"+(c?c:", [name~="+c+"]")).first().each(function(){isFinite(k(this).offset().top)&&
r.scrollTo(k(r).scrollLeft(),parseInt(Number(k(this).offset().top),10))}).length},wait:function(a){var c=k.Deferred();if(!a)return c.resolve();setTimeout(function(){c.resolve()},a);return c.promise()},fallback:function(a){switch(a.type.toLowerCase()){case "click":r.location.href=a.currentTarget.href;break;case "submit":a.target.submit();break;case "popstate":r.location.reload()}},find:function(a,c){var f=[];a.replace(c,function(a,c){f.push(c)});return f},scope:function(a,c,f,p){var d,b,m,e,r,l,q,
u,w,v,n,s,z;d=[].slice.call(arguments);d.splice(1,1,c||a.location.href);d.splice(2,1,f||a.destination.href);b=a.scope;c=(c||a.location.href).replace(/.+?\w(\/[^#?]*).*/,"$1");f=(f||a.destination.href).replace(/.+?\w(\/[^#?]*).*/,"$1");m=c.replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");r=(p||c).replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");if(p){if(-1===p.indexOf("*"))return t;e=[];for(var x=r.length;x--;)"*"===r[x]&&e.unshift(m[x])}for(x=r.length+1;x--;)if(w=v=n=s=t,m=r.slice(0,x).join("/").replace(/\/([?#])/g,
"$1"),(m="/"+m+("/"===(p||c).charAt(m.length+1)?"/":""))&&m in b){if(!b[m]||!b[m].length)return!1;for(var C=0;(l=b[m][C])&&!1!==n&&!1!==s;C++)if("rewrite"!==l||"function"!==typeof b.rewrite||p)if("inherit"===l)v=!0;else if("string"===typeof l){l=(q="^"===l.charAt(0))?l.slice(1):l;l=(u="*"===l.charAt(0))?l.slice(1):l;if(p&&-1!==l.indexOf("/*/"))for(var D=0,J=e.length;D<J;D++)l=l.replace("/*/","/"+e[D]+"/");if(!(!q&&n||(u?c.search(l):c.indexOf(l)))){if(q)return!1;n=!0}if(!(!q&&s||(u?f.search(l):f.indexOf(l)))){if(q)return!1;
s=!0}}else"object"===typeof l&&(z=l);else if(d.push(g.fire(b.rewrite,null,[f])),w=arguments.callee.apply(this,d)){n=s=!0;break}else if(!1===w)return!1;if(n&&s)return k.extend(!0,{},a,("object"===typeof w?w:z)||{});if(!v)break}},database:function(a){var c=g.settings[1],f,p,d,b,m,e;f=c.gns;p=1;d=Math.floor(c.timestamp/864E5);b=g.IDBFactory;m=g.IDBDatabase;a=a||0;c.database=!1;if(!b||!f||5<a)return!1;try{var t=function(c){g.IDBDatabase=null;m&&m.close&&m.close();b.deleteDatabase(f);c?setTimeout(function(){g.database(++a)},
c):g.database(++a)};p=parseInt(d-d%7+p,10);m=b.open(f);m.onblocked=function(){};m.onupgradeneeded=function(){var a=this.result;try{for(var b=a.objectStoreNames?a.objectStoreNames.length:0;b--;)a.deleteObjectStore(a.objectStoreNames[b]);a.createObjectStore(c.gns,{keyPath:"id",autoIncrement:!1}).createIndex("date","date",{unique:!1})}catch(d){}};m.onsuccess=function(){try{m=this.result,g.IDBDatabase=m,(e=g.dbStore())?e.get("_version").onsuccess=function(){this.result&&p!==this.result.title?t():(g.dbVersion(p),
g.dbCurrent(),g.dbTitle(c.location.href,z.title),g.dbScroll(k(r).scrollLeft(),k(r).scrollTop()),c.database=!0)}:t()}catch(a){t(1E3)}};m.onerror=function(a){t(1E3)}}catch(l){t(1E3)}},dbStore:function(){for(var a=g.settings[1],c=g.IDBDatabase,f=c&&c.objectStoreNames?c.objectStoreNames.length:0;f--;)if(a.gns===c.objectStoreNames[f])return c&&c.transaction&&c.transaction(a.gns,"readwrite").objectStore(a.gns);return!1},dbCurrent:function(){var a=g.settings[1],c=g.dbStore();if(c){var f;f=g.canonicalizeURL(r.location.href);
f=a.hashquery?f:f.replace(/#.*/,"");c.put({id:"_current",title:f})}},dbVersion:function(a){var c=g.dbStore();c&&c.put({id:"_version",title:a})},dbTitle:function(a,c){var f=g.settings[1],p=g.dbStore();p&&(a=f.hashquery?a:a.replace(/#.*/,""),c?p.get(a).onsuccess=function(){p.put(k.extend(!0,{},this.result||{},{id:a,title:c,date:f.timestamp}));g.dbClean()}:p.get(a).onsuccess=function(){this.result&&this.result.title&&(z.title=this.result.title)})},dbScroll:function(a,c){var f=g.settings[1],p=g.dbStore(),
d=f.location.href,b=arguments.length;f.scroll.record&&p&&(d=f.hashquery?d:d.replace(/#.*/,""),p.get("_current").onsuccess=function(){this.result&&this.result.title&&d===this.result.title&&(b?p.get(d).onsuccess=function(){p.put(k.extend(!0,{},this.result||{},{scrollX:parseInt(Number(a),10),scrollY:parseInt(Number(c),10)}))}:p.get(d).onsuccess=function(){this.result&&isFinite(this.result.scrollX)&&isFinite(this.result.scrollY)&&r.scrollTo(parseInt(Number(this.result.scrollX),10),parseInt(Number(this.result.scrollY),
10))})})},dbClean:function(){var a=g.settings[1],c=g.dbStore();c.count().onsuccess=function(){1E3<this.result&&(c.index("date").openCursor(g.IDBKeyRange.upperBound(a.timestamp-2592E5)).onsuccess=function(){var a=this.result;a?(a["delete"](a.value.id),a["continue"]()):c.count().onsuccess=function(){1E3<this.result&&c.clear()}})}},share:function(){var a=g.settings[1];k.falsandtru||(k.fn.falsandtru=k.falsandtru=g.falsandtru);k.falsandtru("share","history",a.history);a.history=k.falsandtru("share","history")},
falsandtru:function(a,c,f){var g;switch(!0){case c===t:g=k.falsandtru[a];break;case f===t:g=a in k.falsandtru?k.falsandtru[a][c]:t;break;case f!==t:k.falsandtru[a]instanceof Object||(k.falsandtru[a]={}),k.falsandtru[a][c]instanceof Object&&f instanceof Object?k.extend(!0,k.falsandtru[a][c],f):k.falsandtru[a][c]=f,g=k.falsandtru[a][c]}return g}};(function(a,c,f,g,d){a.fn[d.name]=a[d.name]=function(){return C.apply(this,[a,c,f,g,d].concat([].slice.call(arguments)))};d.setProperties.call(a[d.name])}).apply(this,
[].slice.call(arguments).concat([g]))})(jQuery,window,document,void 0);

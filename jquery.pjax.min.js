/*
 * 
 * pjax
 * 
 * ---
 * @Copyright(c) 2012, falsandtru
 * @license MIT http://opensource.org/licenses/mit-license.php
 * @version 1.24.5
 * @updated 2013/11/17
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(d){var G,H,m=window,y=document,w=void 0,E=["settings"],I;d.fn.pjax=d.pjax=function(s){function W(a){X();b.load.script&&d("script").each(function(){var a=this,c,a="function"===typeof b.load.rewrite?n(b.load.rewrite,null,[a.cloneNode()])||a:a;(c=a.src)&&c in b.log.script||!c||b.load.reload&&d(a).is(b.load.reload)||(b.log.script[c]=!0)});d(a).undelegate(b.link,b.nss.click).delegate(b.link,b.nss.click,b.id,G=function(a){a.timeStamp=(new Date).getTime();var c=E[1];if(c.disable||a.isDefaultPrevented())return a.preventDefault();
c.destination.href=A(this.href);if(c.location.protocol===c.destination.protocol&&c.location.host===c.destination.host&&!(1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)){if(!n(c.hashquery,null,[a,this.href])&&c.location.pathname+c.location.search===c.destination.pathname+c.destination.search)return c.destination.hash&&R(),a.preventDefault();var b,h;b=c.destination.href;c.area=n(c.options.area,null,[a,b]);c.timestamp=a.timeStamp;c.landing&&(c.landing=!1);if(d(c.area).length&&(!c.scope||F(c)))return c.cache[a.type.toLowerCase()]&&
(h=C(b)),J(c,a,b,!0,h),a.preventDefault()}});d(a).undelegate(b.form,b.nss.submit).delegate(b.form,b.nss.submit,b.id,H=function(a){a.timeStamp=(new Date).getTime();var c=E[1];if(c.disable||a.isDefaultPrevented())return a.preventDefault();c.destination.href=A(this.action);if(!(1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)){var b,h;b=c.destination.href=A(c.destination.href.replace(/[?#].*/,"")+("GET"===a.target.method.toUpperCase()?"?"+d(a.target).serialize():""));c.area=n(c.options.area,null,
[a,b]);c.timestamp=a.timeStamp;c.landing&&(c.landing=!1);if(d(c.area).length&&(!c.scope||F(c)))return c.cache[a.type.toLowerCase()]&&c.cache[a.target.method.toLowerCase()]&&(h=C(b)),J(c,a,b,!0,h),a.preventDefault()}});d(m).unbind(b.nss.popstate).bind(b.nss.popstate,b.id,function(a){a.timeStamp=(new Date).getTime();var c=E[1];if(c.disable||a.isDefaultPrevented())return a.preventDefault();c.destination.href=A(m.location.href);if(c.location.href===c.destination.href)return a.preventDefault();var b,h;
if(!n(c.hashquery,null,[a,b])&&c.location.pathname+c.location.search===c.destination.pathname+c.destination.search)return a.preventDefault();b=c.destination.href;c.area=n(c.options.area,null,[a,b]);c.timestamp=a.timeStamp;if(c.landing){if(c.landing.href===b){c.landing=!1;return}c.landing=!1}if(d(c.area).length)return c.database&&c.fix.history&&O(b),c.cache[a.type.toLowerCase()]&&(h=C(b)),J(c,a,b,!1,h),a.preventDefault()});b.database&&b.fix.scroll&&d(m).unbind(b.nss.scroll).bind(b.nss.scroll,b.id,
function(a,c){var b=E[1],h,n=arguments.callee;if(b.scroll.delay){for(;h=b.scroll.queue.shift();)clearTimeout(h);h=setTimeout(function(){for(;h=b.scroll.queue.shift();)clearTimeout(h);K(d(m).scrollLeft(),d(m).scrollTop())},b.scroll.delay);b.scroll.queue.push(h)}else K(d(m).scrollLeft(),d(m).scrollTop());b.scroll.suspend&&!c&&(d(this).unbind(b.nss.scroll),setTimeout(function(){b.database&&b.fix.scroll&&d(m).bind(b.nss.scroll,b.id,n).trigger(b.nss.scroll,[!0])},b.scroll.suspend))})}function J(a,b,c,
B,h){function l(a,b,e){var f=a.validate?a.validate.clone({name:"jquery.pjax.js - update()"}):!1;f&&f.start();f&&(f.scope=function(a){return eval(a)});f&&f.test("1",1,0,"update()");f&&f.test("++",1,0,"start");a:{var h=a.speedcheck;h&&a.log.speed.name.push("update");h&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire);var k=a.callbacks.update;if(!1!==n(k.before,null,[b,a.parameter,r,q,p],a.callbacks.async)){var l=window,u=document,m,g,v;try{f&&f.test("++",1,0,"try");f&&f.test("++",1,e?0:[a.contentType,
p.getResponseHeader("Content-Type")],"content-type");if(!e&&-1===(p.getResponseHeader("Content-Type")||"").toLowerCase().search(a.contentType))throw Error("throw: content-type mismatch");f&&f.test("++",e?"'usable'":"'unusable'",0,"cache");e&&!1!==n(k.cache.load.before,null,[b,a.parameter,e],a.callbacks.async)&&(p=e.XMLHttpRequest,r=p.responseText,q=e.textStatus,m=e.title,g=e.css,v=e.script,n(k.cache.load.after,null,[b,a.parameter,e],a.callbacks.async));f&&f.test("++",1,0,"initialize");var z,w,D,s;
z=d(r);w=0<z.filter("title").length;D=a.area.replace(/(\((.*?(\(.*?\).*?)?)*?\)|\S)(,|$)/g,function(a,b,c,f,e){return b+(e?"|":"")}).split(/\s*\|(?!=)\s*/);w||(r=r.replace(/^((?:.|[\n\r])*?<body[^>]*>.*[\n\r]*.*[\n\r]*)/im,"$1").replace(/\x3c!--\[(?:.|[\n\r])*?<!\[endif\]--\x3e/gim,""),r=r.replace(/<noscript(?:.|[\n\r])*?<\/noscript>/gim,""));m=m||w?z.filter("title").text():d("<span/>").html(P(r,/<title>([^<]*?)<\/title>/i).join()).text();if(!d(a.area).length||!z.find(a.area).add(z.filter(a.area)).length)throw Error("throw: area length mismatch");
f&&f.test("++",1,c,"url");!1!==n(k.url.before,null,[b,a.parameter,r,q,p],a.callbacks.async)&&(B&&c!==a.location.href&&l.history.pushState(n(a.state,null,[b,c]),l.opera||-1!==l.navigator.userAgent.toLowerCase().indexOf("opera")?m:u.title,c),a.location.href=c,B&&a.fix.location&&(I.off(),l.history.back(),l.history.forward(),I.on()),n(k.url.after,null,[b,a.parameter,r,q,p],a.callbacks.async));f&&f.test("++",1,m,"title");!1!==n(k.title.before,null,[b,a.parameter,r,q,p],a.callbacks.async)&&(u.title=m,a.database&&
a.fix.history&&O(c,m),n(k.title.after,null,[b,a.parameter,r,q,p],a.callbacks.async));a.database&&S();f&&f.test("++",1,0,"scroll");var y=function(c){var f,e;switch(b.type.toLowerCase()){case "click":case "submit":f=c&&"function"===typeof a.scrollLeft?n(a.scrollLeft,null,[b]):a.scrollLeft;f=0<=f?f:0;f=null===f?d(l).scrollLeft():parseInt(Number(f),10);e=c&&"function"===typeof a.scrollTop?n(a.scrollTop,null,[b]):a.scrollTop;e=0<=e?e:0;e=null===e?d(l).scrollTop():parseInt(Number(e),10);d(l).scrollTop()===
e&&d(l).scrollLeft()===f||l.scrollTo(f,e);c&&a.database&&a.fix.scroll&&K(f,e);break;case "popstate":c&&a.database&&a.fix.scroll&&K()}};y(!1);f&&f.test("++",1,D,"content");if(!1!==n(k.content.before,null,[b,a.parameter,r,q,p],a.callbacks.async)){d(a.area).children("."+a.nss.class4html+"-check").remove();s=d("<div/>",{"class":a.nss.class4html+"-check",style:"background: none !important; display: block !important; visibility: hidden !important; position: absolute !important; top: 0 !important; left: 0 !important; z-index: -9999 !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; font-size: 12px !important; text-indent: 0 !important;"}).text(a.gns);
for(var E=0,L;L=D[E++];)d(L).html(z.find(L).add(z.filter(L)).contents()).append(s.clone());s=d(a.area).children("."+a.nss.class4html+"-check");d(u).trigger(a.gns+".DOMContentLoaded");n(k.content.after,null,[b,a.parameter,r,q,p],a.callbacks.async)}h&&a.log.speed.name.push("content");h&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire);f&&f.test("++",1,0,"cache");e||!(a.cache.click||a.cache.submit||a.cache.popstate)||"submit"===b.type.toLowerCase()&&!a.cache[b.target.method.toLowerCase()]||!1===
n(k.cache.save.before,null,[b,a.parameter,e],a.callbacks.async)||(M(c,m,x,q,p),cahce=C(c),n(k.cache.save.after,null,[b,a.parameter,e],a.callbacks.async));f&&f.test("++",1,0,"rendering");var G=function(c){!1!==n(k.rendering.before,null,[b,a.parameter],a.callbacks.async)&&function(){s.filter(function(){return this.clientWidth||d(this).is(":hidden")}).length===s.length?H(c):s.length&&setTimeout(function(){arguments.callee()},a.interval)}()},H=function(c){s.remove();c?a.load.sync&&F("[src][defer]"):(a.scroll.record=
!0,R("popstate"===b.type.toLowerCase())||y(!0),d(l).trigger(a.gns+".load"),h&&a.log.speed.name.push("rendered"),h&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire));n(k.rendering.after,null,[b,a.parameter],a.callbacks.async)};f&&f.test("++",1,0,"css");f&&f.test("++",1,0,"script");var F=function(f){var m=a.validate?a.validate.clone({name:"jquery.pjax.js - load_script()"}):!1;m&&m.start();m&&(m.scope=function(a){return eval(a)});if(a.load.script&&!1!==n(k.script.before,null,[b,a.parameter,r,q,
p],a.callbacks.async)){var u;u=(e=C(c))&&!e.script;v=v||w?z.find("script").add(z.filter("script")).get():P(r,/(?:[^\'\"]|^\s*?)(<script[^>]*?>(?:.|[\n\r])*?<\/script>)(?:[^\'\"]|\s*?$)/gim);e&&e.script&&v&&v.length!==e.script.length&&(u=!0);u&&(e.script=[]);for(var B=0,g,t;g=v[B];B++)g="object"===typeof g?g:d(g)[0],g="function"===typeof a.load.rewrite?n(a.load.rewrite,null,[g.cloneNode()])||g:g,u&&(e.script[B]=g),d(g).is(f)&&(t=N(g.src||""),t&&t in a.log.script||a.load.reject&&d(g).is(a.load.reject)||
(!t||a.load.reload&&d(g).is(a.load.reload)||(a.log.script[t]=!0),t?d.ajax(d.extend(!0,{},a.ajax,a.load.ajax,{url:g.src,async:!!g.async,global:!1})):"object"!==typeof g||g.type&&-1===g.type.toLowerCase().indexOf("text/javascript")||l.eval.call(l,(g.text||g.textContent||g.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/"))));!1!==n(k.script.after,null,[b,a.parameter,r,q,p],a.callbacks.async)&&("[src][defer]"===f&&h&&a.log.speed.name.push("script"),"[src][defer]"===f&&h&&a.log.speed.time.push(a.speed.now()-
a.log.speed.fire),"[src][defer]"===f&&h&&console.log(a.log.speed.time),"[src][defer]"===f&&h&&console.log(a.log.speed.name))}m&&m.end()};f&&f.test("++",1,0,"verify");if(!1!==n(k.verify.before,null,[b,a.parameter],a.callbacks.async)){if(c===A(l.location.href))a.retry=!0;else if(a.retry)a.retry=!1,J(a,b,l.location.href,!1,a.cache[b.type.toLowerCase()]&&C(A(l.location.href)));else throw Error("throw: location mismatch");n(k.verify.after,null,[b,a.parameter],a.callbacks.async)}(function(){var f=a.validate?
a.validate.clone({name:"jquery.pjax.js - load_css()"}):!1;f&&f.start();f&&(f.scope=function(a){return eval(a)});if(a.load.css&&!1!==n(k.css.before,null,[b,a.parameter,r,q,p],a.callbacks.async)){var l,m=[],u=d('link[rel~="stylesheet"], style');l=(e=C(c))&&!e.css;g=g?g:w?z.find('link[rel~="stylesheet"], style').add(z.filter('link[rel~="stylesheet"], style')).get():P(r,/(<link[^>]*?rel=.[^"\']*?stylesheet[^>]*?>|<style[^>]*?>(?:.|[\n\r])*?<\/style>)/gim);e&&e.css&&g&&g.length!==e.css.length&&(l=!0);
l&&(e.css=[]);for(var B=0,t,v;t=g[B];B++){t="object"===typeof t?t:d(t)[0];t="function"===typeof a.load.rewrite?n(a.load.rewrite,null,[t.cloneNode()])||t:t;l&&(e.css[B]=t);v=N(t.href||t.innerHTML||"");for(var s=0,D;D=u[s];s++)if(N(D.href||D.innerHTML||"")===v){u=u.not(D);t=null;break}t&&m.push(t)}u.remove();d("head").append(m);!1!==n(k.css.after,null,[b,a.parameter,r,q,p],a.callbacks.async)&&(h&&a.log.speed.name.push("css"),h&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire))}f&&f.end()})();d(u).trigger(a.gns+
".ready");d(l).bind(a.gns+".rendering",function(b){d(b.target).unbind(b.type+".rendering",arguments.callee);G();F(":not([defer]), :not([src])");!a.load.sync&&F("[src][defer]");G(!0)}).trigger(a.gns+".rendering");if(!1===n(k.success,null,[b,a.parameter,r,q,p],a.callbacks.async))break a;if(!1===n(k.complete,null,[b,a.parameter,r,q,p],a.callbacks.async))break a;if(!1===n(a.callback,null,[b,a.parameter,r,q,p],a.callbacks.async))break a;f&&f.test("++",1,0,"success")}catch(Q){f&&f.test("++",!String(Q.message).indexOf("throw:"),
Q,"catch");f&&f.test("++",!("throw: location mismatch"===Q.message&&c!==l.location.href),[c,l.location.href],"!( err.message === 'throw: location mismatch' && url !== win.location.href )");e&&M(c);if(!1===n(k.error,null,[b,a.parameter,r,q,p],a.callbacks.async))break a;if(!1===n(k.complete,null,[b,a.parameter,r,q,p],a.callbacks.async))break a;f&&f.test("++",1,[c,l.location.href],"error");if(a.fallback)return"function"===typeof a.fallback?n(a.fallback,null,[b,c]):T(b,f)}!1!==n(k.after,null,[b,a.parameter,
r,q,p],a.callbacks.async)&&(h&&a.log.speed.name.push("complete"),h&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire),f&&f.test("++",1,0,"end"),f&&f.end())}}}var e=a.validate?a.validate.clone({name:"jquery.pjax.js - drive()"}):!1;e&&e.start();e&&(e.scope=function(a){return eval(a)});e&&e.test("++",1,[c,b.type],"drive()");var u=a.speedcheck;u&&(a.log.speed.fire=a.timestamp);u&&(a.log.speed.time=[]);u&&(a.log.speed.name=[]);u&&a.log.speed.name.push("fire");u&&a.log.speed.time.push(a.speed.now()-
a.log.speed.fire);e&&e.test("++",1,0,"start");a.scroll.record=!1;a.fix.reset&&/click|submit/.test(b.type.toLowerCase())&&m.scrollTo(d(m).scrollLeft(),0);if(!1!==n(a.callbacks.before,null,[b,a.parameter],a.callbacks.async))if(h)e&&e.test("++",1,0,"update"),d.when?d.when(U(a.wait)).done(function(){l(a,b,h)}):l(a,b,h),e&&e.test("++",1,0,"end"),e&&e.end();else{e&&e.test("++",1,0,"initialize");var k,g,r,p,q,v,x;k={};switch(b.type.toLowerCase()){case "click":e&&e.test("++",1,0,"event click");k.type="GET";
break;case "submit":e&&e.test("++",1,b.target.method,"event submit");k.type=b.target.method.toUpperCase();"POST"===k.type&&(k.data=d(b.target).serializeArray());break;case "popstate":e&&e.test("++",1,0,"event popstate"),k.type="GET"}g=d.when?d.Deferred():null;e&&e.test("++",1,0,"setting");d.extend(!0,k,a.ajax,{xhr:a.callbacks.ajax.xhr?function(){p=n(a.callbacks.ajax.xhr,null,[b,a.parameter],a.callbacks.async);return p="object"===typeof p&&p||d.ajaxSettings.xhr()}:w,beforeSend:function(c,e){p=c;a.xhr&&
4>a.xhr.readyState&&a.xhr.abort();a.xhr=p;p.setRequestHeader(a.nss.requestHeader,"true");p.setRequestHeader(a.nss.requestHeader+"-Area",a.area);p.setRequestHeader(a.nss.requestHeader+"-CSS",a.load.css);p.setRequestHeader(a.nss.requestHeader+"-Script",a.load.script);n(a.callbacks.ajax.beforeSend,null,[b,a.parameter,p,e],a.callbacks.async)},dataFilter:a.callbacks.ajax.dataFilter?function(c,e){r=c;return n(a.callbacks.ajax.dataFilter,null,[b,a.parameter,r,e],a.callbacks.async)||r}:w,success:function(d,
h,k){r=d;q=h;p=k;(e=a.validate?a.validate.clone({name:"jquery.pjax.js - $.ajax()"}):!1)&&e.start();e&&e.test("++","success"===q,[c,a.location.href,p,q],"ajax success");n(a.callbacks.ajax.success,null,[b,a.parameter,r,q,p],a.callbacks.async)},error:function(d,h,k){p=d;q=h;v=k;(e=a.validate?a.validate.clone({name:"jquery.pjax.js - $.ajax()"}):!1)&&e.start();e&&e.test("++","abort"===q,[c,a.location.href,p,q,v],"ajax error");n(a.callbacks.ajax.error,null,[b,a.parameter,p,q,v],a.callbacks.async)},complete:function(d,
h){p=d;q=h;e&&e.test("++",1,0,"ajax complete");n(a.callbacks.ajax.complete,null,[b,a.parameter,p,q],a.callbacks.async);if(v){if(g&&g.reject(),a.fallback&&"abort"!==q)return"function"===typeof a.fallback?n(a.fallback,null,[b,c]):T(b,e)}else g&&g.resolve()||l(a,b);e&&e.end()}});k.url=c.replace(/([^#]+)(#[^\s]*)?$/,"$1"+(a.server.query?(c.match(/\?/)?"&":"?")+encodeURIComponent(a.server.query)+"=1":"")+"$2");e&&e.test("++",1,0,"ajax");u&&a.log.speed.name.push("request");u&&a.log.speed.time.push(a.speed.now()-
a.log.speed.fire);d.when&&d.when(g.promise(),U(a.wait)).done(function(){l(a,b)});d.ajax(k);!1!==n(a.callbacks.after,null,[b,a.parameter],a.callbacks.async)&&(e&&e.test("++",1,0,"end"),e&&e.end())}}function A(a){a=N(a);a=/^https?:/i.test(a)?a:"";a=a.replace(/[<>"{}|\\^\[\]`\s].*/,"");return encodeURI(decodeURI(a))}function N(a){if(String.prototype.trim)a=String(a).trim();else if(a=String(a).replace(/^\s+/,""))for(var b=a.length;--b;)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a}function n(a,
b,c,d){return"function"===typeof a?d?setTimeout(function(){a.apply(b,c)},0):a.apply(b,c):a}function R(a){var f=b.destination.hash.slice(1);return!(a||!f)&&d("#"+(f?f:", [name~="+f+"]")).first().each(function(){isFinite(d(this).offset().top)&&m.scrollTo(d(m).scrollLeft(),parseInt(Number(d(this).offset().top),10))}).length}function U(a){var b=d.Deferred();if(!a)return b.resolve();setTimeout(function(){b.resolve()},a);return b.promise()}function T(a,b){b&&b.test("++",1,0,"fallback()");b&&b.end();"click"===
a.type.toLowerCase()?m.location.href=a.currentTarget.href:"submit"===a.type.toLowerCase()?a.target.submit():"popstate"===a.type.toLowerCase()&&m.location.reload()}function P(a,b){var c=[];a.replace(b,function(a,b){c.push(b)});return c}function F(a,b){var c,d,h,l,e,g,k,m,r,p,q,v;c=a.scope;h=a.location.pathname+a.location.search+a.location.hash;l=a.destination.pathname+a.destination.search+a.destination.hash;"/"!==a.location.pathname.charAt(0)&&(h="/"+h,l="/"+l);d=h.replace(/^\//,"").replace(/([?#])/g,
"/$1").split("/");g=(b||h).replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");if(b){if(-1===b.indexOf("*"))return w;e=[];for(var s=g.length;s--;)"*"===g[s]&&e.unshift(d[s])}for(s=g.length+1;s--;)if(p=q=v=!1,d=g.slice(0,s).join("/").replace(/\/([?#])/g,"$1"),(d="/"+d+("/"===(b||h).charAt(d.length+1)?"/":""))&&d in c){if(!c[d]||!c[d].length)return!1;for(var x=0;k=c[d][x];x++)if(b||"rewrite"!==k||"function"!==typeof c.rewrite)if("inherit"===k)p=!0;else{k=(m="^"===k.charAt(0))?k.slice(1):k;k=(r="*"===
k.charAt(0))?k.slice(1):k;if(b&&-1!==k.indexOf("/*/"))for(var y=0,A=e.length;y<A;y++)k=k.replace("/*/","/"+e[y]+"/");if(!(!m&&q||(r?h.search(k):h.indexOf(k)))){if(m)return!1;q=!0}if(!(!m&&v||(r?l.search(k):l.indexOf(k)))){if(m)return!1;v=!0}}else if(k=F(a,n(c.rewrite,null,[a.destination.href])))q=v=!0;else if(!1===k)return!1;if(q&&v)return!0;if(!p)return w}}function M(a,f,c,d,h){var l=b.history;b.hashquery||(a=a.replace(/#.*/,""));switch(!0){case 1===arguments.length:for(var e=0,g;g=l.order[e];e++)a===
g&&(l.order.splice(e,1),l.size-=l.data[g].size,l.data[g]=null,delete l.data[g]);break;case "object"===typeof h:l.order.unshift(a);for(e=1;g=l.order[e];e++)a===g&&l.order.splice(e,1);if(l.data[a])break;if(l.size>l.config.size){e=b.history;g=e.order.length;for(var k;k=e.order[--g];)if(g>=e.config.length||b.timestamp>e.data[k].timestamp+e.config.expire)e.order.splice(g,1),e.size-=e.data[k].size,delete e.data[k]}c=parseInt(c||1.8*h.responseText.length,10);l.size=l.size||0;l.size+=c;l.data[a]={XMLHttpRequest:h,
textStatus:d,title:f,size:c,timestamp:(new Date).getTime()};break;default:return!1}return!0}function C(a){var f=b.history;b.hashquery||(a=a.replace(/#.*/,""));f.data[a]&&b.timestamp>f.data[a].timestamp+f.config.expire&&M(a);return f.data[a]}function X(){var a=b.validate?b.validate.clone({name:"jquery.pjax.js - database()"}):!1;a&&a.start();a&&(a.scope=function(a){return eval(a)});var f=1,c=b.database,d=b.gns,h,g;h=Math.floor(b.timestamp/864E5);if(!c||!d)return a&&a.end(),!1;f=parseInt(h-h%7+f,10);
a&&a.test("++",1,f,"version");h=c.open(d);h.onupgradeneeded=function(){a&&a.test("++",1,0,"onupgradeneeded()");for(var b=this.result,c=0,f=b.objectStoreNames.length;c<f;c++)b.deleteObjectStore(b.objectStoreNames[c]);g=b.createObjectStore(d,{keyPath:"id",autoIncrement:!1});g.createIndex("date","date",{unique:!1})};h.onsuccess=function(){a&&a.test("++",1,0,"onsuccess()");var c=this.result;c.objectStoreNames&&c.objectStoreNames.length||(h=c.createObjectStore(d,{keyPath:"id",autoIncrement:!1}),h.createIndex("date",
"date",{unique:!1}));b.database=this.result;var h="object"===typeof b.database&&b.database.transaction&&b.database.transaction(b.gns,"readwrite").objectStore(b.gns);h.get("_version").onsuccess=function(){(!this.result||this.result&&f>this.result.title)&&h.clear();var a=f,c="object"===typeof b.database&&b.database.transaction&&b.database.transaction(b.gns,"readwrite").objectStore(b.gns);c&&c.put({id:"_version",title:a});S();O(b.location.href,y.title)};a&&a.end()};h.onerror=function(){a&&a.test("++",
0,0,"onerror()");b.database=!1;c.deleteDatabase(d);a&&a.end()};h.onblocked=function(){a&&a.test("++",0,0,"onblocked()");b.database=!1}}function S(){var a="object"===typeof b.database&&b.database.transaction&&b.database.transaction(b.gns,"readwrite").objectStore(b.gns);a&&a.put({id:"_current",title:b.hashquery?m.location.href:m.location.href.replace(/#.*/,"")})}function O(a,f){var c="object"===typeof b.database&&b.database.transaction&&b.database.transaction(b.gns,"readwrite").objectStore(b.gns);c&&
(b.hashquery||(a=a.replace(/#.*/,"")),f?c.get(a).onsuccess=function(){c.put(d.extend(!0,{},this.result||{},{id:a,title:f,date:b.timestamp}));Y(c)}:c.get(a).onsuccess=function(){this.result&&this.result.title&&(y.title=this.result.title)})}function K(a,f){var c="object"===typeof b.database&&b.database.transaction&&b.database.transaction(b.gns,"readwrite").objectStore(b.gns),g=b.location.href,h=y.title,l=arguments.length;b.scroll.record&&c&&(b.hashquery||(g=g.replace(/#.*/,"")),c.get("_current").onsuccess=
function(){this.result&&this.result.title&&g===this.result.title&&(l?c.get(g).onsuccess=function(){c.put(d.extend(!0,{},this.result||{},{title:h,scrollX:parseInt(Number(a),10),scrollY:parseInt(Number(f),10)}))}:c.get(g).onsuccess=function(){this.result&&isFinite(this.result.scrollX)&&isFinite(this.result.scrollY)&&m.scrollTo(parseInt(Number(this.result.scrollX),10),parseInt(Number(this.result.scrollY),10))})})}function Y(a){var f=m.IDBKeyRange||m.webkitIDBKeyRange||m.mozIDBKeyRange||m.msIDBKeyRange;
a.count().onsuccess=function(){1E3<this.result&&(a.index("date").openCursor(f.upperBound(b.timestamp-2592E5)).onsuccess=function(){var b=this.result;b?(b["delete"](b.value.id),b["continue"]()):a.count().onsuccess=function(){1E3<this.result&&a.clear()}})}}function V(a,b,c){var g;switch(!0){case b===w:g=d.falsandtru[a];break;case c===w:g=a in d.falsandtru?d.falsandtru[a][b]:w;break;case c!==w:d.falsandtru[a]instanceof Object||(d.falsandtru[a]={}),d.falsandtru[a][b]instanceof Object&&c instanceof Object?
d.extend(!0,d.falsandtru[a][b],c):d.falsandtru[a][b]=c,g=d.falsandtru[a][b]}return g}if("function"===typeof this)return arguments.callee.apply(d(y),arguments);var g=window.validator instanceof Object?window.validator:!1;(g=g?validator.clone({name:"jquery.pjax.js",base:!0,timeout:{limit:s&&s.ajax&&s.ajax.timeout?s.ajax.timeout+g.timeout.limit:g.timeout.limit}}):!1)&&g.start();g&&g.test("++",1,s,"pjax()");g&&g.test("++",1,0,"initialize");var b=d.extend(!0,{},{id:0,gns:"pjax",ns:null,area:null,link:'a:not([target])[href^="/"]',
form:null,scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{},contentType:"text/html",cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,length:9,size:1048576,expire:18E5},callback:function(){},callbacks:{ajax:{},update:{url:{},title:{},content:{},css:{},script:{},cache:{load:{},save:{}},rendering:{},verify:{}},async:!1},parameter:null,load:{css:!1,script:!1,execute:!0,reload:null,reject:null,sync:!0,ajax:{dataType:"script"},rewrite:null},interval:300,wait:0,scroll:{delay:500,suspend:-100},fix:{location:!0,
history:!0,scroll:!0,reset:!1},hashquery:!1,fallback:!0,database:!0,server:{},speedcheck:!1},s),x=[b.gns];g&&g.test("++",1,b,"overwrite");d.extend(!0,b,{nss:{pjax:x.join("."),click:["click"].concat(x.join(":")).join("."),submit:["submit"].concat(x.join(":")).join("."),popstate:["popstate"].concat(x.join(":")).join("."),scroll:["scroll"].concat(x.join(":")).join("."),data:x.join(":"),class4html:x.join("-"),requestHeader:["X",x[0].replace(/^\w/,function(a){return a.toUpperCase()})].join("-"),array:x},
location:d("<a/>",{href:A(m.location.href)})[0],destination:d("<a/>")[0],fix:/Mobile(\/\w+)? Safari/i.test(m.navigator.userAgent)?{}:{location:!1,reset:!1},contentType:b.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),scroll:{record:!0,queue:[]},database:b.database?m.indexedDB||m.webkitIndexedDB||m.mozIndexedDB||m.msIndexedDB||null:!1,server:{query:b.server.query?b.server.query:b.gns},log:{script:{},speed:{}},history:{config:b.cache,order:[],data:{},size:0},timestamp:(new Date).getTime(),disable:!1,
landing:A(m.location.href),retry:!0,xhr:null,speed:{now:function(){return(new Date).getTime()}},options:s,validate:g});b.id=1;E[b.id]=b;H=G=void 0;I={on:function(){b.disable=!1},off:function(){b.disable=!0},click:function(a,b){b=b||{};return(b.href=a)?d("<a/>",b).one("click",1,G).click():!1},submit:function(a,b,c){var g=y.createDocumentFragment(),h;switch(!0){case "object"===typeof a:b=d(a);break;case !!c:b=b||{};b.action=a;a=c instanceof Array&&Array||c instanceof Object&&Object||w;for(var l in c){h=
c[l];switch(a){case Object:h=d("<textarea/>",{name:l}).val(h);break;case Array:h.attr=h.attr||{};h.attr.name=h.name;h=d(h.tag.indexOf("<")?"<"+h.tag+"/>":h.tag,h.attr||{}).val(h.value);break;default:continue}g.appendChild(h[0])}b=d("<form/>",b).append(g);break;default:return!1}b.one("submit",1,H).submit();return!0},setCache:M,getCache:C,clearCache:function(){for(var a=b.history,d=a.order.length,c;c=a.order[--d];)a.order.splice(d,1),a.size-=a.data[c].size,delete a.data[c];return!0}};d.extend(!0,d.pjax,
I);g&&g.test("++",1,0,"register");"pushState"in m.history&&m.history.pushState&&b.area&&(b.link||b.form)&&(d.falsandtru||(d.fn.falsandtru=V,d.falsandtru=V),d.falsandtru("share","history",b.history),b.history=d.falsandtru("share","history"),W(this));g&&g.end();return I}})(jQuery);

/*
 * 
 * pjax
 * 
 * ---
 * @Copyright(c) 2012, falsandtru
 * @license MIT http://opensource.org/licenses/mit-license.php
 * @version 1.31.2
 * @updated 2014/02/14
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(l,r,C,B){function E(b,f,e,m,c,a){var k=this;switch(!0){case "object"===typeof a:k=k instanceof b?k:b(e);k=c.setProperties.call(k,a.ns||"",null);if(!a.area&&!a.scope)return k;break;default:return k=k instanceof b?k:b[c.name],c.setProperties.call(k,null,null)}var d;d=b.extend(!0,{id:0,gns:c.name,ns:null,area:null,link:"a:not([target])",form:null,scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{},contentType:"text/html",cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,length:9,size:1048576,
expire:18E5},callback:function(){},callbacks:{ajax:{},update:{url:{},title:{},content:{},scroll:{},css:{},script:{},cache:{load:{},save:{}},rendering:{},verify:{}},async:!1},parameter:null,load:{css:!1,script:!1,execute:!0,reload:null,reject:null,sync:!0,ajax:{dataType:"script"},rewrite:null},interval:300,wait:0,scroll:{delay:500},fix:{location:!0,history:!0,scroll:!0,reset:!1},hashquery:!1,fallback:!0,database:!0,server:{},location:b("<a/>",{href:c.canonicalizeURL(f.location.href)})[0],destination:b("<a/>",
{href:c.canonicalizeURL(f.location.href)})[0]},a);d.nss={array:[c.name].concat(d.ns&&String(d.ns).split(".")||[])};b.extend(!0,d=d.scope&&c.scope(d)||d,{nss:{name:d.ns||"",event:d.nss.array.join("."),alias:c.alias?[c.alias].concat(d.nss.array.slice(1)).join("."):!1,click:["click"].concat(d.nss.array.join(":")).join("."),submit:["submit"].concat(d.nss.array.join(":")).join("."),popstate:["popstate"].concat(d.nss.array.join(":")).join("."),scroll:["scroll"].concat(d.nss.array.join(":")).join("."),data:d.nss.array.join("-"),
class4html:d.nss.array.join("-"),requestHeader:["X",d.nss.array[0].replace(/^\w/,function(d){return d.toUpperCase()})].join("-")},areaback:d.area,fix:/Mobile(\/\w+)? Safari/i.test(f.navigator.userAgent)?{}:{location:!1,reset:!1},contentType:d.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),scroll:{record:!0,queue:[]},database:d.database?{IDBFactory:f.indexedDB||f.webkitIndexedDB||f.mozIndexedDB||f.msIndexedDB||null,IDBRequest:null}:!1,server:{query:d.server.query?d.server.query:d.gns},log:{script:{},
speed:{}},history:{config:d.cache,order:[],data:{},size:0},timestamp:(new Date).getTime(),disable:!1,landing:c.canonicalizeURL(f.location.href),retry:!0,xhr:null,speed:{now:function(){return(new Date).getTime()}},option:a});c.check()&&c.registrate.call(k,b,f,e,m,c,d);return k}var h;h={name:"pjax",alias:"",ids:[],settings:[0],count:0,parseHTML:null,setAlias:function(b){h.alias="string"===typeof b?b:h.alias;h.name===h.alias||l[h.alias]||(l[h.name][h.alias]=l.fn[h.name],l.fn[h.alias]=l[h.alias]=l.fn[h.name])},
setProperties:function(b,f){var e=this;if(e instanceof l||e===l[h.name])e=e instanceof l&&f!==B?e.add(f):e,e[h.name]=l[h.name],e.on=function(){h.settings[1].disable=!1},e.off=function(){h.settings[1].disable=!0},e.click=function(b,c){var a;switch(!0){case "object"===typeof b:a=l(b);break;case !!b:c=c||{};c.href=b;a=l("<a/>",c);break;default:return this}return a.first().one("click",1,h.click).click()},e.submit=function(b,c,a){var k=C.createDocumentFragment(),d;switch(!0){case "object"===typeof b:c=
l(b);break;case !!a:c=c||{};c.action=b;b=a instanceof Array&&Array||a instanceof Object&&Object||B;for(var f in a){d=a[f];switch(b){case Object:d=l("<textarea/>",{name:f}).val(d);break;case Array:d.attr=d.attr||{};d.attr.name=d.name;d=l(d.tag.indexOf("<")?"<"+d.tag+"/>":d.tag,d.attr||{}).val(d.value);break;default:continue}k.appendChild(d[0])}c=l("<form/>",c).append(k);break;default:return this}return c.first().one("submit",1,h.submit).submit()},e.setCache=function(b,c,a,k){var d=h.settings[1];if(!d||
!d.history)return!1;var f,e,v;f=d.history;b=b||h.canonicalizeURL(r.location.href);d.hashquery||(b=b.replace(/#.*/,""));switch(arguments.length){case 0:case 1:return arguments.callee.call(this,b,h.trim(C.documentElement.outerHTML));default:f.order.unshift(b);for(e=1;v=f.order[e];e++)b===v&&f.order.splice(e,1);f.size>f.config.size&&l[h.name].cleanCache();l[h.name].getCache(b);e=l("<span/>").html(h.find((c||"")+((k||{}).responseText||"")+"<title></title>",/<title[^>]*?>([^<]*?)<\/title>/i).shift()).text();
v=parseInt(1.8*((c||"").length+((k||{}).responseText||"").length)||1048576,10);f.size=f.size||0;f.size+=v;f.data[b]=l.extend(!0,f.data[b]||{},{XMLHttpRequest:k,textStatus:a,data:c,size:v,timestamp:(new Date).getTime()});d.database&&d.fix.history&&h.dbTitle(b,e)}return f.data[b]},e.getCache=function(b){var c=h.settings[1];if(!c||!c.history)return!1;var a;a=c.history;b=b||h.canonicalizeURL(r.location.href);c.hashquery||(b=b.replace(/#.*/,""));a.data[b]&&c.timestamp>a.data[b].timestamp+a.config.expire&&
l[h.name].removeCache(b);return a.data[b]},e.removeCache=function(b){var c=h.settings[1];if(!c||!c.history)return!1;var a;a=c.history;b=b||h.canonicalizeURL(r.location.href);c.hashquery||(b=b.replace(/#.*/,""));for(var c=0,k;k=a.order[c];c++)b===k&&(a.order.splice(c,1),a.size-=a.data[k].size,a.data[k]=null,delete a.data[k]);return!0},e.clearCache=function(){var b=h.settings[1];if(!b||!b.history)return!1;for(var b=b.history,c=b.order.length,a;a=b.order[--c];)b.order.splice(c,1),b.size-=b.data[a].size,
delete b.data[a];return!0},e.cleanCache=function(){var b=h.settings[1];if(!b||!b.history)return!1;for(var c=b.history,a=c.order.length,k;k=c.order[--a];)if(a>=c.config.length||k in c.data&&b.timestamp>c.data[k].timestamp+c.config.expire)c.order.splice(a,1),c.size-=c.data[k].size,delete c.data[k];return!0};return e},check:function(){return h.supportPushState()},supportPushState:function(){return"pushState"in r.history&&r.history.pushState},registrate:function(b,f,e,h,c,a){a.id=1;c.ids.push(a.id);c.settings[a.id]=
a;c.share();c.database();a.load.script&&b("script").each(function(){var k=this,d,k="function"===typeof a.load.rewrite?c.fire(a.load.rewrite,null,[k.cloneNode()])||k:k;(d=k.src)&&d in a.log.script||!d||a.load.reload&&b(k).is(a.load.reload)||(a.log.script[d]=!0)});b(this).undelegate(a.link,a.nss.click).delegate(a.link,a.nss.click,a.id,c.click=function(a){a.timeStamp=(new Date).getTime();var d=c.settings[1];if(d.disable||a.isDefaultPrevented())return a.preventDefault();d.location.href=c.canonicalizeURL(f.location.href);
d.destination.href=c.canonicalizeURL(this.href);if(d.location.protocol===d.destination.protocol&&d.location.host===d.destination.host&&!(1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)){if(!c.fire(d.hashquery,null,[a,d.parameter,d.destination.href,d.location.href])&&d.location.pathname+d.location.search===d.destination.pathname+d.destination.search)return d.destination.hash&&c.hashscroll(),a.preventDefault();var q,n;q=d.destination.href;d.area=c.fire(d.areaback,null,[a,d.parameter,d.destination.href,
d.location.href]);d.timestamp=a.timeStamp;d.landing&&(d.landing=!1);if(b(d.area).length&&(!d.scope||c.scope(d)))return d.cache[a.type.toLowerCase()]&&(n=b[c.name].getCache(q)),c.drive(b,f,e,h,c,d,a,q,!0,n),a.preventDefault()}});b(this).undelegate(a.form,a.nss.submit).delegate(a.form,a.nss.submit,a.id,c.submit=function(a){a.timeStamp=(new Date).getTime();var d=c.settings[1];if(d.disable||a.isDefaultPrevented())return a.preventDefault();d.location.href=c.canonicalizeURL(f.location.href);d.destination.href=
c.canonicalizeURL(this.action);if(!(1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)){var q,n;q=d.destination.href=c.canonicalizeURL(d.destination.href.replace(/[?#].*/,"")+("GET"===a.target.method.toUpperCase()?"?"+b(a.target).serialize():""));d.area=c.fire(d.areaback,null,[a,d.parameter,d.destination.href,d.location.href]);d.timestamp=a.timeStamp;d.landing&&(d.landing=!1);if(b(d.area).length&&(!d.scope||c.scope(d)))return d.cache[a.type.toLowerCase()]&&d.cache[a.target.method.toLowerCase()]&&
(n=b[c.name].getCache(q)),c.drive(b,f,e,h,c,d,a,q,!0,n),a.preventDefault()}});b(f).unbind(a.nss.popstate).bind(a.nss.popstate,a.id,c.popstate=function(a){a.timeStamp=(new Date).getTime();var d=c.settings[1];if(d.disable||a.isDefaultPrevented())return a.preventDefault();d.destination.href=c.canonicalizeURL(f.location.href);if(d.location.href===d.destination.href)return a.preventDefault();var q,n;if(!c.fire(d.hashquery,null,[a,d.parameter,d.destination.href,d.location.href])&&d.location.pathname+d.location.search===
d.destination.pathname+d.destination.search)return a.preventDefault();q=d.destination.href;d.area=c.fire(d.areaback,null,[a,d.parameter,d.destination.href,d.location.href]);d.timestamp=a.timeStamp;if(d.landing){if(d.landing.href===q){d.landing=!1;return}d.landing=!1}if(b(d.area).length)return d.database&&d.fix.history&&c.dbTitle(q),d.cache[a.type.toLowerCase()]&&(n=b[c.name].getCache(q)),c.drive(b,f,e,h,c,d,a,q,!1,n),a.preventDefault()});a.database&&a.fix.scroll&&b(f).unbind(a.nss.scroll).bind(a.nss.scroll,
a.id,function(a,d){var e=c.settings[1],h;if(e.scroll.delay){for(;h=e.scroll.queue.shift();)clearTimeout(h);h=setTimeout(function(){for(;h=e.scroll.queue.shift();)clearTimeout(h);c.dbScroll(b(f).scrollLeft(),b(f).scrollTop())},e.scroll.delay);e.scroll.queue.push(h)}else c.dbScroll(b(f).scrollLeft(),b(f).scrollTop())});(function(){function a(d){try{var c=d&&d("<body><noscript>DOMParser</noscript></body>");return"DOMParser"===b(c).find("noscript").text()}catch(f){}}var d=f.DOMParser;c.parseHTML=function(b){return d&&
d.prototype&&(new d).parseFromString(b,"text/html")};a(c.parseHTML)||(c.parseHTML=function(b){var a;e.implementation&&e.implementation.createHTMLDocument&&(a=e.implementation.createHTMLDocument(""),"object"===typeof a.activeElement&&(a.open(),a.write(b),a.close()));return a},a(c.parseHTML)||(c.parseHTML=!1))})()},drive:function(b,f,e,h,c,a,k,d,l,n){function r(a,b,c,f,e,g,h,k){a:{var m=g.callbacks.update;if(!1!==e.fire(m.before,null,[h,g.parameter,s,t,p,k],g.callbacks.async)){var n,u,v;try{if(!k&&
-1===(p.getResponseHeader("Content-Type")||"").toLowerCase().search(g.contentType))throw Error("throw: content-type mismatch");k&&!1!==e.fire(m.cache.load.before,null,[h,g.parameter,k],g.callbacks.async)&&(p=k.XMLHttpRequest||p,s=p.responseText,t=k.textStatus||t,u=k.css,v=k.script,e.fire(m.cache.load.after,null,[h,g.parameter,k],g.callbacks.async));var w,y,z,x,A,B,F;B=g.area.split(/\s*,\s*/);y=(p.responseText||"").replace(/<noscript[^>]*>(?:.|[\n\r])*?<\/noscript>/gim,function(a){return a.replace(/<script(?:.|[\n\r])*?<\/script>/gim,
"")});if(k&&k.data){x=k.data;z=a(e.parseHTML&&x&&e.parseHTML(x)||x);y=y.replace(/<title[^>]*?>([^<]*?)<\/title>/i,function(a){return e.find(x,/(<title[^>]*?>[^<]*?<\/title>)/i).shift()||a});w=a(e.parseHTML&&y&&e.parseHTML(y)||y);for(var C=0,D,H;D=B[C++];)w.find(D).add(A?"":w.filter(D)).html(z.find(D).add(A?"":z.filter(D)).contents())}else w=a(e.parseHTML&&y&&e.parseHTML(y)||y);switch(!0){case !!w.find("html")[0]:A=1;w.find("noscript").each(function(){this.children.length&&a(this).text(this.innerHTML)});
break;case !!w.filter("title")[0]:A=0;break;default:A=!1}switch(A){case 1:n=w.find("title").text();break;case 0:n=w.filter("title").text();break;case !1:n=a("<span/>").html(e.find(y,/<title[^>]*?>([^<]*?)<\/title>/i).shift()).text()}if(!a(g.area).length||!w.find(g.area).add(A?"":w.filter(g.area)).length)throw Error("throw: area length mismatch");a(b).trigger(g.gns+".unload");!1!==e.fire(m.url.before,null,[h,g.parameter,s,t,p],g.callbacks.async)&&(l&&d!==g.location.href&&b.history.pushState(e.fire(g.state,
null,[h,g.parameter,g.destination.href,g.location.href]),b.opera||-1!==b.navigator.userAgent.toLowerCase().indexOf("opera")?n:c.title,d),g.location.href=d,l&&g.fix.location&&(a[e.name].off(),b.history.back(),b.history.forward(),a[e.name].on()),e.fire(m.url.after,null,[h,g.parameter,s,t,p],g.callbacks.async));!1!==e.fire(m.title.before,null,[h,g.parameter,s,t,p],g.callbacks.async)&&(c.title=n,g.database&&g.fix.history&&e.dbTitle(d,n),e.fire(m.title.after,null,[h,g.parameter,s,t,p],g.callbacks.async));
g.database&&e.dbCurrent();if(!1!==e.fire(m.content.before,null,[h,g.parameter,s,t,p],g.callbacks.async)){a(g.area).children("."+g.nss.class4html+"-check").remove();F=a("<div/>",{"class":g.nss.class4html+"-check",style:"background: none !important; display: block !important; visibility: hidden !important; position: absolute !important; top: 0 !important; left: 0 !important; z-index: -9999 !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; font-size: 12px !important; text-indent: 0 !important;"}).text(g.gns);
for(C=0;D=B[C++];)H=w.find(D).add(A?"":w.filter(D)).clone().find("script").remove().end().contents(),a(D).html(H).append(F.clone());F=a(g.area).children("."+g.nss.class4html+"-check");a(c).trigger(g.gns+".DOMContentLoaded");e.fire(m.content.after,null,[h,g.parameter,s,t,p],g.callbacks.async)}var I=function(d){if(!1!==e.fire(m.scroll.before,null,[h,g.parameter],g.callbacks.async)){var c,f;switch(h.type.toLowerCase()){case "click":case "submit":c=d&&"function"===typeof g.scrollLeft?e.fire(g.scrollLeft,
null,[h,g.parameter,g.destination.href,g.location.href]):g.scrollLeft;c=0<=c?c:0;c=!1===c||null===c?a(b).scrollLeft():parseInt(Number(c),10);f=d&&"function"===typeof g.scrollTop?e.fire(g.scrollTop,null,[h,g.parameter,g.destination.href,g.location.href]):g.scrollTop;f=0<=f?f:0;f=!1===f||null===f?a(b).scrollTop():parseInt(Number(f),10);a(b).scrollTop()===f&&a(b).scrollLeft()===c||b.scrollTo(c,f);d&&g.database&&g.fix.scroll&&e.dbScroll(c,f);break;case "popstate":d&&g.database&&g.fix.scroll&&e.dbScroll()}e.fire(m.scroll.after,
null,[h,g.parameter],g.callbacks.async)}};I(!1);k&&k.XMLHttpRequest||!g.cache.click&&!g.cache.submit&&!g.cache.popstate||"submit"===h.type.toLowerCase()&&!g.cache[h.target.method.toLowerCase()]||!1===e.fire(m.cache.save.before,null,[h,g.parameter,k],g.callbacks.async)||(a[e.name].setCache(d,x||null,t,p),k=a[e.name].getCache(d),e.fire(m.cache.save.after,null,[h,g.parameter,k],g.callbacks.async));var J=function(b){if(!1!==e.fire(m.rendering.before,null,[h,g.parameter],g.callbacks.async)){var c=0;(function(){F.filter(function(){return this.clientWidth||
this.clientHeight||a(this).is(":hidden")}).length===F.length||100<=c?E(b):F.length&&(c++,setTimeout(arguments.callee,g.interval))})()}},E=function(c){F.remove();g.scroll.record=!0;e.hashscroll("popstate"===h.type.toLowerCase())||I(!0);a(b).trigger(g.gns+".load");e.fire(c);e.fire(m.rendering.after,null,[h,g.parameter],g.callbacks.async)};switch(A){case 1:case 0:w.find("noscript").remove();break;case !1:y=y.replace(/^(?:.|[\n\r])*<body[^>]*>.*[\n\r]*.*[\n\r]*/im,function(a){return a.replace(/\x3c!--\[(?:.|[\n\r])*?<!\[endif\]--\x3e/gim,
"")}),y=y.replace(/<noscript(?:.|[\n\r])*?<\/noscript>/gim,"")}var G=function(c){if(g.load.script&&!1!==e.fire(m.script.before,null,[h,g.parameter,s,t,p],g.callbacks.async)){var f;f=(k=a[e.name].getCache(d))&&!k.script;switch(v||A){case 1:case 0:v=w.find("script").add(A?"":w.filter("script")).clone().get();break;case !1:v=e.find(y,/(?:[^\'\"]|^\s*?)(<script[^>]*?>(?:.|[\n\r])*?<\/script>)(?:[^\'\"]|\s*?$)/gim)}k&&k.script&&v&&v.length!==k.script.length&&(f=!0);f&&(k.script=[]);for(var l=0,n,q;n=v[l];l++)if(n=
"object"===typeof n?f?a(n.outerHTML)[0]:n:a(n)[0],n="function"===typeof g.load.rewrite?e.fire(g.load.rewrite,null,[n.cloneNode()])||n:n,f&&(k.script[l]=n),a(n).is(c)&&(q=e.trim(n.src||""),!(q&&q in g.log.script||g.load.reject&&a(n).is(g.load.reject)))){!q||g.load.reload&&a(n).is(g.load.reload)||(g.log.script[q]=!0);try{q?a.ajax(a.extend(!0,{},g.ajax,g.load.ajax,{url:n.src,async:!!n.async,global:!1})):"object"!==typeof n||n.type&&-1===n.type.toLowerCase().indexOf("text/javascript")||b.eval.call(b,
(n.text||n.textContent||n.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/"))}catch(u){break}}e.fire(m.script.after,null,[h,g.parameter,s,t,p],g.callbacks.async)}};if(!1!==e.fire(m.verify.before,null,[h,g.parameter],g.callbacks.async)){if(d===e.canonicalizeURL(b.location.href))g.retry=!0;else if(g.retry)g.retry=!1,e.drive(a,b,c,f,e,g,h,b.location.href,!1,g.cache[h.type.toLowerCase()]&&a[e.name].getCache(e.canonicalizeURL(b.location.href)));else throw Error("throw: location mismatch");e.fire(m.verify.after,
null,[h,g.parameter],g.callbacks.async)}(function(){if(g.load.css&&!1!==e.fire(m.css.before,null,[h,g.parameter,s,t,p],g.callbacks.async)){var b,c=[],f=a('link[rel~="stylesheet"], style');b=(k=a[e.name].getCache(d))&&!k.css;switch(u||A){case 1:case 0:u=w.find('link[rel~="stylesheet"], style').add(A?"":w.filter('link[rel~="stylesheet"], style')).clone().get();break;case !1:u=e.find(y,/(<link[^>]*?rel=.[^"\']*?stylesheet[^>]*?>|<style[^>]*?>(?:.|[\n\r])*?<\/style>)/gim)}k&&k.css&&u&&u.length!==k.css.length&&
(b=!0);b&&(k.css=[]);for(var n=0,l,q;l=u[n];n++){l="object"===typeof l?b?a(l.outerHTML)[0]:l:a(l)[0];l="function"===typeof g.load.rewrite?e.fire(g.load.rewrite,null,[l.cloneNode()])||l:l;b&&(k.css[n]=l);q=e.trim(l.href||l.innerHTML||"");for(var r=0,v;v=f[r];r++)if(!c.length&&e.trim(v.href||v.innerHTML||"")===q){f=f.not(v);l=null;break}else if(!r&&c.length)break;l&&c.push(l)}f.remove();a("head").append(c);e.fire(m.css.after,null,[h,g.parameter,s,t,p],g.callbacks.async)}})();a(c).trigger(g.gns+".ready");
a(b).bind(g.gns+".rendering",function(b){a(b.target).unbind(b.type+".rendering",arguments.callee);G(":not([defer]), :not([src])");g.load.sync?J(function(){G("[src][defer]")}):(J(),G("[src][defer]"))}).trigger(g.gns+".rendering");if(!1===e.fire(m.success,null,[h,g.parameter,s,t,p],g.callbacks.async))break a;if(!1===e.fire(m.complete,null,[h,g.parameter,s,t,p],g.callbacks.async))break a;if(!1===e.fire(g.callback,null,[h,g.parameter,s,t,p],g.callbacks.async))break a}catch(L){k&&a[e.name].removeCache(d);
if(!1===e.fire(m.error,null,[h,g.parameter,s,t,p],g.callbacks.async))break a;if(!1===e.fire(m.complete,null,[h,g.parameter,s,t,p],g.callbacks.async))break a;if(g.fallback)return"function"===typeof g.fallback?e.fire(g.fallback,null,[h,g.parameter,g.destination.href,g.location.href]):e.fallback(h)}e.fire(m.after,null,[h,g.parameter,s,t,p],g.callbacks.async)}}}a.scroll.record=!1;a.fix.reset&&/click|submit/.test(k.type.toLowerCase())&&f.scrollTo(b(f).scrollLeft(),0);if(!1!==c.fire(a.callbacks.before,
null,[k,a.parameter],a.callbacks.async))if(n&&n.XMLHttpRequest)b.when?b.when(c.wait(c.fire(a.wait,null,[k,a.parameter,a.destination.href,a.location.href]))).done(function(){r(b,f,e,h,c,a,k,n)}):r(b,f,e,h,c,a,k,n);else{var u,z,s,p,t,x;u={};switch(k.type.toLowerCase()){case "click":u.type="GET";break;case "submit":u.type=k.target.method.toUpperCase();"POST"===u.type&&(u.data=b(k.target).serializeArray());break;case "popstate":u.type="GET"}z=b.when?b.Deferred():null;b.extend(!0,u,a.ajax,{xhr:a.callbacks.ajax.xhr?
function(){p=c.fire(a.callbacks.ajax.xhr,null,[k,a.parameter],a.callbacks.async);return p="object"===typeof p&&p||b.ajaxSettings.xhr()}:h,beforeSend:function(b,d){p=b;a.xhr&&4>a.xhr.readyState&&a.xhr.abort();a.xhr=p;p.setRequestHeader(a.nss.requestHeader,"true");p.setRequestHeader(a.nss.requestHeader+"-Area",a.area);p.setRequestHeader(a.nss.requestHeader+"-CSS",a.load.css);p.setRequestHeader(a.nss.requestHeader+"-Script",a.load.script);c.fire(a.callbacks.ajax.beforeSend,null,[k,a.parameter,p,d],a.callbacks.async)},
dataFilter:a.callbacks.ajax.dataFilter?function(b,d){s=b;return c.fire(a.callbacks.ajax.dataFilter,null,[k,a.parameter,s,d],a.callbacks.async)||s}:h,success:function(b,d,e){s=b;t=d;p=e;c.fire(a.callbacks.ajax.success,null,[k,a.parameter,s,t,p],a.callbacks.async)},error:function(b,d,e){p=b;t=d;x=e;c.fire(a.callbacks.ajax.error,null,[k,a.parameter,p,t,x],a.callbacks.async)},complete:function(d,l){p=d;t=l;c.fire(a.callbacks.ajax.complete,null,[k,a.parameter,p,t],a.callbacks.async);if(x){if(z&&z.reject(),
a.fallback&&"abort"!==t)return"function"===typeof a.fallback?c.fire(a.fallback,null,[k,a.parameter,a.destination.href,a.location.href]):c.fallback(k)}else z&&z.resolve()||r(b,f,e,h,c,a,k,n)}});u.url=d.replace(/([^#]+)(#[^\s]*)?$/,"$1"+(a.server.query?(d.match(/\?/)?"&":"?")+encodeURIComponent(a.server.query)+"=1":"")+"$2");b.when&&b.when(z.promise(),c.wait(c.fire(a.wait,null,[k,a.parameter,a.destination.href,a.location.href]))).done(function(){r(b,f,e,h,c,a,k,n)});b.ajax(u);c.fire(a.callbacks.after,
null,[k,a.parameter],a.callbacks.async)}},canonicalizeURL:function(b){b=h.trim(b);b=/^https?:/i.test(b)?b:"";b=b.replace(/[<>"{}|\\^\[\]`\s].*/,"");return encodeURI(decodeURI(b))},trim:function(b){if(String.prototype.trim)b=String(b).trim();else if(b=String(b).replace(/^\s+/,""))for(var f=b.length;--f;)if(/\S/.test(b.charAt(f))){b=b.substring(0,f+1);break}return b},fire:function(b,f,e,h){return"function"===typeof b?h?setTimeout(function(){b.apply(f,e)},0):b.apply(f,e):b},hashscroll:function(b){var f=
h.settings[1].destination.hash.slice(1);return!(b||!f)&&l("#"+(f?f:", [name~="+f+"]")).first().each(function(){isFinite(l(this).offset().top)&&r.scrollTo(l(r).scrollLeft(),parseInt(Number(l(this).offset().top),10))}).length},wait:function(b){var f=l.Deferred();if(!b)return f.resolve();setTimeout(function(){f.resolve()},b);return f.promise()},fallback:function(b){switch(b.type.toLowerCase()){case "click":r.location.href=b.currentTarget.href;break;case "submit":b.target.submit();break;case "popstate":r.location.reload()}},
find:function(b,f){var e=[];b.replace(f,function(b,c){e.push(c)});return e},scope:function(b,f){var e,m,c,a,k,d,q,n,r,u,z,s,p,t;e=b.scope;c=b.location.href.replace(/.+?\w(\/[^#?]*).*/,"$1");a=b.destination.href.replace(/.+?\w(\/[^#?]*).*/,"$1");m=c.replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");d=(f||c).replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");if(f){if(-1===f.indexOf("*"))return B;k=[];for(var x=d.length;x--;)"*"===d[x]&&k.unshift(m[x])}for(x=d.length+1;x--;)if(u=z=s=p=B,m=d.slice(0,
x).join("/").replace(/\/([?#])/g,"$1"),(m="/"+m+("/"===(f||c).charAt(m.length+1)?"/":""))&&m in e){if(!e[m]||!e[m].length)return!1;for(var C=0;q=e[m][C];C++)if(!1!==s&&!1!==p)if("rewrite"!==q||"function"!==typeof e.rewrite||f)if("inherit"===q)z=!0;else if("string"===typeof q){q=(n="^"===q.charAt(0))?q.slice(1):q;q=(r="*"===q.charAt(0))?q.slice(1):q;if(f&&-1!==q.indexOf("/*/"))for(var E=0,K=k.length;E<K;E++)q=q.replace("/*/","/"+k[E]+"/");if(!(!n&&s||(r?c.search(q):c.indexOf(q)))){if(n)return!1;s=
!0}if(!(!n&&p||(r?a.search(q):a.indexOf(q)))){if(n)return!1;p=!0}}else"object"===typeof q&&(t=q);else if(u=arguments.callee(b,h.fire(e.rewrite,null,[b.destination.href])))s=p=!0;else if(!1===u)return!1;if(s&&p)return b.option||u?l.extend(!0,{},u||{}):l.extend(!0,{},b,t||{},u||{});if(!z)break}},database:function(b){var f=h.settings[1],e,m,c,a,k,d;e=1;m=f.database&&f.database.IDBFactory;c=f.gns;d=Math.floor(f.timestamp/864E5);b=b||0;if(!m||!c||3<b)return f.database=!1;try{e=parseInt(d-d%7+e,10),a=m.open(c),
a.onblocked=function(){},a.onupgradeneeded=function(){var a=this.result;try{for(var b=a.objectStoreNames?a.objectStoreNames.length:0;b--;)a.deleteObjectStore(a.objectStoreNames[b]);a.createObjectStore(f.gns,{keyPath:"id",autoIncrement:!1}).createIndex("date","date",{unique:!1})}catch(c){}},a.onsuccess=function(){try{var a=this.result;f.database.IDBRequest=a;k=h.dbStore();k.get("_version").onsuccess=function(){this.result&&e!==this.result.title?(f.database.IDBRequest=null,a.close(),m.deleteDatabase(c),
h.database()):(h.dbVersion(e),h.dbCurrent(),h.dbTitle(f.location.href,C.title),h.dbScroll(l(r).scrollLeft(),l(r).scrollTop()))}}catch(d){f.database.IDBRequest=null,a.close(),m.deleteDatabase(c),setTimeout(function(){h.database(++b)},1E3)}},a.onerror=function(d){f.database.IDBRequest=null;a.close();m.deleteDatabase(c);setTimeout(function(){h.database(++b)},1E3)}}catch(q){f.database.IDBRequest=null}},dbStore:function(){var b=h.settings[1];return typeof b.database.IDBRequest&&b.database.IDBRequest.transaction(b.gns,
"readwrite").objectStore(b.gns)},dbCurrent:function(){var b=h.settings[1],f=h.dbStore();f&&f.put({id:"_current",title:b.hashquery?r.location.href:r.location.href.replace(/#.*/,"")})},dbVersion:function(b){var f=h.dbStore();f&&f.put({id:"_version",title:b})},dbTitle:function(b,f){var e=h.settings[1],m=h.dbStore();m&&(e.hashquery||(b=b.replace(/#.*/,"")),f?m.get(b).onsuccess=function(){m.put(l.extend(!0,{},this.result||{},{id:b,title:f,date:e.timestamp}));h.dbClean(m)}:m.get(b).onsuccess=function(){this.result&&
this.result.title&&(C.title=this.result.title)})},dbScroll:function(b,f){var e=h.settings[1],m=h.dbStore(),c=e.location.href,a=arguments.length;e.scroll.record&&m&&(e.hashquery||(c=c.replace(/#.*/,"")),m.get("_current").onsuccess=function(){this.result&&this.result.title&&c===this.result.title&&(a?m.get(c).onsuccess=function(){m.put(l.extend(!0,{},this.result||{},{scrollX:parseInt(Number(b),10),scrollY:parseInt(Number(f),10)}))}:m.get(c).onsuccess=function(){this.result&&isFinite(this.result.scrollX)&&
isFinite(this.result.scrollY)&&r.scrollTo(parseInt(Number(this.result.scrollX),10),parseInt(Number(this.result.scrollY),10))})})},dbClean:function(b){var f=h.settings[1],e=r.IDBKeyRange||r.webkitIDBKeyRange||r.mozIDBKeyRange||r.msIDBKeyRange;b.count().onsuccess=function(){1E3<this.result&&(b.index("date").openCursor(e.upperBound(f.timestamp-2592E5)).onsuccess=function(){var e=this.result;e?(e["delete"](e.value.id),e["continue"]()):b.count().onsuccess=function(){1E3<this.result&&b.clear()}})}},share:function(){var b=
h.settings[1];l.falsandtru||(l.fn.falsandtru=l.falsandtru=h.falsandtru);l.falsandtru("share","history",b.history);b.history=l.falsandtru("share","history")},falsandtru:function(b,f,e){var h;switch(!0){case f===B:h=l.falsandtru[b];break;case e===B:h=b in l.falsandtru?l.falsandtru[b][f]:B;break;case e!==B:l.falsandtru[b]instanceof Object||(l.falsandtru[b]={}),l.falsandtru[b][f]instanceof Object&&e instanceof Object?l.extend(!0,l.falsandtru[b][f],e):l.falsandtru[b][f]=e,h=l.falsandtru[b][f]}return h}};
(function(b,f,e,h,c){b.fn[c.name]=b[c.name]=function(){return E.apply(this,[b,f,e,h,c].concat([].slice.call(arguments)))};c.setProperties.call(b[c.name])}).apply(this,[].slice.call(arguments).concat([h]))})(jQuery,window,document,void 0);

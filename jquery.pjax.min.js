/*
 * 
 * pjax
 * 
 * ---
 * @Copyright(c) 2012, falsandtru
 * @license MIT http://opensource.org/licenses/mit-license.php
 * @version 1.28.1
 * @updated 2014/01/07
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(l,r,B,x){function F(a,c,e,s,d,b){var n=b.validator instanceof Object?b.validator:!1;(n=n?n.clone({name:"jquery.pjax.js",base:!0,timeout:{limit:b&&b.ajax&&b.ajax.timeout?b.ajax.timeout+n.timeout.limit:n.timeout.limit}}):!1)&&n.start();n&&n.test("++",1,b,"pjax()");n&&n.test("++",1,0,"initialize");var f=this;switch(!0){case "object"===typeof b:f=f instanceof a?f:a(e);f=d.setProperties.call(f,b.ns||"",null);if(!b.area)return f;break;default:return f=f instanceof a?f:a[d.name],d.setProperties.call(f,
null,null)}var h;h=a.extend(!0,{id:0,gns:d.name,ns:null,area:null,link:"a:not([target])",form:null,scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{},contentType:"text/html",cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,length:9,size:1048576,expire:18E5},callback:function(){},callbacks:{ajax:{},update:{url:{},title:{},content:{},css:{},script:{},cache:{load:{},save:{}},rendering:{},verify:{}},async:!1},parameter:null,load:{css:!1,script:!1,execute:!0,reload:null,reject:null,sync:!0,ajax:{dataType:"script"},
rewrite:null},interval:300,wait:0,scroll:{delay:500,suspend:-100},fix:{location:!0,history:!0,scroll:!0,reset:!1},hashquery:!1,fallback:!0,database:!0,server:{},location:a("<a/>",{href:d.canonicalizeURL(c.location.href)})[0],destination:a("<a/>",{href:d.canonicalizeURL(c.location.href)})[0],speedcheck:!1},b);h.nss={array:[d.name].concat(h.ns&&String(h.ns).split(".")||[])};n&&n.test("++",1,h,"overwrite");a.extend(!0,h=h.scope&&d.scope(h)||h,{nss:{name:h.ns||"",event:h.nss.array.join("."),alias:d.alias?
[d.alias].concat(h.nss.array.slice(1)).join("."):!1,click:["click"].concat(h.nss.array.join(":")).join("."),submit:["submit"].concat(h.nss.array.join(":")).join("."),popstate:["popstate"].concat(h.nss.array.join(":")).join("."),scroll:["scroll"].concat(h.nss.array.join(":")).join("."),data:h.nss.array.join("-"),class4html:h.nss.array.join("-"),requestHeader:["X",h.nss.array[0].replace(/^\w/,function(a){return a.toUpperCase()})].join("-")},areaback:h.area,fix:/Mobile(\/\w+)? Safari/i.test(c.navigator.userAgent)?
{}:{location:!1,reset:!1},contentType:h.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),scroll:{record:!0,queue:[]},database:h.database?c.indexedDB||c.webkitIndexedDB||c.mozIndexedDB||c.msIndexedDB||null:!1,server:{query:h.server.query?h.server.query:h.gns},log:{script:{},speed:{}},history:{config:h.cache,order:[],data:{},size:0},timestamp:(new Date).getTime(),disable:!1,landing:d.canonicalizeURL(c.location.href),retry:!0,xhr:null,speed:{now:function(){return(new Date).getTime()}},option:b,validator:n});
h.id=1;d.ids.push(h.id);d.settings[h.id]=h;n&&n.test("++",1,0,"register");d.check()&&(d.share(),d.registrate.call(f,a,c,e,s,d,h));n&&n.end();return f}var k;k={name:"pjax",alias:"",ids:[0],settings:[0],count:0,parseHTML:null,setAlias:function(a){k.alias="string"===typeof a?a:k.alias;k.name===k.alias||l[k.alias]||(l[k.name][k.alias]=l.fn[k.name],l.fn[k.alias]=l[k.alias]=l.fn[k.name])},setProperties:function(a,c){var e=this;if(e instanceof l||e===l[k.name])e=e instanceof l&&c!==x?e.add(c):e,e[k.name]=
l[k.name],e.on=function(){k.settings[1].disable=!1},e.off=function(){k.settings[1].disable=!0},e.click=function(a,d){d=d||{};return(d.href=a)?l("<a/>",d).one("click",1,k.click).click():!1},e.submit=function(a,d,b){var c=B.createDocumentFragment(),f;switch(!0){case "object"===typeof a:d=l(a);break;case !!b:d=d||{};d.action=a;a=b instanceof Array&&Array||b instanceof Object&&Object||x;for(var h in b){f=b[h];switch(a){case Object:f=l("<textarea/>",{name:h}).val(f);break;case Array:f.attr=f.attr||{};
f.attr.name=f.name;f=l(f.tag.indexOf("<")?"<"+f.tag+"/>":f.tag,f.attr||{}).val(f.value);break;default:continue}c.appendChild(f[0])}d=l("<form/>",d).append(c);break;default:return!1}d.one("submit",1,k.submit).submit();return!0},e.setCache=function(a,d,b,c){var f=k.settings[1],h,e,u;h=f.history;a=a||k.canonicalizeURL(r.location.href);f.hashquery||(a=a.replace(/#.*/,""));switch(arguments.length){case 1:for(e=0;u=h.order[e];e++)a===u&&(h.order.splice(e,1),h.size-=h.data[u].size,h.data[u]=null,delete h.data[u]);
break;case 0:return arguments.callee.call(this,a,k.trim(B.documentElement.outerHTML));default:h.order.unshift(a);for(e=1;u=h.order[e];e++)a===u&&h.order.splice(e,1);h.size>h.config.size&&l[k.name].cleanCache();l[k.name].getCache(a);e=l("<span/>").html(k.find((d||"")+((c||{}).responseText||"")+"<title></title>",/<title[^>]*?>([^<]*?)<\/title>/i).shift()).text();u=parseInt(1.8*((d||"").length+((c||{}).responseText||"").length)||1048576,10);h.size=h.size||0;h.size+=u;h.data[a]=l.extend(!0,h.data[a]||
{},{XMLHttpRequest:c,textStatus:b,data:d,size:u,timestamp:(new Date).getTime()});f.database&&f.fix.history&&k.dbTitle(a,e)}return h.data[a]},e.getCache=function(a){var d=k.settings[1],b;b=d.history;a=a||k.canonicalizeURL(r.location.href);d.hashquery||(a=a.replace(/#.*/,""));b.data[a]&&d.timestamp>b.data[a].timestamp+b.config.expire&&l[k.name].setCache(a);return b.data[a]},e.clearCache=function(){for(var a=k.settings[1].history,d=a.order.length,b;b=a.order[--d];)a.order.splice(d,1),a.size-=a.data[b].size,
delete a.data[b];return!0},e.cleanCache=function(){for(var a=k.settings[1],d=a.history,b=d.order.length,c;c=d.order[--b];)if(b>=d.config.length||c in d.data&&a.timestamp>d.data[c].timestamp+d.config.expire)d.order.splice(b,1),d.size-=d.data[c].size,delete d.data[c];return!0};return e},check:function(){var a=k.settings[1];return k.supportPushState()&&a.area&&(a.link||a.form)},supportPushState:function(){return"pushState"in r.history&&r.history.pushState},registrate:function(a,c,e,s,d,b){d.database();
b.load.script&&a("script").each(function(){var c=this,f,c="function"===typeof b.load.rewrite?d.fire(b.load.rewrite,null,[c.cloneNode()])||c:c;(f=c.src)&&f in b.log.script||!f||b.load.reload&&a(c).is(b.load.reload)||(b.log.script[f]=!0)});a(this).undelegate(b.link,b.nss.click).delegate(b.link,b.nss.click,b.id,d.click=function(b){b.timeStamp=(new Date).getTime();var f=d.settings[1];if(f.disable||b.isDefaultPrevented())return b.preventDefault();f.location.href=d.canonicalizeURL(c.location.href);f.destination.href=
d.canonicalizeURL(this.href);if(f.location.protocol===f.destination.protocol&&f.location.host===f.destination.host&&!(1<b.which||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey)){if(!d.fire(f.hashquery,null,[b,this.href])&&f.location.pathname+f.location.search===f.destination.pathname+f.destination.search)return f.destination.hash&&d.hashscroll(),b.preventDefault();var h,k;h=f.destination.href;f.area=d.fire(f.areaback,null,[b,h]);f.timestamp=b.timeStamp;f.landing&&(f.landing=!1);if(a(f.area).length&&(!f.scope||
d.scope(f)))return f.cache[b.type.toLowerCase()]&&(k=a[d.name].getCache(h)),d.drive(a,c,e,s,d,f,b,h,!0,k),b.preventDefault()}});a(this).undelegate(b.form,b.nss.submit).delegate(b.form,b.nss.submit,b.id,d.submit=function(b){b.timeStamp=(new Date).getTime();var f=d.settings[1];if(f.disable||b.isDefaultPrevented())return b.preventDefault();f.location.href=d.canonicalizeURL(c.location.href);f.destination.href=d.canonicalizeURL(this.action);if(!(1<b.which||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey)){var h,
k;h=f.destination.href=d.canonicalizeURL(f.destination.href.replace(/[?#].*/,"")+("GET"===b.target.method.toUpperCase()?"?"+a(b.target).serialize():""));f.area=d.fire(f.areaback,null,[b,h]);f.timestamp=b.timeStamp;f.landing&&(f.landing=!1);if(a(f.area).length&&(!f.scope||d.scope(f)))return f.cache[b.type.toLowerCase()]&&f.cache[b.target.method.toLowerCase()]&&(k=a[d.name].getCache(h)),d.drive(a,c,e,s,d,f,b,h,!0,k),b.preventDefault()}});a(c).unbind(b.nss.popstate).bind(b.nss.popstate,b.id,d.popstate=
function(b){b.timeStamp=(new Date).getTime();var f=d.settings[1];if(f.disable||b.isDefaultPrevented())return b.preventDefault();f.destination.href=d.canonicalizeURL(c.location.href);if(f.location.href===f.destination.href)return b.preventDefault();var h,k;if(!d.fire(f.hashquery,null,[b,h])&&f.location.pathname+f.location.search===f.destination.pathname+f.destination.search)return b.preventDefault();h=f.destination.href;f.area=d.fire(f.areaback,null,[b,h]);f.timestamp=b.timeStamp;if(f.landing){if(f.landing.href===
h){f.landing=!1;return}f.landing=!1}if(a(f.area).length)return f.database&&f.fix.history&&d.dbTitle(h),f.cache[b.type.toLowerCase()]&&(k=a[d.name].getCache(h)),d.drive(a,c,e,s,d,f,b,h,!1,k),b.preventDefault()});b.database&&b.fix.scroll&&a(c).unbind(b.nss.scroll).bind(b.nss.scroll,b.id,function(b,f){var h=d.settings[1],e,k=arguments.callee;if(h.scroll.delay){for(;e=h.scroll.queue.shift();)clearTimeout(e);e=setTimeout(function(){for(;e=h.scroll.queue.shift();)clearTimeout(e);d.dbScroll(a(c).scrollLeft(),
a(c).scrollTop())},h.scroll.delay);h.scroll.queue.push(e)}else d.dbScroll(a(c).scrollLeft(),a(c).scrollTop());h.scroll.suspend&&!f&&(a(this).unbind(h.nss.scroll),setTimeout(function(){h.database&&h.fix.scroll&&a(c).bind(h.nss.scroll,h.id,k).trigger(h.nss.scroll,[!0])},h.scroll.suspend))});(function(){function b(c){try{var d=c&&c("<body><noscript>DOMParser</noscript></body>");return"DOMParser"===a(d).find("noscript").text()}catch(f){}}var f=c.DOMParser;d.parseHTML=function(a){return f&&f.prototype&&
(new f).parseFromString(a,"text/html")};b(d.parseHTML)||(d.parseHTML=function(a){var b;e.implementation&&e.implementation.createHTMLDocument&&(b=e.implementation.createHTMLDocument(""),"object"===typeof b.activeElement&&(b.open(),b.write(a),b.close()));return b},b(d.parseHTML)||(d.parseHTML=!1))})()},drive:function(a,c,e,k,d,b,n,f,h,l){function u(a,b,c,d,e,g,k,l){var m=g.validator?g.validator.clone({name:"jquery.pjax.js - update()"}):!1;m&&m.start();m&&(m.scope=function(a){return eval(a)});m&&m.test("1",
1,0,"update()");m&&m.test("++",1,0,"start");a:{var s=g.speedcheck;s&&g.log.speed.name.push("update");s&&g.log.speed.time.push(g.speed.now()-g.log.speed.fire);var p=g.callbacks.update;if(!1!==e.fire(p.before,null,[k,g.parameter,w,t,q,l],g.callbacks.async)){var n,r,u;try{m&&m.test("++",1,0,"try");m&&m.test("++",1,l?0:[g.contentType,q.getResponseHeader("Content-Type")],"content-type");if(!l&&-1===(q.getResponseHeader("Content-Type")||"").toLowerCase().search(g.contentType))throw Error("throw: content-type mismatch");
m&&m.test("++",l?"'usable'":"'unusable'",0,"cache");l&&!1!==e.fire(p.cache.load.before,null,[k,g.parameter,l],g.callbacks.async)&&(q=l.XMLHttpRequest||q,w=q.responseText,t=l.textStatus||t,r=l.css,u=l.script,e.fire(p.cache.load.after,null,[k,g.parameter,l],g.callbacks.async));m&&m.test("++",1,0,"initialize");var z,A,y,x,v,B,D;B=g.area.split(/\s*,\s*/);A=(q.responseText||"").replace(/<noscript[^>]*>(?:.|[\n\r])*?<\/noscript>/gim,function(a){return a.replace(/<script(?:.|[\n\r])*?<\/script>/gim,"")});
if(l&&l.data){x=l.data;y=a(e.parseHTML&&x&&e.parseHTML(x)||x);A=A.replace(/<title[^>]*?>([^<]*?)<\/title>/i,function(a){return e.find(x,/(<title[^>]*?>[^<]*?<\/title>)/i).shift()||a});z=a(e.parseHTML&&A&&e.parseHTML(A)||A);for(var I=0,C,E;C=B[I++];)z.find(C).add(v?"":z.filter(C)).html(y.find(C).add(v?"":y.filter(C)).contents())}else z=a(e.parseHTML&&A&&e.parseHTML(A)||A);switch(!0){case !!z.find("html")[0]:v=1;z.find("noscript").each(function(){this.children.length&&a(this).text(this.innerHTML)});
break;case !!z.filter("title")[0]:v=0;break;default:v=!1}switch(v){case 1:n=z.find("title").text();break;case 0:n=z.filter("title").text();break;case !1:n=a("<span/>").html(e.find(A,/<title[^>]*?>([^<]*?)<\/title>/i).shift()).text()}if(!a(g.area).length||!z.find(g.area).add(v?"":z.filter(g.area)).length)throw Error("throw: area length mismatch");a(b).trigger(g.gns+".unload");m&&m.test("++",1,f,"url");!1!==e.fire(p.url.before,null,[k,g.parameter,w,t,q],g.callbacks.async)&&(h&&f!==g.location.href&&
b.history.pushState(e.fire(g.state,null,[k,f]),b.opera||-1!==b.navigator.userAgent.toLowerCase().indexOf("opera")?n:c.title,f),g.location.href=f,h&&g.fix.location&&(a[e.name].off(),b.history.back(),b.history.forward(),a[e.name].on()),e.fire(p.url.after,null,[k,g.parameter,w,t,q],g.callbacks.async));m&&m.test("++",1,n,"title");!1!==e.fire(p.title.before,null,[k,g.parameter,w,t,q],g.callbacks.async)&&(c.title=n,g.database&&g.fix.history&&e.dbTitle(f,n),e.fire(p.title.after,null,[k,g.parameter,w,t,q],
g.callbacks.async));g.database&&e.dbCurrent();m&&m.test("++",1,0,"scroll");var J=function(c){var d,f;switch(k.type.toLowerCase()){case "click":case "submit":d=c&&"function"===typeof g.scrollLeft?e.fire(g.scrollLeft,null,[k]):g.scrollLeft;d=0<=d?d:0;d=null===d?a(b).scrollLeft():parseInt(Number(d),10);f=c&&"function"===typeof g.scrollTop?e.fire(g.scrollTop,null,[k]):g.scrollTop;f=0<=f?f:0;f=null===f?a(b).scrollTop():parseInt(Number(f),10);a(b).scrollTop()===f&&a(b).scrollLeft()===d||b.scrollTo(d,f);
c&&g.database&&g.fix.scroll&&e.dbScroll(d,f);break;case "popstate":c&&g.database&&g.fix.scroll&&e.dbScroll()}};J(!1);m&&m.test("++",1,B,"content");if(!1!==e.fire(p.content.before,null,[k,g.parameter,w,t,q],g.callbacks.async)){a(g.area).children("."+g.nss.class4html+"-check").remove();D=a("<div/>",{"class":g.nss.class4html+"-check",style:"background: none !important; display: block !important; visibility: hidden !important; position: absolute !important; top: 0 !important; left: 0 !important; z-index: -9999 !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; font-size: 12px !important; text-indent: 0 !important;"}).text(g.gns);
for(I=0;C=B[I++];)E=z.find(C).add(v?"":z.filter(C)).clone().find("script").remove().end().contents(),a(C).html(E).append(D.clone());D=a(g.area).children("."+g.nss.class4html+"-check");a(c).trigger(g.gns+".DOMContentLoaded");e.fire(p.content.after,null,[k,g.parameter,w,t,q],g.callbacks.async)}s&&g.log.speed.name.push("content");s&&g.log.speed.time.push(g.speed.now()-g.log.speed.fire);m&&m.test("++",1,0,"cache");l&&l.XMLHttpRequest||!g.cache.click&&!g.cache.submit&&!g.cache.popstate||"submit"===k.type.toLowerCase()&&
!g.cache[k.target.method.toLowerCase()]||!1===e.fire(p.cache.save.before,null,[k,g.parameter,l],g.callbacks.async)||(a[e.name].setCache(f,x||null,t,q),l=a[e.name].getCache(f),e.fire(p.cache.save.after,null,[k,g.parameter,l],g.callbacks.async));m&&m.test("++",1,0,"rendering");var K=function(b){if(!1!==e.fire(p.rendering.before,null,[k,g.parameter],g.callbacks.async)){var c=0;(function(){D.filter(function(){return this.clientWidth||this.clientHeight||a(this).is(":hidden")}).length===D.length||100<=
c?F(b):D.length&&(c++,setTimeout(arguments.callee,g.interval))})()}},F=function(c){s&&g.log.speed.name.push("rendered");s&&g.log.speed.time.push(g.speed.now()-g.log.speed.fire);D.remove();g.scroll.record=!0;e.hashscroll("popstate"===k.type.toLowerCase())||J(!0);a(b).trigger(g.gns+".load");e.fire(c);s&&console.log(g.log.speed.time);s&&console.log(g.log.speed.name);e.fire(p.rendering.after,null,[k,g.parameter],g.callbacks.async)};m&&m.test("++",1,0,"escape");switch(v){case 1:case 0:z.find("noscript").remove();
break;case !1:A=A.replace(/^(?:.|[\n\r])*<body[^>]*>.*[\n\r]*.*[\n\r]*/im,function(a){return a.replace(/\x3c!--\[(?:.|[\n\r])*?<!\[endif\]--\x3e/gim,"")}),A=A.replace(/<noscript(?:.|[\n\r])*?<\/noscript>/gim,"")}m&&m.test("++",1,0,"css");m&&m.test("++",1,0,"script");var G=function(c){var d=g.validator?g.validator.clone({name:"jquery.pjax.js - load_script()"}):!1;d&&d.start();d&&(d.scope=function(a){return eval(a)});if(g.load.script&&!1!==e.fire(p.script.before,null,[k,g.parameter,w,t,q],g.callbacks.async)){var h;
h=(l=a[e.name].getCache(f))&&!l.script;switch(u||v){case 1:case 0:u=z.find("script").add(v?"":z.filter("script")).clone().get();break;case !1:u=e.find(A,/(?:[^\'\"]|^\s*?)(<script[^>]*?>(?:.|[\n\r])*?<\/script>)(?:[^\'\"]|\s*?$)/gim)}l&&l.script&&u&&u.length!==l.script.length&&(h=!0);h&&(l.script=[]);for(var n=0,m,r;m=u[n];n++)if(d&&d.test("++",1,m.outerHTML,"load"),m="object"===typeof m?h?a(m.outerHTML)[0]:m:a(m)[0],m="function"===typeof g.load.rewrite?e.fire(g.load.rewrite,null,[m.cloneNode()])||
m:m,h&&(l.script[n]=m),a(m).is(c)&&(r=e.trim(m.src||""),!(r&&r in g.log.script||g.load.reject&&a(m).is(g.load.reject)))){!r||g.load.reload&&a(m).is(g.load.reload)||(g.log.script[r]=!0);try{r?a.ajax(a.extend(!0,{},g.ajax,g.load.ajax,{url:m.src,async:!!m.async,global:!1})):"object"!==typeof m||m.type&&-1===m.type.toLowerCase().indexOf("text/javascript")||b.eval.call(b,(m.text||m.textContent||m.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/"))}catch(x){d&&d.test("++",0,x,"error");break}}!1!==
e.fire(p.script.after,null,[k,g.parameter,w,t,q],g.callbacks.async)&&("[src][defer]"===c&&s&&g.log.speed.name.push("script"),"[src][defer]"===c&&s&&g.log.speed.time.push(g.speed.now()-g.log.speed.fire))}d&&d.end()};m&&m.test("++",1,0,"verify");if(!1!==e.fire(p.verify.before,null,[k,g.parameter],g.callbacks.async)){if(f===e.canonicalizeURL(b.location.href))g.retry=!0;else if(g.retry)g.retry=!1,e.drive(a,b,c,d,e,g,k,b.location.href,!1,g.cache[k.type.toLowerCase()]&&a[e.name].getCache(e.canonicalizeURL(b.location.href)));
else throw Error("throw: location mismatch");e.fire(p.verify.after,null,[k,g.parameter],g.callbacks.async)}m&&m.test("++",1,0,"load");(function(){var b=g.validator?g.validator.clone({name:"jquery.pjax.js - load_css()"}):!1;b&&b.start();b&&(b.scope=function(a){return eval(a)});if(g.load.css&&!1!==e.fire(p.css.before,null,[k,g.parameter,w,t,q],g.callbacks.async)){var c,d=[],h=a('link[rel~="stylesheet"], style');c=(l=a[e.name].getCache(f))&&!l.css;switch(r||v){case 1:case 0:r=z.find('link[rel~="stylesheet"], style').add(v?
"":z.filter('link[rel~="stylesheet"], style')).clone().get();break;case !1:r=e.find(A,/(<link[^>]*?rel=.[^"\']*?stylesheet[^>]*?>|<style[^>]*?>(?:.|[\n\r])*?<\/style>)/gim)}l&&l.css&&r&&r.length!==l.css.length&&(c=!0);c&&(l.css=[]);for(var m=0,n,u;n=r[m];m++){n="object"===typeof n?c?a(n.outerHTML)[0]:n:a(n)[0];n="function"===typeof g.load.rewrite?e.fire(g.load.rewrite,null,[n.cloneNode()])||n:n;c&&(l.css[m]=n);u=e.trim(n.href||n.innerHTML||"");for(var x=0,y;y=h[x];x++)if(e.trim(y.href||y.innerHTML||
"")===u){h=h.not(y);n=null;break}n&&d.push(n)}h.remove();a("head").append(d);!1!==e.fire(p.css.after,null,[k,g.parameter,w,t,q],g.callbacks.async)&&(s&&g.log.speed.name.push("css"),s&&g.log.speed.time.push(g.speed.now()-g.log.speed.fire))}b&&b.end()})();a(c).trigger(g.gns+".ready");a(b).bind(g.gns+".rendering",function(b){a(b.target).unbind(b.type+".rendering",arguments.callee);G(":not([defer]), :not([src])");g.load.sync?K(function(){G("[src][defer]")}):(K(),G("[src][defer]"))}).trigger(g.gns+".rendering").unbind(g.gns+
".rendering");if(!1===e.fire(p.success,null,[k,g.parameter,w,t,q],g.callbacks.async))break a;if(!1===e.fire(p.complete,null,[k,g.parameter,w,t,q],g.callbacks.async))break a;if(!1===e.fire(g.callback,null,[k,g.parameter,w,t,q],g.callbacks.async))break a;m&&m.test("++",1,0,"success")}catch(H){m&&m.test("++",!String(H.message).indexOf("throw:"),H,"catch");m&&m.test("++",!("throw: location mismatch"===H.message&&f!==b.location.href),[f,b.location.href],"!( err.message === 'throw: location mismatch' && url !== window.location.href )");
l&&a[e.name].setCache(f);if(!1===e.fire(p.error,null,[k,g.parameter,w,t,q],g.callbacks.async))break a;if(!1===e.fire(p.complete,null,[k,g.parameter,w,t,q],g.callbacks.async))break a;m&&m.test("++",1,[f,b.location.href],"error");if(g.fallback)return"function"===typeof g.fallback?e.fire(g.fallback,null,[k,f]):e.fallback(k,m)}!1!==e.fire(p.after,null,[k,g.parameter,w,t,q],g.callbacks.async)&&(s&&g.log.speed.name.push("complete"),s&&g.log.speed.time.push(g.speed.now()-g.log.speed.fire),m&&m.test("++",
1,0,"end"),m&&m.end())}}}var p=b.validator?b.validator.clone({name:"jquery.pjax.js - drive()"}):!1;p&&p.start();p&&(p.scope=function(a){return eval(a)});p&&p.test("++",1,[f,n.type],"drive()");var r=b.speedcheck;r&&(b.log.speed.fire=b.timestamp);r&&(b.log.speed.time=[]);r&&(b.log.speed.name=[]);r&&b.log.speed.name.push("fire");r&&b.log.speed.time.push(b.speed.now()-b.log.speed.fire);p&&p.test("++",1,0,"start");b.scroll.record=!1;b.fix.reset&&/click|submit/.test(n.type.toLowerCase())&&c.scrollTo(a(c).scrollLeft(),
0);if(!1!==d.fire(b.callbacks.before,null,[n,b.parameter],b.callbacks.async))if(l&&l.XMLHttpRequest)p&&p.test("++",1,0,"update"),a.when?a.when(d.wait(b.wait)).done(function(){u(a,c,e,k,d,b,n,l)}):u(a,c,e,k,d,b,n,l),p&&p.test("++",1,0,"end"),p&&p.end();else{p&&p.test("++",1,0,"initialize");var y,v,w,q,t,x;y={};switch(n.type.toLowerCase()){case "click":p&&p.test("++",1,0,"event click");y.type="GET";break;case "submit":p&&p.test("++",1,n.target.method,"event submit");y.type=n.target.method.toUpperCase();
"POST"===y.type&&(y.data=a(n.target).serializeArray());break;case "popstate":p&&p.test("++",1,0,"event popstate"),y.type="GET"}v=a.when?a.Deferred():null;p&&p.test("++",1,0,"setting");a.extend(!0,y,b.ajax,{xhr:b.callbacks.ajax.xhr?function(){q=d.fire(b.callbacks.ajax.xhr,null,[n,b.parameter],b.callbacks.async);return q="object"===typeof q&&q||a.ajaxSettings.xhr()}:k,beforeSend:function(a,c){q=a;b.xhr&&4>b.xhr.readyState&&b.xhr.abort();b.xhr=q;q.setRequestHeader(b.nss.requestHeader,"true");q.setRequestHeader(b.nss.requestHeader+
"-Area",b.area);q.setRequestHeader(b.nss.requestHeader+"-CSS",b.load.css);q.setRequestHeader(b.nss.requestHeader+"-Script",b.load.script);d.fire(b.callbacks.ajax.beforeSend,null,[n,b.parameter,q,c],b.callbacks.async)},dataFilter:b.callbacks.ajax.dataFilter?function(a,c){w=a;return d.fire(b.callbacks.ajax.dataFilter,null,[n,b.parameter,w,c],b.callbacks.async)||w}:k,success:function(a,c,e){w=a;t=c;q=e;(p=b.validator?b.validator.clone({name:"jquery.pjax.js - $.ajax()"}):!1)&&p.start();p&&p.test("++",
"success"===t,[f,b.location.href,q,t],"ajax success");d.fire(b.callbacks.ajax.success,null,[n,b.parameter,w,t,q],b.callbacks.async)},error:function(a,c,e){q=a;t=c;x=e;(p=b.validator?b.validator.clone({name:"jquery.pjax.js - $.ajax()"}):!1)&&p.start();p&&p.test("++","abort"===t,[f,b.location.href,q,t,x],"ajax error");d.fire(b.callbacks.ajax.error,null,[n,b.parameter,q,t,x],b.callbacks.async)},complete:function(h,r){q=h;t=r;p&&p.test("++",1,0,"ajax complete");d.fire(b.callbacks.ajax.complete,null,[n,
b.parameter,q,t],b.callbacks.async);if(x){if(v&&v.reject(),b.fallback&&"abort"!==t)return"function"===typeof b.fallback?d.fire(b.fallback,null,[n,f]):d.fallback(n,p)}else v&&v.resolve()||u(a,c,e,k,d,b,n,l);p&&p.end()}});y.url=f.replace(/([^#]+)(#[^\s]*)?$/,"$1"+(b.server.query?(f.match(/\?/)?"&":"?")+encodeURIComponent(b.server.query)+"=1":"")+"$2");p&&p.test("++",1,0,"ajax");r&&b.log.speed.name.push("request");r&&b.log.speed.time.push(b.speed.now()-b.log.speed.fire);a.when&&a.when(v.promise(),d.wait(b.wait)).done(function(){u(a,
c,e,k,d,b,n,l)});a.ajax(y);!1!==d.fire(b.callbacks.after,null,[n,b.parameter],b.callbacks.async)&&(p&&p.test("++",1,0,"end"),p&&p.end())}},canonicalizeURL:function(a){a=k.trim(a);a=/^https?:/i.test(a)?a:"";a=a.replace(/[<>"{}|\\^\[\]`\s].*/,"");return encodeURI(decodeURI(a))},trim:function(a){if(String.prototype.trim)a=String(a).trim();else if(a=String(a).replace(/^\s+/,""))for(var c=a.length;--c;)if(/\S/.test(a.charAt(c))){a=a.substring(0,c+1);break}return a},fire:function(a,c,e,k){return"function"===
typeof a?k?setTimeout(function(){a.apply(c,e)},0):a.apply(c,e):a},hashscroll:function(a){var c=k.settings[1].destination.hash.slice(1);return!(a||!c)&&l("#"+(c?c:", [name~="+c+"]")).first().each(function(){isFinite(l(this).offset().top)&&r.scrollTo(l(r).scrollLeft(),parseInt(Number(l(this).offset().top),10))}).length},wait:function(a){var c=l.Deferred();if(!a)return c.resolve();setTimeout(function(){c.resolve()},a);return c.promise()},fallback:function(a,c){c&&c.test("++",1,0,"fallback()");c&&c.end();
"click"===a.type.toLowerCase()?r.location.href=a.currentTarget.href:"submit"===a.type.toLowerCase()?a.target.submit():"popstate"===a.type.toLowerCase()&&r.location.reload()},find:function(a,c){var e=[];a.replace(c,function(a,c){e.push(c)});return e},scope:function(a,c){var e,s,d,b,n,f,h,r,u,p,B,y,v,w;e=a.scope;d=a.location.pathname+a.location.search+a.location.hash;b=a.destination.pathname+a.destination.search+a.destination.hash;"/"!==a.location.pathname.charAt(0)&&(d="/"+d,b="/"+b);s=d.replace(/^\//,
"").replace(/([?#])/g,"/$1").split("/");f=(c||d).replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");if(c){if(-1===c.indexOf("*"))return x;n=[];for(var q=f.length;q--;)"*"===f[q]&&n.unshift(s[q])}for(q=f.length+1;q--;)if(p=B=y=v=x,s=f.slice(0,q).join("/").replace(/\/([?#])/g,"$1"),(s="/"+s+("/"===(c||d).charAt(s.length+1)?"/":""))&&s in e){if(!e[s]||!e[s].length)return!1;for(var t=0;h=e[s][t];t++)if(!1!==y&&!1!==v)if("rewrite"!==h||"function"!==typeof e.rewrite||c)if("inherit"===h)B=!0;else if("string"===
typeof h){h=(r="^"===h.charAt(0))?h.slice(1):h;h=(u="*"===h.charAt(0))?h.slice(1):h;if(c&&-1!==h.indexOf("/*/"))for(var E=0,F=n.length;E<F;E++)h=h.replace("/*/","/"+n[E]+"/");if(!(!r&&y||(u?d.search(h):d.indexOf(h)))){if(r)return!1;y=!0}if(!(!r&&v||(u?b.search(h):b.indexOf(h)))){if(r)return!1;v=!0}}else"object"===typeof h&&(w=h);else if(p=arguments.callee(a,k.fire(e.rewrite,null,[a.destination.href])))y=v=!0;else if(!1===p)return!1;if(y&&v)return a.option||p?l.extend(!0,{},p||{}):l.extend(!0,{},a,
w||{},p||{});if(!B)break}},database:function(){var a=k.settings[1],c=a.validator?a.validator.clone({name:"jquery.pjax.js - database()"}):!1;c&&c.start();c&&(c.scope=function(a){return eval(a)});var e=1,l=a.database,d=a.gns,b,n,f=Math.floor(a.timestamp/864E5);if(!l||!d)return c&&c.end(),!1;try{e=parseInt(f-f%7+e,10),c&&c.test("++",1,e,"open"),b=l.open(d),c&&c.test("++",1,0,"call"),b.onblocked=function(){c&&c.test("++",0,0,"onblocked()");a.database=!1},b.onupgradeneeded=function(){c&&c.test("++",1,
0,"onupgradeneeded()");var b=a.database=this.result;c&&c.test("++",1,0,"deleteObjectStore");for(var d=b.objectStoreNames?b.objectStoreNames.length:0;d--;)b.deleteObjectStore(b.objectStoreNames[d]);c&&c.test("++",1,0,"createObjectStore");a.database.createObjectStore(a.gns,{keyPath:"id",autoIncrement:!1}).createIndex("date","date",{unique:!1})},b.onsuccess=function(){c&&c.test("++",1,0,"onsuccess()");try{a.database=this.result,c&&c.test("++",1,0,"store"),n=k.dbStore(),c&&c.test("++",1,0,"update"),n.get("_version").onsuccess=
function(){this.result&&e!==this.result.title?(a.database.close(),l.deleteDatabase(d),a.database=l,k.database()):(k.dbVersion(e),k.dbCurrent(),k.dbTitle(a.location.href,B.title))}}catch(b){c&&c.test("++",1,b,"cancel"),a.database.close(),l.deleteDatabase(d),a.database=!1}c&&c.end()},b.onerror=function(b){c&&c.test("++",0,b,"onerror()");a.database=!1;l.deleteDatabase(d);c&&c.end()}}catch(h){c&&c.test("++",0,h,"error"),a.database=!1,c&&c.end()}},dbStore:function(){var a=k.settings[1];return"object"===
typeof a.database&&"function"===typeof a.database.transaction&&a.database.transaction(a.gns,"readwrite").objectStore(a.gns)},dbCurrent:function(){var a=k.settings[1],c=k.dbStore();c&&c.put({id:"_current",title:a.hashquery?r.location.href:r.location.href.replace(/#.*/,"")})},dbVersion:function(a){var c=k.dbStore();c&&c.put({id:"_version",title:a})},dbTitle:function(a,c){var e=k.settings[1],s=k.dbStore();s&&(e.hashquery||(a=a.replace(/#.*/,"")),c?s.get(a).onsuccess=function(){s.put(l.extend(!0,{},this.result||
{},{id:a,title:c,date:e.timestamp}));k.dbClean(s)}:s.get(a).onsuccess=function(){this.result&&this.result.title&&(B.title=this.result.title)})},dbScroll:function(a,c){var e=k.settings[1],s=k.dbStore(),d=e.location.href,b=arguments.length;e.scroll.record&&s&&(e.hashquery||(d=d.replace(/#.*/,"")),s.get("_current").onsuccess=function(){this.result&&this.result.title&&d===this.result.title&&(b?s.get(d).onsuccess=function(){s.put(l.extend(!0,{},this.result||{},{scrollX:parseInt(Number(a),10),scrollY:parseInt(Number(c),
10)}))}:s.get(d).onsuccess=function(){this.result&&isFinite(this.result.scrollX)&&isFinite(this.result.scrollY)&&r.scrollTo(parseInt(Number(this.result.scrollX),10),parseInt(Number(this.result.scrollY),10))})})},dbClean:function(a){var c=k.settings[1],e=r.IDBKeyRange||r.webkitIDBKeyRange||r.mozIDBKeyRange||r.msIDBKeyRange;a.count().onsuccess=function(){1E3<this.result&&(a.index("date").openCursor(e.upperBound(c.timestamp-2592E5)).onsuccess=function(){var c=this.result;c?(c["delete"](c.value.id),c["continue"]()):
a.count().onsuccess=function(){1E3<this.result&&a.clear()}})}},share:function(){var a=k.settings[1];l.falsandtru||(l.fn.falsandtru=l.falsandtru=k.falsandtru);l.falsandtru("share","history",a.history);a.history=l.falsandtru("share","history")},falsandtru:function(a,c,e){var k;switch(!0){case c===x:k=l.falsandtru[a];break;case e===x:k=a in l.falsandtru?l.falsandtru[a][c]:x;break;case e!==x:l.falsandtru[a]instanceof Object||(l.falsandtru[a]={}),l.falsandtru[a][c]instanceof Object&&e instanceof Object?
l.extend(!0,l.falsandtru[a][c],e):l.falsandtru[a][c]=e,k=l.falsandtru[a][c]}return k}};(function(a,c,e,k,d){a.fn[d.name]=a[d.name]=function(){return F.apply(this,[a,c,e,k,d].concat([].slice.call(arguments)))};d.setProperties.call(a[d.name])}).apply(this,[].slice.call(arguments).concat([k]))})(jQuery,window,document,void 0);

/*
 * 
 * pjax
 * 
 * ---
 * @Copyright(c) 2012, falsandtru
 * @license MIT http://opensource.org/licenses/mit-license.php
 * @version 1.34.2
 * @updated 2014/06/07
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(m,p,B,C){function H(b,d,h,q,e,a){var k=this;switch(!0){case "object"===typeof a:k=k instanceof b?k:b(h);k=e.setProperties.call(k,a.ns||"",null);if(!a.area&&!a.scope)return k;break;default:return k=k instanceof b?k:b[e.name],e.setProperties.call(k,null,null)}var l;l=b.extend(!0,{id:0,gns:e.name,ns:null,area:null,link:"a:not([target])",filter:function(){return/(\/[^.]*|\.html?|\.php)([#?].*)?$/.test(this.href)},form:null,scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{dataType:"text"},
contentType:"text/html",cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,mix:!1,page:100,size:1048576,expires:{max:null,min:3E5}},callback:function(){},callbacks:{ajax:{},update:{redirect:{},url:{},title:{},head:{},content:{},scroll:{},css:{},script:{},cache:{load:{},save:{}},rendering:{},verify:{}},async:!1},parameter:null,load:{css:!1,script:!1,execute:!0,reload:'[href^="chrome-extension://"]',reject:"",head:"link, meta, base",sync:!0,ajax:{dataType:"script",cache:!0},rewrite:null,redirect:!0},
interval:300,wait:0,scroll:{delay:300},fix:{location:!0,history:!0,scroll:!0,reset:!1},hashquery:!1,fallback:!0,database:!0,server:{query:"pjax=1"}},a);l.location=b("<a/>",{href:e.canonicalizeURL(d.location.href)})[0];l.destination=b("<a/>",{href:e.canonicalizeURL(d.location.href)})[0];l.nss={array:[e.name].concat(l.ns&&String(l.ns).split(".")||[])};b.extend(!0,l=l.scope&&e.scope(l)||l,{nss:{name:l.ns||"",event:l.nss.array.join("."),alias:e.alias?[e.alias].concat(l.nss.array.slice(1)).join("."):!1,
click:["click"].concat(l.nss.array.join(":")).join("."),submit:["submit"].concat(l.nss.array.join(":")).join("."),popstate:["popstate"].concat(l.nss.array.join(":")).join("."),scroll:["scroll"].concat(l.nss.array.join(":")).join("."),data:l.nss.array.join("-"),class4html:l.nss.array.join("-"),requestHeader:["X",l.nss.array[0].replace(/^\w/,function(a){return a.toUpperCase()})].join("-")},areaback:l.area,fix:/touch|tablet|mobile|phone|android|iphone|ipad|blackberry/i.test(d.navigator.userAgent)?{}:
{location:!1,reset:!1},contentType:l.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),scroll:{record:!0,queue:[]},log:{script:{},speed:{}},history:{order:[],data:{},size:0},timeStamp:(new Date).getTime(),disable:!1,landing:e.canonicalizeURL(d.location.href),retry:!0,xhr:null,speed:{now:function(){return(new Date).getTime()}},option:a});e.supportPushState()&&b(function(){e.registrate.call(k,b,d,h,q,e,l)});return k}var f;f={name:"pjax",alias:"",ids:[],settings:[0],count:0,setAlias:function(b){f.alias=
"string"===typeof b?b:f.alias;f.name===f.alias||m[f.alias]||(m[f.name][f.alias]=m.fn[f.name],m.fn[f.alias]=m[f.alias]=m.fn[f.name])},IDBFactory:p.indexedDB||p.webkitIndexedDB||p.mozIndexedDB||p.msIndexedDB,IDBDatabase:null,IDBKeyRange:p.IDBKeyRange||p.webkitIDBKeyRange||p.mozIDBKeyRange||p.msIDBKeyRange,createHTMLDocument:null,setProperties:function(b,d){var h=this;if(h instanceof m||h===m[f.name])h=h instanceof m&&d!==C?h.add(d):h,h[f.name]=m[f.name],h.on=function(){f.settings[1].disable=!1},h.off=
function(){f.settings[1].disable=!0},h.click=function(b,e){var a;switch(!0){case "object"===typeof b:a=m(b);break;case !!b:e=e||{};e.href=b;a=m("<a/>",e);break;default:return this}return a.first().one("click",1,f.click).click()},h.submit=function(b,e,a){var d=B.createDocumentFragment(),l;switch(!0){case "object"===typeof b:e=m(b);break;case !!a:e=e||{};e.action=b;b=a instanceof Array&&Array||a instanceof Object&&Object||C;for(var g in a){l=a[g];switch(b){case Object:l=m("<textarea/>",{name:g}).val(l);
break;case Array:l.attr=l.attr||{};l.attr.name=l.name;l=m(l.tag.indexOf("<")?"<"+l.tag+"/>":l.tag,l.attr||{}).val(l.value);break;default:continue}d.appendChild(l[0])}e=m("<form/>",e).append(d);break;default:return this}return e.first().one("submit",1,f.submit).submit()},h.setCache=function(b,e,a,d){var l=f.settings[1];if(!l||!l.history)return this;var g,h,s,v,n;g=l.history;b=f.canonicalizeURL(b||p.location.href);b=l.hashquery?b:b.replace(/#.*/,"");switch(arguments.length){case 0:return e=f.trim(B.documentElement.outerHTML),
arguments.callee.call(this,b,e);case 1:return arguments.callee.call(this,b,null);default:g.order.unshift(b);for(h=1;s=g.order[h];h++)b===s&&g.order.splice(h,1);g.size>l.cache.size&&m[f.name].cleanCache();m[f.name].getCache(b);s=f.createHTMLDocument(e||(d||{}).responseText||"");h=s.title||"";s=parseInt(1.8*s.documentElement.outerHTML.length||1048576,10);v=(new Date).getTime();(n=l.cache.expires)?g.data[b]&&!d?n=g.data[b].expires:(d&&(/no-store|no-cache/.test(d.getResponseHeader("Cache-Control"))||
(n=~String(n=d.getResponseHeader("Cache-Control")).indexOf("max-age=")?1E3*n.match(/max-age=(\d+)/)[1]:(n=d.getResponseHeader("Expires"))?(new Date(n)).getTime()-(new Date).getTime():l.cache.expires)),n=Math.max(n,0)||0,n="object"===typeof l.cache.expires&&"number"===typeof l.cache.expires.min?Math.max(l.cache.expires.min,n):n,n="object"===typeof l.cache.expires&&"number"===typeof l.cache.expires.max?Math.min(l.cache.expires.max,n):n,n=v+n):n=0;g.size=g.size||0;g.size+=g.data[b]?0:s;g.data[b]=m.extend(!0,
g.data[b]||{},{XMLHttpRequest:d,textStatus:a,data:e,size:s,expires:n,timeStamp:v});g.data[b].data||g.data[b].XMLHttpRequest||m[f.name].removeCache(b);l.database&&l.fix.history&&f.dbTitle(b,h)}return this},h.getCache=function(b){var e=f.settings[1];if(!e||!e.history)return!1;var a;a=e.history;b=f.canonicalizeURL(b||p.location.href);b=e.hashquery?b:b.replace(/#.*/,"");a.data[b]&&(new Date).getTime()>a.data[b].expires&&m[f.name].removeCache(b);a.data[b]&&!a.data[b].data&&!a.data[b].XMLHttpRequest&&m[f.name].removeCache(b);
return a.data[b]},h.removeCache=function(b){var e=f.settings[1];if(!e||!e.history)return this;var a;a=e.history;b=f.canonicalizeURL(b||p.location.href);b=e.hashquery?b:b.replace(/#.*/,"");for(var e=0,d;d=a.order[e];e++)b===d&&(a.order.splice(e,1),a.size-=a.data[d].size,a.data[d]=null,delete a.data[d]);return this},h.clearCache=function(){var b=f.settings[1];if(!b||!b.history)return this;for(var b=b.history,e=b.order.length,a;a=b.order[--e];)b.order.splice(e,1),b.size-=b.data[a].size,delete b.data[a];
return this},h.cleanCache=function(){var b=f.settings[1];if(!b||!b.history)return this;for(var e=b.history,a=e.order.length,d;d=e.order[--a];)if(a>=b.cache.page||d in e.data&&(new Date).getTime()>e.data[d].expires)e.order.splice(a,1),e.size-=e.data[d].size,delete e.data[d];return this},h.follow=function(b,e,a){var d=f.settings[1];if(!d||!m.when||!f.check(b,d))return!1;isFinite(b.timeStamp)&&(e.timeStamp=a||b.timeStamp);d.xhr=e;m.when(e).done(function(){d.xhr&&4>d.xhr.readyState&&d.xhr.abort();m[f.name].setCache(b.currentTarget.href,
C,C,e)}).fail(function(){f.fallback(b)});m[f.name].click(b.currentTarget.href);return!0};return h},check:function(b,d){var h,q;h=m("<a/>",{href:f.canonicalizeURL(p.location.href)})[0];q=m("<a/>",{href:f.canonicalizeURL(b.currentTarget.href)})[0];if(m(b.currentTarget).filter(d.filter).length&&!(d.disable||h.protocol!==q.protocol||h.host!==q.host||1<b.which||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey)&&(d.area=f.fire(d.areaback,null,[b,d.parameter,q.href,h.href]),m(d.area).length&&(!d.scope||f.scope(d,
h.href,q.href))))return!0},supportPushState:function(){return"pushState"in p.history&&p.history.pushState},registrate:function(b,d,h,f,e,a){var k=function(a){try{var e=a&&a('<html lang="en" class="html a b"><head><noscript><style>/**/</style></noscript></head><body><noscript>noscript</noscript></body></html>');return e&&b("html",e).is(".html[lang=en]")&&b("head>noscript",e).html()&&"noscript"===b("body>noscript",e).text()}catch(d){}};e.createHTMLDocument=function(b){return d.DOMParser&&d.DOMParser.prototype&&
(new d.DOMParser).parseFromString(b||"","text/html")};if(!k(e.createHTMLDocument)&&(e.createHTMLDocument=function(b){b=b||"";if(h.implementation&&h.implementation.createHTMLDocument){for(var a=h.implementation.createHTMLDocument(""),e=h.createElement("html"),d=(b.slice(0,1024).match(/<html ([^>]+)>/im)||[0,""])[1].match(/\w+\="[^"]*.|\w+\='[^']*.|\w+/gm)||[],f=0,k;k=d[f];f++)k=k.split("=",2),a.documentElement.setAttribute(k[0],k[1].replace(/^["']|["']$/g,""));e.innerHTML=b.replace(/^.*?<html[^>]*>|<\/html>.*$/ig,
"");a.documentElement.removeChild(a.head);a.documentElement.removeChild(a.body);for(f=0;b=e.childNodes[f];f)a.documentElement.appendChild(b)}return a},!k(e.createHTMLDocument)&&(e.createHTMLDocument=function(b){b=b||"";if(h.implementation&&h.implementation.createHTMLDocument){var a=h.implementation.createHTMLDocument("");"object"===typeof a.activeElement&&(a.open(),a.write(b),a.close())}return a},!k(e.createHTMLDocument))))return;a.id=1;e.ids.push(a.id);e.settings[a.id]=a;a.load.script&&b("script").each(function(){var d=
this,g,d="function"===typeof a.load.rewrite?e.fire(a.load.rewrite,null,[d.cloneNode()])||d:d;g=d.src;g in a.log.script||!g||a.load.reload&&b(d).is(a.load.reload)||(a.log.script[g]=!0)});a.database&&(e.database(),a.fix.scroll&&b(d).unbind(a.nss.scroll).bind(a.nss.scroll,a.id,function(a,g){var h=e.settings[1],f;if(h.scroll.delay){for(;f=h.scroll.queue.shift();)clearTimeout(f);f=setTimeout(function(){for(;f=h.scroll.queue.shift();)clearTimeout(f);e.dbScroll(b(d).scrollLeft(),b(d).scrollTop())},h.scroll.delay);
h.scroll.queue.push(f)}else e.dbScroll(b(d).scrollLeft(),b(d).scrollTop())}));a.link&&b(this).undelegate(a.link,a.nss.click).delegate(a.link,a.nss.click,a.id,e.click=function(a){a.timeStamp=(new Date).getTime();var g=e.settings[1];if(!(!b(this).filter(g.filter).length||g.disable||a.isDefaultPrevented()||(g.location.href=e.canonicalizeURL(d.location.href),g.destination.href=e.canonicalizeURL(this.href),g.location.protocol!==g.destination.protocol||g.location.host!==g.destination.host||1<a.which||a.metaKey||
a.ctrlKey||a.shiftKey||a.altKey||!g.hashquery&&g.destination.hash&&g.location.href.replace(/#.*/,"")===g.destination.href.replace(/#.*/,"")))){var k,m;k=g.destination.href;g.area=e.fire(g.areaback,null,[a,g.parameter,g.destination.href,g.location.href]);g.timeStamp=a.timeStamp;g.landing&&(g.landing=!1);if(!(g.cache.mix&&b[e.name].getCache(k)||!b(g.area).length||g.scope&&!e.scope(g)))return g.database&&e.dbScroll(b(d).scrollLeft(),b(d).scrollTop()),g.cache[a.type.toLowerCase()]&&(m=b[e.name].getCache(k)),
e.drive(b,d,h,f,e,g,a,k,!0,m),a.preventDefault()}});a.form&&b(this).undelegate(a.form,a.nss.submit).delegate(a.form,a.nss.submit,a.id,e.submit=function(a){a.timeStamp=(new Date).getTime();var g=e.settings[1];if(!(g.disable||a.isDefaultPrevented()||(g.location.href=e.canonicalizeURL(d.location.href),g.destination.href=e.canonicalizeURL(this.action),g.location.protocol!==g.destination.protocol||g.location.host!==g.destination.host||1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey))){var k,m;k=
g.destination.href=e.canonicalizeURL(g.destination.href.replace(/[?#].*/,"")+("GET"===a.target.method.toUpperCase()?"?"+b(a.target).serialize():""));g.area=e.fire(g.areaback,null,[a,g.parameter,g.destination.href,g.location.href]);g.timeStamp=a.timeStamp;g.landing&&(g.landing=!1);if(!(g.cache.mix&&b[e.name].getCache(k)||!b(g.area).length||g.scope&&!e.scope(g)))return g.database&&e.dbScroll(b(d).scrollLeft(),b(d).scrollTop()),g.cache[a.type.toLowerCase()]&&g.cache[a.target.method.toLowerCase()]&&(m=
b[e.name].getCache(k)),e.drive(b,d,h,f,e,g,a,k,!0,m),a.preventDefault()}});b(d).unbind(a.nss.popstate).bind(a.nss.popstate,a.id,e.popstate=function(a){a.timeStamp=(new Date).getTime();var g=e.settings[1];if(!g.disable&&!a.isDefaultPrevented()){g.destination.href=e.canonicalizeURL(d.location.href);if(g.location.href===g.destination.href)return a.preventDefault();var k,m;if(g.location.hash!==g.destination.hash&&g.location.pathname+g.location.search===g.destination.pathname+g.destination.search&&!g.hashquery)return a.preventDefault();
k=g.destination.href;g.area=e.fire(g.areaback,null,[a,g.parameter,g.destination.href,g.location.href]);g.timeStamp=a.timeStamp;if(g.landing){if(g.landing.href===k){g.landing=!1;return}g.landing=!1}if(b(g.area).length)return g.database&&g.fix.history&&e.dbTitle(k),g.cache[a.type.toLowerCase()]&&(m=b[e.name].getCache(k)),e.drive(b,d,h,f,e,g,a,k,!1,m),a.preventDefault()}})},drive:function(b,d,h,f,e,a,k,l,g,m){function s(a,b,e,d,f,c,h,k){a:{var m=c.speedcheck;m&&c.log.speed.time.push(c.speed.now()-c.log.speed.fire);
m&&c.log.speed.name.push("loaded("+c.log.speed.time[c.log.speed.time.length-1]+")");var n=c.callbacks.update;if(!1!==f.fire(n.before,null,[h,c.parameter,t,u,r,k],c.callbacks.async)){if(c.cache.mix&&"popstate"!==h.type.toLowerCase()&&(new Date).getTime()-h.timeStamp<=c.cache.mix)return"function"===typeof c.fallback?f.fire(c.fallback,null,[h,c.parameter,c.destination.href,c.location.href]):f.fallback(h);var q,s,p,v;try{c.xhr&&4>c.xhr.readyState&&c.xhr.abort();c.xhr=null;if(!k&&!~(r.getResponseHeader("Content-Type")||
"").toLowerCase().search(c.contentType))throw Error("throw: content-type mismatch");k&&!1!==f.fire(n.cache.load.before,null,[h,c.parameter,k],c.callbacks.async)&&(r=k.XMLHttpRequest||r,t=r.responseText,u=k.textStatus||u,p=k.css,v=k.script,f.fire(n.cache.load.after,null,[h,c.parameter,k],c.callbacks.async));k&&k.XMLHttpRequest||!c.cache.click&&!c.cache.submit&&!c.cache.popstate||"submit"===h.type.toLowerCase()&&!c.cache[h.target.method.toLowerCase()]||!1===f.fire(n.cache.save.before,null,[h,c.parameter,
k],c.callbacks.async)||(a[f.name].setCache(l,k&&k.data||null,u,r),k=a[f.name].getCache(l),f.fire(n.cache.save.after,null,[h,c.parameter,k],c.callbacks.async));var z,y,A,F;A=c.area.match(/(?:[^,\(\[]+|\(.*?\)|\[.*?\])+/g);if(k&&k.data){y=f.createHTMLDocument(k.data);z=f.createHTMLDocument(r.responseText);for(var C=0,I,B,K;I=A[C++];){B=a(I,z);K=a(I,y);for(var G=0;x=K[G];G++)B.eq(G).html(a(x).contents())}}else z=f.createHTMLDocument(r.responseText);a("noscript",z).each(function(){this.children.length&&
a(this).text(this.innerHTML)});q=a("title",z).text();if(!a(c.area).length||a(c.area).length!==a(c.area,z).length)throw Error("throw: area length mismatch");a(b).trigger(c.gns+".unload");var D=a('head meta[http-equiv="Refresh"][content*="URL="]',z);if(D[0]&&!1!==f.fire(n.redirect.before,null,[h,c.parameter,t,u,r],c.callbacks.async)){D=a("<a>",{href:D.attr("content").match(/\w+:\/\/[^;\s]+/i)})[0];switch(!0){case !c.load.redirect:case D.protocol!==c.destination.protocol:case D.host!==c.destination.host:case "submit"===
h.type.toLowerCase()&&"GET"===h.target.method.toUpperCase():switch(h.type.toLowerCase()){case "click":case "submit":return b.location.assign(D.href);case "popstate":return b.location.replace(D.href)}default:switch(a[f.name].on(),h.type.toLowerCase()){case "click":return a[f.name].click(D.href);case "submit":return"GET"===h.target.method.toUpperCase()?a[f.name].click(D):b.location.assign(D.href);case "popstate":return b.history.replaceState(b.history.state,q,D.href),g&&c.fix.location&&(a[f.name].off(),
b.history.back(),b.history.forward(),a[f.name].on()),a(b).trigger("popstate")}}f.fire(n.redirect.after,null,[h,c.parameter,t,u,r],c.callbacks.async)}!1!==f.fire(n.url.before,null,[h,c.parameter,t,u,r],c.callbacks.async)&&(g&&l!==c.location.href&&b.history.pushState(f.fire(c.state,null,[h,c.parameter,c.destination.href,c.location.href]),b.opera||~b.navigator.userAgent.toLowerCase().indexOf("opera")?q:e.title,l),c.location.href=l,g&&c.fix.location&&(a[f.name].off(),b.history.back(),b.history.forward(),
a[f.name].on()),f.fire(n.url.after,null,[h,c.parameter,t,u,r],c.callbacks.async));!1!==f.fire(n.title.before,null,[h,c.parameter,t,u,r],c.callbacks.async)&&(e.title=q,c.database&&c.fix.history&&f.dbTitle(l,q),f.fire(n.title.after,null,[h,c.parameter,t,u,r],c.callbacks.async));c.database&&f.dbCurrent();if(!1!==f.fire(n.head.before,null,[h,c.parameter,t,u,r],c.callbacks.async)){var J=[],N=a("head").find(c.load.head).not('[rel~="stylesheet"]');s=a("head",z).find(c.load.head).not(a(c.area,z).find(c.load.head));
s=a(s).not(c.load.reject).not('[rel~="stylesheet"]');for(var E,C=0,x;x=s[C];C++){x="object"===typeof x?x:a(x)[0];switch(x.tagName.toLowerCase()){case "base":E="base";break;case "link":switch((x.getAttribute("rel")||"").toLowerCase()){case "alternate":E='link[type="'+x.getAttribute("type")+'"][rel="'+x.getAttribute("rel")+'"]';break;default:E='link[rel="'+x.getAttribute("rel")+'"]'}break;case "meta":if(x.getAttribute("charset"))E="meta[charset]";else if(x.getAttribute("http-equiv"))E='meta[http-equiv="'+
x.getAttribute("http-equiv")+'"]';else if(x.getAttribute("name"))E='meta[name="'+x.getAttribute("name")+'"]';else continue;break;default:E=null}J=s.filter(E).not('[rel~="stylesheet"]');a("head").find(E).not(c.load.reload).not('[rel~="stylesheet"]').filter(function(){var a=this,b;return!!J.filter(function(){b=this;return a.outerHTML===b.outerHTML?(J=J.not(b),N=N.not(a),!1):!0})[0]}).remove();a("head").prepend(J.map(function(){return a(this.outerHTML)[0]}))}N.not(c.load.reload).remove();f.fire(n.head.after,
null,[h,c.parameter,t,u,r],c.callbacks.async)}m&&c.log.speed.time.push(c.speed.now()-c.log.speed.fire);m&&c.log.speed.name.push("head("+c.log.speed.time[c.log.speed.time.length-1]+")");if(!1!==f.fire(n.content.before,null,[h,c.parameter,t,u,r],c.callbacks.async)){a(c.area).children("."+c.nss.class4html+"-check").remove();F=a("<div/>",{"class":c.nss.class4html+"-check",style:"background: none !important; display: block !important; visibility: hidden !important; position: absolute !important; top: 0 !important; left: 0 !important; z-index: -9999 !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; font-size: 12px !important; text-indent: 0 !important;"}).text(c.gns);
for(C=0;I=A[C++];)for(B=a(I),K=a(I,z).clone().find("script").remove().end(),G=0;x=K[G];G++)B.eq(G).html(a(x).contents()).append(F.clone());F=a(c.area).children("."+c.nss.class4html+"-check");a(e).trigger(c.gns+".DOMContentLoaded");f.fire(n.content.after,null,[h,c.parameter,t,u,r],c.callbacks.async)}m&&c.log.speed.time.push(c.speed.now()-c.log.speed.fire);m&&c.log.speed.name.push("content("+c.log.speed.time[c.log.speed.time.length-1]+")");var O=function(e){if(!1!==f.fire(n.scroll.before,null,[h,c.parameter],
c.callbacks.async)){var d,g;switch(h.type.toLowerCase()){case "click":case "submit":d=e&&"function"===typeof c.scrollLeft?f.fire(c.scrollLeft,null,[h,c.parameter,c.destination.href,c.location.href]):c.scrollLeft;d=0<=d?d:0;d=!1===d||null===d?a(b).scrollLeft():parseInt(Number(d),10);g=e&&"function"===typeof c.scrollTop?f.fire(c.scrollTop,null,[h,c.parameter,c.destination.href,c.location.href]):c.scrollTop;g=0<=g?g:0;g=!1===g||null===g?a(b).scrollTop():parseInt(Number(g),10);a(b).scrollTop()===g&&a(b).scrollLeft()===
d||b.scrollTo(d,g);e&&c.database&&c.fix.scroll&&f.dbScroll(d,g);break;case "popstate":e&&c.database&&c.fix.scroll&&f.dbScroll()}f.fire(n.scroll.after,null,[h,c.parameter],c.callbacks.async)}},P=function(b){if(!1!==f.fire(n.rendering.before,null,[h,c.parameter],c.callbacks.async)){var e=0;(function(){F.filter(function(){return this.clientWidth||this.clientHeight||a(this).is(":hidden")}).length===F.length||100<=e?H(b):F.length&&(e++,setTimeout(arguments.callee,c.interval))})()}},H=function(e){m&&c.log.speed.time.push(c.speed.now()-
c.log.speed.fire);m&&c.log.speed.name.push("renderd("+c.log.speed.time[c.log.speed.time.length-1]+")");F.remove();c.scroll.record=!0;f.hashscroll("popstate"===h.type.toLowerCase())||O(!0);a(b).trigger(c.gns+".load");f.fire(e);m&&console.log(c.log.speed.time);m&&console.log(c.log.speed.name);f.fire(n.rendering.after,null,[h,c.parameter],c.callbacks.async)};a("noscript",z).remove();var M=function(e){if(c.load.script&&!1!==f.fire(n.script.before,null,[h,c.parameter,t,u,r],c.callbacks.async)){var d,g=
[];d=(k=a[f.name].getCache(l))&&!k.script;v=v||a("script",z);v=a(v).not(c.load.reject);k&&k.script&&v&&v.length!==k.script.length&&(d=!0);d&&(k.script=[]);for(var q=0,w;w=v[q];q++)w="object"===typeof w?d?a(w.outerHTML)[0]:w:a(w)[0],w="function"===typeof c.load.rewrite?f.fire(c.load.rewrite,null,[w])||w:w,d&&(k.script[q]=w),!a(w).is(e)||!w.src&&!f.trim(w.innerHTML)||w.src in c.log.script||c.load.reject&&a(w).is(c.load.reject)||(c.load.reload&&a(w).is(c.load.reload)||(c.log.script[w.src]=!0),w&&g.push(w));
for(q=0;w=g[q];q++)try{w.src?a.ajax(a.extend(!0,{},c.ajax,c.load.ajax,{url:w.src,async:!!w.async,global:!1})):"object"!==typeof w||w.type&&!~w.type.toLowerCase().indexOf("text/javascript")||b.eval.call(b,(w.text||w.textContent||w.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/"))}catch(p){break}!1!==f.fire(n.script.after,null,[h,c.parameter,t,u,r],c.callbacks.async)&&(m&&c.log.speed.time.push(c.speed.now()-c.log.speed.fire),m&&c.log.speed.name.push(("[src][defer]"===e?"defer":"script")+
"("+c.log.speed.time[c.log.speed.time.length-1]+")"))}};if(!1!==f.fire(n.verify.before,null,[h,c.parameter],c.callbacks.async)){var Q=f.canonicalizeURL(b.location.href).replace(/(?:%\w{2})+/g,function(a){return l.match(a.toLowerCase())||a});if(l===Q)c.retry=!0;else if(c.retry)c.retry=!1,c.destination.href=Q,f.drive(a,b,e,d,f,c,h,c.destination.href,!1,c.cache[h.type.toLowerCase()]&&a[f.name].getCache(f.canonicalizeURL(b.location.href)));else throw Error("throw: location mismatch");f.fire(n.verify.after,
null,[h,c.parameter],c.callbacks.async)}(function(){if(c.load.css&&!1!==f.fire(n.css.before,null,[h,c.parameter,t,u,r],c.callbacks.async)){var b,e=[],d=a('link[rel~="stylesheet"], style').not(a(c.area).find('link[rel~="stylesheet"], style'));b=(k=a[f.name].getCache(l))&&!k.css;p=p||a('link[rel~="stylesheet"], style',z).not(a(c.area,z).find('link[rel~="stylesheet"], style'));p=a(p).not(c.load.reject);k&&k.css&&p&&p.length!==k.css.length&&(b=!0);b&&(k.css=[]);for(var g=0,q;q=p[g];g++){q="object"===
typeof q?b?a(q.outerHTML)[0]:q:a(q)[0];q="function"===typeof c.load.rewrite?f.fire(c.load.rewrite,null,[q])||q:q;b&&(k.css[g]=q);for(var s=0;d[s];s++)if(f.trim(d[s].href||d[s].innerHTML||"")===f.trim(q.href||q.innerHTML||"")){e.length&&(s?d.eq(s-1).after(e):d.eq(s).before(e),e=[]);d=d.not(d[s]);q=null;break}q&&e.push(q.cloneNode(!0))}d[0]?d.last().after(e):a("head").append(e);d.not(c.load.reload).remove();!1!==f.fire(n.css.after,null,[h,c.parameter,t,u,r],c.callbacks.async)&&(m&&c.log.speed.time.push(c.speed.now()-
c.log.speed.fire),m&&c.log.speed.name.push("css("+c.log.speed.time[c.log.speed.time.length-1]+")"))}})();a(b).one(c.gns+".rendering",function(b){b.preventDefault();b.stopImmediatePropagation();O(!1);a(e).trigger(c.gns+".ready");M(":not([defer]), :not([src])");c.load.sync?P(function(){M("[src][defer]")}):(P(),M("[src][defer]"))}).trigger(c.gns+".rendering");if(!1===f.fire(n.success,null,[h,c.parameter,t,u,r],c.callbacks.async))break a;if(!1===f.fire(n.complete,null,[h,c.parameter,t,u,r],c.callbacks.async))break a;
if(!1===f.fire(c.callback,null,[h,c.parameter,t,u,r],c.callbacks.async))break a}catch(R){k&&a[f.name].removeCache(l);if(!1===f.fire(n.error,null,[h,c.parameter,t,u,r],c.callbacks.async))break a;if(!1===f.fire(n.complete,null,[h,c.parameter,t,u,r],c.callbacks.async))break a;if(c.fallback)return"function"===typeof c.fallback?f.fire(c.fallback,null,[h,c.parameter,c.destination.href,c.location.href]):f.fallback(h)}f.fire(n.after,null,[h,c.parameter,t,u,r],c.callbacks.async)}}}var v=a.speedcheck;v&&(a.log.speed.fire=
a.timeStamp);v&&(a.log.speed.time=[]);v&&(a.log.speed.name=[]);v&&a.log.speed.time.push(0);v&&a.log.speed.name.push("pjax("+a.log.speed.time[a.log.speed.time.length-1]+")");a.scroll.record=!1;a.fix.reset&&/click|submit/.test(k.type.toLowerCase())&&d.scrollTo(b(d).scrollLeft(),0);if(!1!==e.fire(a.callbacks.before,null,[k,a.parameter],a.callbacks.async)){b[e.name].off();if(m&&m.XMLHttpRequest)v&&a.log.speed.name.splice(0,1,"cache("+a.log.speed.time[a.log.speed.time.length-1]+")"),b.when?b.when(e.wait(e.fire(a.wait,
null,[k,a.parameter,a.destination.href,a.location.href]))).done(function(){s(b,d,h,f,e,a,k,m)}):s(b,d,h,f,e,a,k,m);else if(a.xhr&&a.xhr.promise)v&&a.log.speed.time.splice(0,1,a.xhr.timeStamp-a.log.speed.fire),v&&a.log.speed.name.splice(0,1,"preload("+a.log.speed.time[a.log.speed.time.length-1]+")"),v&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire),v&&a.log.speed.name.push("continue("+a.log.speed.time[a.log.speed.time.length-1]+")"),v=a.wait&&isFinite(a.xhr.timeStamp)?Math.max(a.wait-(new Date).getTime()+
a.xhr.timeStamp,0):0,b.when(a.xhr,e.wait(v)).done(function(){s(b,d,h,f,e,a,k,b[e.name].getCache(l))});else{var n,p,t,r,u,A;n={};switch(k.type.toLowerCase()){case "click":n.type="GET";break;case "submit":n.type=k.target.method.toUpperCase();"POST"===n.type&&(n.data=b(k.target).serializeArray());break;case "popstate":n.type="GET"}p=b.when?b.Deferred():null;b.extend(!0,n,a.ajax,{xhr:a.callbacks.ajax.xhr?function(){r=e.fire(a.callbacks.ajax.xhr,this,[k,a.parameter],a.callbacks.async);return r="object"===
typeof r&&r||b.ajaxSettings.xhr()}:f,beforeSend:function(b,d){r=b;a.xhr&&4>a.xhr.readyState&&a.xhr.abort();a.xhr=r;r.setRequestHeader(a.nss.requestHeader,"true");r.setRequestHeader(a.nss.requestHeader+"-Area",a.area);r.setRequestHeader(a.nss.requestHeader+"-CSS",a.load.css);r.setRequestHeader(a.nss.requestHeader+"-Script",a.load.script);e.fire(a.callbacks.ajax.beforeSend,this,[k,a.parameter,r,d],a.callbacks.async)},dataFilter:a.callbacks.ajax.dataFilter?function(b,d){t=b;return e.fire(a.callbacks.ajax.dataFilter,
this,[k,a.parameter,t,d],a.callbacks.async)||t}:f,success:function(b,d,f){t=b;u=d;r=f;e.fire(a.callbacks.ajax.success,this,[k,a.parameter,t,u,r],a.callbacks.async)},error:function(b,d,f){r=b;u=d;A=f;e.fire(a.callbacks.ajax.error,this,[k,a.parameter,r,u,A],a.callbacks.async)},complete:function(g,l){r=g;u=l;e.fire(a.callbacks.ajax.complete,this,[k,a.parameter,r,u],a.callbacks.async);if(A){if(p&&p.reject(),a.fallback&&"abort"!==u)return"function"===typeof a.fallback?e.fire(a.fallback,null,[k,a.parameter,
a.destination.href,a.location.href]):e.fallback(k)}else p&&p.resolve()||s(b,d,h,f,e,a,k,m)}});var y=a.server.query;y&&(y=y.split("="),y=encodeURIComponent(y[0])+(0<y.length?"="+encodeURIComponent(y[1]):""));n.url=l.replace(/([^#]+)(#[^\s]*)?$/,"$1"+(y?(l.match(/\?/)?"&":"?")+y:"")+"$2");v&&a.log.speed.time.push(a.speed.now()-a.log.speed.fire);v&&a.log.speed.name.push("request("+a.log.speed.time[a.log.speed.time.length-1]+")");b.when&&b.when(p.promise(),e.wait(e.fire(a.wait,null,[k,a.parameter,a.destination.href,
a.location.href]))).done(function(){s(b,d,h,f,e,a,k,m)});b.ajax(n)}b[e.name].on();e.fire(a.callbacks.after,null,[k,a.parameter],a.callbacks.async)}},canonicalizeURL:function(b){var d;d=f.trim(b);d=d.replace(/["`^|\\<>{}\[\]\s].*/,"");d=/^https?:/i.test(d)?d:m("<a/>",{href:d})[0].href;d=encodeURI(decodeURI(d));return d=d.replace(/(?:%\w{2})+/g,function(d){return b.match(d.toLowerCase())||d})},trim:function(b){if(String.prototype.trim)b=String(b).trim();else if(b=String(b).replace(/^[\s\uFEFF\xA0]+/,
""))for(var d=b.length;--d;)if(/[^\s\uFEFF\xA0]/.test(b.charAt(d))){b=b.substring(0,d+1);break}return b},fire:function(b,d,f,m){return"function"===typeof b?m?setTimeout(function(){b.apply(d,f)},0):b.apply(d,f):b},hashscroll:function(b){var d=f.settings[1].destination.hash.slice(1);return!(b||!d)&&m("#"+(d?d:", [name~="+d+"]")).first().each(function(){isFinite(m(this).offset().top)&&p.scrollTo(m(p).scrollLeft(),parseInt(Number(m(this).offset().top),10))}).length},wait:function(b){var d=m.Deferred();
if(!b)return d.resolve();setTimeout(function(){d.resolve()},b);return d.promise()},fallback:function(b){switch(b.type.toLowerCase()){case "click":p.location.assign(b.currentTarget.href);break;case "submit":b.target.submit();break;case "popstate":p.location.reload()}},scope:function(b,d,h,q){var e,a,k,l,g,p,s,v,n,B,t,r,u;e=[].slice.call(arguments);e.splice(1,1,d||b.location.href);e.splice(2,1,h||b.destination.href);a=b.scope;d=(d||b.location.href).replace(/.+?\w(\/[^#?]*).*/,"$1");h=(h||b.destination.href).replace(/.+?\w(\/[^#?]*).*/,
"$1");k=d.replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");g=(q||d).replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");if(q){if(!~q.indexOf("*"))return C;l=[];for(var A=0,y=g.length;A<y;A++)"*"===g[A]&&l.push(k[A])}for(A=g.length+1;A--;)if(n=B=t=r=C,k=g.slice(0,A).join("/").replace(/\/([?#])/g,"$1"),(k="/"+k+("/"===(q||d).charAt(k.length+1)?"/":""))&&k in a){if(!a[k]||!a[k].length)return!1;for(var H=0;(p=a[k][H])&&!1!==t&&!1!==r;H++)if("rewrite"!==p||"function"!==typeof a.rewrite||q)if("inherit"===
p)B=!0;else if("string"===typeof p){p=(s="^"===p.charAt(0))?p.slice(1):p;p=(v="*"===p.charAt(0))?p.slice(1):p;if(q&&~p.indexOf("/*/"))for(var L=0,y=l.length;L<y;L++)p=p.replace("/*/","/"+l[L]+"/");if(!(!s&&t||(v?d.search(p):d.indexOf(p)))){if(s)return!1;t=!0}if(!(!s&&r||(v?h.search(p):h.indexOf(p)))){if(s)return!1;r=!0}}else"object"===typeof p&&(u=p);else if(e.push(f.fire(a.rewrite,null,[h])),n=arguments.callee.apply(this,e)){t=r=!0;break}else if(!1===n)return!1;if(t&&r)return m.extend(!0,{},b,("object"===
typeof n?n:u)||{});if(!B)break}},database:function(b){var d=f.settings[1],h,q,e,a,k,l;h=d.gns;q=1;e=Math.floor((new Date).getTime()/864E5);a=f.IDBFactory;k=f.IDBDatabase;b=b||0;d.database=!1;if(!a||!h||5<b)return!1;try{var g=function(d){f.IDBDatabase=null;k&&k.close&&k.close();a.deleteDatabase(h);d?setTimeout(function(){f.database(++b)},d):f.database(++b)};q=parseInt(e-e%7+q,10);k=a.open(h);k.onblocked=function(){};k.onupgradeneeded=function(){var a=this.result;try{for(var b=a.objectStoreNames?a.objectStoreNames.length:
0;b--;)a.deleteObjectStore(a.objectStoreNames[b]);a.createObjectStore(d.gns,{keyPath:"id",autoIncrement:!1}).createIndex("date","date",{unique:!1})}catch(e){}};k.onsuccess=function(){try{k=this.result,f.IDBDatabase=k,(l=f.dbStore())?l.get("_version").onsuccess=function(){this.result&&q!==this.result.title?g():(f.dbVersion(q),f.dbCurrent(),f.dbTitle(d.location.href,B.title),f.dbScroll(m(p).scrollLeft(),m(p).scrollTop()),d.database=!0)}:g()}catch(a){g(1E3)}};k.onerror=function(a){g(1E3)}}catch(z){g(1E3)}},
dbStore:function(){for(var b=f.settings[1],d=f.IDBDatabase,h=d&&d.objectStoreNames?d.objectStoreNames.length:0;h--;)if(b.gns===d.objectStoreNames[h])return d&&d.transaction&&d.transaction(b.gns,"readwrite").objectStore(b.gns);return!1},dbCurrent:function(){var b=f.settings[1],d=f.dbStore();if(d){var h;h=f.canonicalizeURL(p.location.href);h=b.hashquery?h:h.replace(/#.*/,"");d.put({id:"_current",title:h})}},dbVersion:function(b){var d=f.dbStore();d&&d.put({id:"_version",title:b})},dbTitle:function(b,
d){var h=f.settings[1],q=f.dbStore();q&&(b=h.hashquery?b:b.replace(/#.*/,""),d?q.get(b).onsuccess=function(){q.put(m.extend(!0,{},this.result||{},{id:b,title:d,date:(new Date).getTime()}));f.dbClean()}:q.get(b).onsuccess=function(){this.result&&this.result.title&&(B.title=this.result.title)})},dbScroll:function(b,d){var h=f.settings[1],q=f.dbStore(),e=h.location.href,a=arguments.length;h.scroll.record&&q&&(e=h.hashquery?e:e.replace(/#.*/,""),q.get("_current").onsuccess=function(){this.result&&this.result.title&&
e===this.result.title&&(a?q.get(e).onsuccess=function(){q.put(m.extend(!0,{},this.result||{},{scrollX:parseInt(Number(b),10),scrollY:parseInt(Number(d),10)}))}:q.get(e).onsuccess=function(){this.result&&isFinite(this.result.scrollX)&&isFinite(this.result.scrollY)&&p.scrollTo(parseInt(Number(this.result.scrollX),10),parseInt(Number(this.result.scrollY),10))})})},dbClean:function(){var b=f.dbStore();b.count().onsuccess=function(){1E3<this.result&&(b.index("date").openCursor(f.IDBKeyRange.upperBound((new Date).getTime()-
2592E5)).onsuccess=function(){var d=this.result;d?(d["delete"](d.value.id),d["continue"]()):b.count().onsuccess=function(){1E3<this.result&&b.clear()}})}}};(function(b,d,f,m,e){b.fn[e.name]=b[e.name]=function(){return H.apply(this,[b,d,f,m,e].concat([].slice.call(arguments)))};e.setProperties.call(b[e.name])}).apply(this,[].slice.call(arguments).concat([f]))})(jQuery,window,document,void 0);
